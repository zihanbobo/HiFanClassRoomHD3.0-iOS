webpackJsonp([1],{"+BLA":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"/Mll":function(e,t,a){e.exports=a("OCs/")},"/a/u":function(e,t){t.f=Object.getOwnPropertySymbols},0:function(e,t,a){e.exports=a("6G9P")},"0jvK":function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("hRKE"),r=o(n),i=a("AA3o"),l=o(i),s=a("xSur"),d=o(s),c=a("T+56"),u=o(c),h=function(){function e(){(0,l.default)(this,e),this.permissionsJson=this.productionDefaultAppAppPermissions()}return(0,d.default)(e,[{key:"productionDefaultAppAppPermissions",value:function(){return{canDraw:!1,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,h5DocumentActionClick:!1,dynamicPptActionClick:!1,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromWBPageCount:!1,sendSignallingFromSharpsChange:!1,sendSignallingFromShowPage:!1,sendSignallingFromDynamicPptShowPage:!1,sendSignallingFromH5ShowPage:!1,sendSignallingFromGeneralShowPage:!1,sendSignallingFromDynamicPptTriggerActionClick:!1,sendSignallingFromH5DocumentAction:!1,sendSignallingFromVideoDraghandle:!1,sendSignallingFromBlackBoardDrag:!1,allUserTools:!1,laser:!1,publishDynamicPptMediaPermission_video:!1,sendWhiteboardMarkTool:!1,jumpPage:!1,sendSignallingFromBlackBoard:!1,sendSignallingTimerToStudent:!1,sendSignallingDialToStudent:!1,sendSignallingDataStudentToTeacherAnswer:!0,studentInit:!1,dialIconClose:!1,sendSignallingAnswerToStudent:!1,sendSignallingQiangDaQi:!1,sendSignallingQiangDaZhe:!0,sendSignallingFromDialDrag:!1,isSendSignallingFromTimerDrag:!1,isSendSignallingFromAnswerDrag:!1,isSendSignallingFromResponderDrag:!1,isShowVideoDrawTool:!1}}},{key:"resetDefaultAppPermissions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;t.permissionsJson=t.productionDefaultAppAppPermissions(),e&&u.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}},{key:"resetAppPermissions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;e&&"object"===(void 0===e?"undefined":(0,r.default)(e))&&(Object.customAssign(a.permissionsJson,e),t&&u.default.CoreController.dispatchEvent({type:"resetAppPermissions",message:{data:a.permissionsJson}}))}},{key:"setAppPermissions",value:function(e,t){var a=this;if(a.permissionsJson[e]!==t){L.Logger.debug("setAppPermissions key and value:",e,t,"old appPermissions:",a.permissionsJson[e]),a.permissionsJson[e]=t;var o={type:"updateAppPermissions_"+e,message:{key:e,value:t}};u.default.CoreController.dispatchEvent(o)}}},{key:"getAppPermissions",value:function(e){return this.permissionsJson[e]}},{key:"initAppPermissions",value:function(e){L.Logger.debug("initAppPermissions data:",e);var t=this;for(var a in e)t.permissionsJson[a]=e[a];Object.customAssign(t.permissionsJson,e),t.permissionsJson=e,u.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}}]),e}(),f=new h;t.default=f},"0lA4":function(e,t){},"1GTc":function(e,t,a){var o=a("MITN");o(o.S+o.F,"Object",{assign:a("nBsG")})},"2LoE":function(e,t,a){e.exports={default:a("cz9/"),__esModule:!0}},"2P8z":function(e,t,a){var o=a("OtAM"),n=a("DGQG"),r=a("K0/C").f;e.exports=function(e){return function(t){for(var a,i=n(t),l=o(i),s=l.length,d=0,c=[];s>d;)r.call(i,a=l[d++])&&c.push(e?[a,i[a]]:i[a]);return c}}},"2vo4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={header:{tool:{blackBoard:{title:{open:"小白板",close:"關閉",prev:"上壹位",next:"下壹位",shrink:"縮小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分發",recycle:"回收",againDispenseed:"再次分發",commonTeacher:"老師"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"筆",text:"文字",eraser:"橡皮",color:"顏色及粗細"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠標"},pencil:{title:"筆",pen:{text:"鉛筆工具"},Highlighter:{text:"熒光筆工具"},linellae:{text:"線條工具"},arrow:{text:"箭頭工具"},laser:{title:"激光筆",text:"激光筆工具"}},text:{title:"文字",Msyh:{text:"微軟雅黑"},Ming:{text:"宋體"},Arial:{text:"Arial"}},shape:{title:"形狀",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心橢圓"},filledCircle:{text:"橢圓"}},eraser:{title:"橡皮擦"},undo:{title:"撤銷"},redo:{title:"恢復"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"縮小"},tool_rotate_left:{title:"逆時針旋轉"},tool_rotate_right:{title:"順時針旋轉"},colorAndMeasure:{title:"顏色及粗細",selectColorText:"選擇顏色",selectMeasure:"選擇粗細"},colors:{title:"顏色"},measure:{title:"粗細"}},page:{prev:{text:"上壹頁"},next:{text:"下壹頁"},add:{text:"加頁"},lcFullBtn:{title:"繪制區域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5課件全屏"},skipPage:{text_one:"至第",text_two:"頁"},ok:{text:"確定"}}},alertWin:{ok:{showError:{text:"確定"},showPrompt:{text:"確定"},showConfirm:{cancel:"取消",ok:"確定"}},title:{showError:{text:"錯誤信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"確認消息"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"計時器"},timerBegin:{text:"開始"},timerStop:{text:"暫停"},again:{text:"重新開始"}},dial:{turntable:{text:"轉盤"}},answers:{headerTopLeft:{text:"答題器"},headerMiddel:{text:"點擊字母預設正確答案"},beginAnswer:{text:"開始答題"},tureAccuracy:{text:"正確率"},trueAnswer:{text:"正確答案"},endAnswer:{text:"結束答題"},restarting:{text:"重新開始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"請至少選擇壹個答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答題人數"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"詳情"},statistics:{text:"統計"},student:{text:"學生"},TheSelectedTheAnswer:{text:"所選答案"},AnswerTime:{text:"答題用時"},end:{text:"請先結束答題"}},responder:{responder:{text:"搶答器"},begin:{text:"開始搶答"},restart:{text:"重新開始"},close:{text:"關閉"},update:{text:"當前瀏覽器不支持canvas組件請升級！"},inAnswer:{text:"搶答中"},answer:{text:"搶答"},noContest:{text:"無人搶答"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}};t.default=o},"3cXf":function(e,t,a){e.exports={default:a("4rP4"),__esModule:!0}},"4YfN":function(e,t,a){"use strict";t.__esModule=!0;var o=a("aA9S"),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}},"4rP4":function(e,t,a){var o=a("UusJ"),n=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},"4ztK":function(e,t,a){"use strict";var o=a("Ul0Y"),n=a("MITN"),r=a("/Mll"),i=a("OCs/"),l=a("7Tch"),s=a("9mma"),d=a("qd7y"),c=a("Macf"),u=a("hghX"),h=a("QjZ5")("iterator"),f=!([].keys&&"next"in[].keys()),g=function(){return this};e.exports=function(e,t,a,p,m,v,b){d(a,t,p);var y,w,S,T=function(e){if(!f&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new a(this,e)}}return function(){return new a(this,e)}},_=t+" Iterator",I="values"==m,k=!1,E=e.prototype,P=E[h]||E["@@iterator"]||m&&E[m],C=!f&&P||T(m),W=m?I?T("entries"):C:void 0,D="Array"==t?E.entries||P:P;if(D&&(S=u(D.call(new e)))!==Object.prototype&&S.next&&(c(S,_,!0),o||l(S,h)||i(S,h,g)),I&&P&&"values"!==P.name&&(k=!0,C=function(){return P.call(this)}),o&&!b||!f&&!k&&E[h]||i(E,h,C),s[t]=C,s[_]=g,m)if(y={values:I?C:T("values"),keys:v?C:T("keys"),entries:W},b)for(w in y)w in E||r(E,w,y[w]);else n(n.P+n.F*(f||k),t,y);return y}},"5sQS":function(e,t,a){var o=a("BLKo");e.exports=Array.isArray||function(e){return"Array"==o(e)}},"6/+b":function(e,t,a){var o=a("KFas"),n=a("UusJ"),r=a("Ul0Y"),i=a("eQoU"),l=a("qRYU").f;e.exports=function(e){var t=n.Symbol||(n.Symbol=r?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:i.f(e)})}},"6EVm":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"6G9P":function(e,t,a){"use strict";a("0lA4"),a("PRvV"),a("w5fS"),a("9j6Y"),a("briU"),a("gDty"),a("buLY"),a("PqAP");var o=a("01iU");(0,function(e){return e&&e.__esModule?e:{default:e}}(o).default)()},"6ifl":function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("4YfN"),r=o(n),i=a("A9zj"),l=o(i),s=a("Yarq"),d=o(s),c=a("AA3o"),u=o(c),h=a("xSur"),f=o(h),g=a("UzKs"),p=o(g),m=a("Y7Ml"),v=o(m),b=a("jyQm"),y=o(b),w=a("BNWl"),S=o(w),T=a("T+56"),_=o(T),I=a("DrPG"),k=o(I),E=a("HUPQ"),P=o(E),C=a("yE5a"),W=o(C),D=a("YRCL"),A=o(D),L=a("uObV"),x=o(L),M=function(e){function t(e){(0,u.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.containerWidthAndHeight=Object.customAssign({},a.props.containerWidthAndHeight),a.instanceId=void 0!==a.props.instanceId?a.props.instanceId:"whiteboard_default",a.whiteboardElementId="whiteboard_container_"+a.instanceId,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.showRemoteRemindContent=void 0!==a.props.showRemoteRemindContent?a.props.showRemoteRemindContent:P.default.showRemoteRemindContent,a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;_.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),e._lcInit()}},{key:"componentWillUnmount",value:function(){var e=this;e.props.saveImage&&x.default.downCanvasImageToLocalFile(e.instanceId),x.default.destroyWhiteboardInstance(e.instanceId),_.default.Window.removeBackupListerner(e.listernerBackupid),_.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.show!==this.props.show&&this.props.show&&x.default.resizeWhiteboardHandler(a.instanceId),!a.props.containerWidthAndHeight||a.props.containerWidthAndHeight.width===a.containerWidthAndHeight.width&&a.props.containerWidthAndHeight.height===a.containerWidthAndHeight.height||(Object.customAssign(a.containerWidthAndHeight,a.props.containerWidthAndHeight),x.default.updateContainerWidthAndHeight(a.instanceId,a.containerWidthAndHeight)),a.props.isBaseboard!==e.isBaseboard&&x.default.updateIsBaseboard(a.instanceId,a.props.isBaseboard),a.props.watermarkImageScalc!==e.watermarkImageScalc&&x.default.updateWhiteboardWatermarkImageScalc(a.instanceId,a.props.watermarkImageScalc),a.props.dependenceBaseboardWhiteboardID!==e.dependenceBaseboardWhiteboardID&&x.default.updateDependenceBaseboardWhiteboardID(a.instanceId,a.props.dependenceBaseboardWhiteboardID),a.props.deawPermission!==e.deawPermission&&x.default.changeWhiteboardDeawPermission(a.props.deawPermission,a.instanceId),a.props.useToolKey!==e.useToolKey&&x.default.activeWhiteboardTool(a.props.useToolKey,a.instanceId),a.props.useToolColor!==e.useToolColor&&x.default.updateColor(a.instanceId,{primary:a.props.useToolColor}),a.props.pencilWidth!==e.pencilWidth&&x.default.updatePencilWidth(a.instanceId,{pencilWidth:a.props.pencilWidth}),a.props.saveRedoStack!==e.saveRedoStack&&x.default.updateWhiteboardSaveRedoStackAndSaveUndoStack(a.instanceId,{saveRedoStack:a.props.saveRedoStack}),a.props.fontSize!==e.fontSize&&x.default.updateTextFont(a.instanceId,{fontSize:a.props.fontSize}),a.props.imageThumbnailId!==e.imageThumbnailId&&x.default.updateImageThumbnailId(a.instanceId,a.props.imageThumbnailId),a.props.backgroundColor!==e.backgroundColor&&x.default.updateColor(a.instanceId,{background:a.props.backgroundColor}),this.props.watermarkImageUrl!==e.watermarkImageUrl&&x.default.setWhiteboardWatermarkImage(this.instanceId,this.props.watermarkImageUrl)}},{key:"handlerResizeHandler",value:function(e){var t=this;e&&e.message&&void 0!=e.message.eleWHPercent&&x.default.updateWhiteboardMagnification(t.instanceId,e.message.eleWHPercent)}},{key:"sendSignallingToServer",value:function(e,t,a,o,n,r,i,l){A.default.sendSignallingFromSharpsChange(!1,e,t,a,o,n,r,i,l)}},{key:"delSignallingToServer",value:function(e,t,a,o){A.default.sendSignallingFromSharpsChange(!0,e,t,a,o)}},{key:"resizeWhiteboardSizeCallback",value:function(e){this.props.resizeWhiteboardSizeCallback&&"function"==typeof this.props.resizeWhiteboardSizeCallback&&this.props.resizeWhiteboardSizeCallback(e)}},{key:"noticeUpdateToolDescCallback",value:function(e){}},{key:"_lcInit",value:function(){var e=this;if(!x.default.hasWhiteboardById(e.instanceId)){var t={whiteboardElementId:e.whiteboardElementId,id:e.instanceId,productionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,deawPermission:this.props.deawPermission,containerWidthAndHeight:this.props.containerWidthAndHeight,associatedMsgID:this.props.associatedMsgID,associatedUserID:this.props.associatedUserID,needLooadBaseboard:this.props.needLooadBaseboard,nickname:this.props.nickname,useToolKey:this.props.useToolKey,saveRedoStack:this.props.saveRedoStack,imageThumbnailId:this.props.imageThumbnailId,backgroundColor:this.props.backgroundColor,imageThumbnailTipContent:this.props.imageThumbnailTipContent,showRemoteRemindContent:this.showRemoteRemindContent,useImgOriginalSizeToContainerWidthAndHeight:this.props.useImgOriginalSizeToContainerWidthAndHeight,myselfId:W.default.getTkRoom()&&W.default.getTkRoom().getMySelf()?W.default.getTkRoom().getMySelf().id:void 0,undoRedoClearToMySelf:this.props.undoRedoClearToMySelf},handler:{sendSignallingToServer:e.sendSignallingToServer.bind(e),delSignallingToServer:e.delSignallingToServer.bind(e),resizeWhiteboardSizeCallback:e.resizeWhiteboardSizeCallback.bind(e),noticeUpdateToolDescCallback:e.noticeUpdateToolDescCallback.bind(e),whiteboardWatermarkImageOnloadCallback:e.props.whiteboardWatermarkImageOnloadCallback}};this.props.watermarkImageScalc&&(t.productionOptions.watermarkImageScalc=this.props.watermarkImageScalc);var a={tool_pencil:{},tool_eraser:{},tool_text:{}};x.default.productionWhiteboard(t),x.default.registerWhiteboardTools(e.instanceId,a),x.default.clearRedoAndUndoStack(e.instanceId),x.default.hasWhiteboardFiledata(e.instanceId)||x.default.updateWhiteboardFiledata(e.instanceId,x.default.getWhiteboardDefaultFiledata({fileid:this.instanceId,filetype:"blackboard",filename:"blackboard"})),void 0!==this.props.watermarkImageUrl&&x.default.setWhiteboardWatermarkImage(this.instanceId,this.props.watermarkImageUrl),x.default.loadCurrpageWhiteboard(e.instanceId),x.default.resizeWhiteboardHandler(e.instanceId),x.default.updateTextFont(e.instanceId,{fontSize:e.props.fontSize}),x.default.updateColor(e.instanceId,{primary:e.props.useToolColor}),x.default.updatePencilWidth(e.instanceId,{pencilWidth:e.props.pencilWidth})}}},{key:"render",value:function(){var e=this,t=e.props,a=t.show,o=(0,l.default)(t,["show"]);return y.default.createElement("div",(0,r.default)({id:e.whiteboardElementId,style:{display:a?"block":"none"},className:"overflow-hidden  scroll-literally-container "},k.default.filterContainDataAttribute(o)))}}]),t}(y.default.Component);M.propTypes={instanceId:S.default.string.isRequired,containerWidthAndHeight:S.default.object.isRequired,isBaseboard:S.default.bool.isRequired,deawPermission:S.default.bool.isRequired},t.default=M},"7Tch":function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},"809B":function(e,t,a){var o=a("nwJ7"),n=a("gE2q").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,n)}},"8zml":function(e,t,a){e.exports={default:a("S2tW"),__esModule:!0}},"9j6Y":function(e,t){},"9mma":function(e,t){e.exports={}},A9zj:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}},AA3o:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},Ay9U:function(e,t,a){a("kU6/"),e.exports=a("UusJ").Object.setPrototypeOf},BAOS:function(e,t,a){var o=a("uRtX"),n=a("Dc6E"),r=function(e,t){if(n(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{o=a("W0SX")(Function.call,a("YzBJ").f(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,a){return r(e,a),t?e.__proto__=a:o(e,a),e}}({},!1):void 0),check:r}},BLKo:function(e,t){var a={}.toString;e.exports=function(e){return a.call(e).slice(8,-1)}},CLwS:function(e,t,a){var o=a("NUpW"),n=a("OtAM");a("Mx9c")("keys",function(){return function(e){return n(o(e))}})},CTvS:function(e,t,a){var o=a("KFas"),n=o["__core-js_shared__"]||(o["__core-js_shared__"]={});e.exports=function(e){return n[e]||(n[e]={})}},DGQG:function(e,t,a){var o=a("esCQ"),n=a("Joyc");e.exports=function(e){return o(n(e))}},Dc6E:function(e,t,a){var o=a("uRtX");e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},DfvK:function(e,t,a){a("Sr0+"),e.exports=a("UusJ").Object.entries},DnLf:function(e,t,a){e.exports=!a("M7ni")&&!a("xVzf")(function(){return 7!=Object.defineProperty(a("ELtT")("div"),"a",{get:function(){return 7}}).a})},DrPG:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("Q+Ik"),r=o(n),i=a("HzJ8"),l=o(i),s=a("KH7x"),d=o(s),c=a("ZLEe"),u=o(c),h=a("hRKE"),f=o(h),g={tool:{launchFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()},isFullScreenStatus:function(e){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},isFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},runPrefixMethod:function(e,t){var a=void 0;return["webkit","moz","ms","o",""].forEach(function(o){if(!a){""===o&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var n=(0,f.default)(e[o+t]);n+""!="undefined"&&(a="function"===n?e[o+t]():e[o+t])}}),a},addFullscreenchange:function(e){g.tool.addEvent(document,"fullscreenchange",e,!1),g.tool.addEvent(document,"webkitfullscreenchange",e,!1),g.tool.addEvent(document,"mozfullscreenchange",e,!1),g.tool.addEvent(document,"MSFullscreenChange",e,!1),g.tool.addEvent(document,"msfullscreenchange",e,!1),g.tool.addEvent(document,"fullscreeneventchange",e,!1)},removeFullscreenchange:function(e){g.tool.removeEvent(document,"fullscreenchange",e,!1),g.tool.removeEvent(document,"webkitfullscreenchange",e,!1),g.tool.removeEvent(document,"mozfullscreenchange",e,!1),g.tool.removeEvent(document,"MSFullscreenChange",e,!1),g.tool.removeEvent(document,"msfullscreenchange",e,!1),g.tool.removeEvent(document,"fullscreeneventchange",e,!1)},addFullscreenerror:function(e){g.tool.addEvent(document,"fullscreenerror",e,!1),g.tool.addEvent(document,"webkitfullscreenerror",e,!1),g.tool.addEvent(document,"mozfullscreenerror",e,!1),g.tool.addEvent(document,"MSFullscreenError",e,!1),g.tool.addEvent(document,"msfullscreenerror",e,!1),g.tool.addEvent(document,"fullscreenerroreventchange",e,!1)},removeFullscreenerror:function(e){g.tool.removeEvent(document,"fullscreenerror",e,!1),g.tool.removeEvent(document,"webkitfullscreenerror",e,!1),g.tool.removeEvent(document,"mozfullscreenerror",e,!1),g.tool.removeEvent(document,"MSFullscreenError",e,!1),g.tool.removeEvent(document,"msfullscreenerror",e,!1),g.tool.removeEvent(document,"fullscreenerroreventchange",e,!1)},addEvent:function(e,t,a,o){o=void 0!=o&&null!=o&&o,e.addEventListener?e.addEventListener(t,a,o):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,o){e.addEventListener?e.removeEventListener(t,a,o):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},fireEvent:function(e,t){if(document.createEventObject){var a=document.createEventObject();return e.fireEvent("on"+t,a)}var o=document.createEvent("HTMLEvents");return o.initEvent(t,!0,!0),!e.dispatchEvent(o)}},getGUID:function(){function e(){this.date=new Date,"function"!=typeof this.newGUID&&(e.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),a=this.hexadecimal(this.getGUIDTime(),16),o=0;o<9;o++)e+=Math.floor(16*Math.random()).toString(16);for(e+=t,e+=a;e.length<32;)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},e.prototype.hexadecimal=function(e,t,a){return void 0!=a?parseInt(e.toString(),a).toString(t):parseInt(e.toString()).toString(t)},e.prototype.formatGUID=function(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)})}return new e},getNewGUID:function(){g.guidObj||(g.guidObj=new g.getGUID);var e=g.guidObj.newGUID();return g.guidObj=null,e},getBrowserInfo:function(){var e=window.navigator.userAgent,t=/(msie\s|trident.*rv:)([\w.]+)/,a=/(firefox)\/([\w.]+)/,o=/(opera).+version\/([\w.]+)/,n=/(chrome)\/([\w.]+)/,r=/version\/([\w.]+).*(safari)/,i=function(e){var i=t.exec(e);return null!=i?{browser:"IE",version:i[2]||"0"}:null!=(i=a.exec(e))?{browser:i[1]||"",version:i[2]||"0"}:null!=(i=o.exec(e))?{browser:i[1]||"",version:i[2]||"0"}:null!=(i=n.exec(e))?{browser:i[1]||"",version:i[2]||"0"}:(i=r.exec(e),null!=i?{browser:i[2]||"",version:i[1]||"0"}:null!=i?{browser:"",version:"0"}:{browser:"unknown",version:"unknown"})}(e.toLowerCase());return{versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),info:{browserName:i.browser,browserVersion:i.version,appCodeName:navigator.appCodeName,appMinorVersion:navigator.appMinorVersion,appName:navigator.appName,appVersion:navigator.appVersion,browserLanguage:navigator.browserLanguage,cookieEnabled:navigator.cookieEnabled,cpuClass:navigator.cpuClass,onLine:navigator.onLine,platform:navigator.platform,systemLanguage:navigator.systemLanguage,userAgent:navigator.userAgent,userLanguage:navigator.userLanguage}}},isEmpty:function(e){return 0===(0,u.default)(e).length},getUrlParams:function(e,t){var a=window.location.href;window.TkConstant&&(a=g.decrypt(window.TkConstant.SERVICEINFO.joinUrl)||window.location.href),a=t||a;var o=decodeURIComponent(a),n=o.indexOf("?"),r=o.substring(n+1),i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),l=r.match(i);return null!=l?l[2]:""},replaceFirstUper:function(e){if(e.length>0)return e.substring(0,1).toUpperCase()+e.substring(1)},isArray:function(e){return Array&&Array.isArray&&"function"==typeof Array.isArray?Array.isArray(e):e&&"object"===(void 0===e?"undefined":(0,f.default)(e))&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},filterContainDataAttribute:function(e){var t=g;if(e&&!t.isArray(e)&&"object"===(void 0===e?"undefined":(0,f.default)(e))){var a={},o=!0,n=!1,i=void 0;try{for(var s,c=(0,l.default)((0,r.default)(e));!(o=(s=c.next()).done);o=!0){var u=s.value,h=(0,d.default)(u,2),p=h[0],m=h[1];/^tkcustomdata/g.test(p)&&(a[p]=m)}}catch(e){n=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(n)throw i}}return a}return e},getFiletyeByFilesuffix:function(e){return"jpg"==e||"jpeg"==e||"png"==e||"gif"==e||"ico"==e||"bmp"==e?"jpg":"doc"==e||"docx"==e||"rtf"==e?"doc":"pdf"==e?"pdf":"ppt"==e||"pptx"==e||"pps"==e?"ppt":"txt"==e?"txt":"xls"==e||"xlsx"==e?"xlsx":"mp4"==e||"webm"==e?"mp4":"mp3"==e||"wav"==e?"mp3":"zip"==e?"h5":"whiteboard"===e?"whiteboard":"other"},isFunction:function(e){return e&&"function"==typeof e},getCustomUserPropertyByUser:function(e){return{disableaudio:e.disableaudio,disablevideo:e.disablevideo,giftnumber:e.giftnumber,hasaudio:e.hasaudio,hasvideo:e.hasvideo,publishstate:e.publishstate,raisehand:e.raisehand}},getTimeDifferenceToFormat:function(e,t){var a=t-e;if(a>=0){var o=Math.floor(a/864e5),n=a%864e5,r=Math.floor(n/36e5),i=n%36e5,l=Math.floor(i/6e4),s=i%6e4,d=Math.round(s/1e3),c=r+24*o,u={};return d>=60&&(d=0,l+=1),l>=60&&(l=0,c+=1),u.hh=c>9?c:"0"+c,u.mm=l>9?l:"0"+l,u.ss=d>9?d:"0"+d,u}return void L.Logger.error("Start time is greater than end time [start:"+e+"  , end:"+t+"]!")},isMillisecondClass:function(e){if("number"!=typeof e)return void L.Logger.error("time must is number!");e=String(e);var t=e.length;return 13===t||10!==t&&void L.Logger.warning("The incoming time is incorrect and cannot be judged to be second or second!")},encrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a||g.getUrlParams("debug"))return e}return L.Utils.encrypt(e,t)},decrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else if(g.getUrlParams("debug"))return e;return L.Utils.decrypt(e,t)},detectOS:function(){var e=navigator.userAgent,t="Win32"===navigator.platform||"Windows"===navigator.platform,a="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(a)return"Mac";if("X11"===navigator.platform&&!t&&!a)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(t){if(e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1)return"Win2000";if(e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1)return"WinXP";if(e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1)return"Win2003";if(e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1)return"WinVista";if(e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1)return"Win7";if(e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1)return"Win8";if(e.indexOf("Windows NT 10.0")>-1||e.indexOf("Windows 10")>-1)return"Win10"}return"Other"},internetSpeedTest:function(){},percentageChangeToRem:function(e,t,a,o){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,r=document.getElementById(o),i=r.clientWidth,l=r.clientHeight,s=window.GLOBAL.windowInnerWidth,d=window.GLOBAL.windowInnerHeight;return e.state[o].left=t*(s-i)/n,e.state[o].top=a*(d-l)/n,e.state[o]},RemChangeToPercentage:function(e,t,a,o){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,r=document.getElementById(o),i=r.clientWidth,l=r.clientHeight;return{percentLeft:t/(window.GLOBAL.windowInnerWidth-i)*n,percentTop:a/(window.GLOBAL.windowInnerHeight-l)*n}},controlDragBounds:function(e,t,a){var o=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,n=document.getElementById(t),r=n.clientWidth/o,i=n.clientHeight/o,l=document.getElementById(a),s=l.clientWidth/o,d=l.clientHeight/o;return e.state[t].left=e.state[t].left<0?e.state[t].left=0:e.state[t].left,e.state[t].left=e.state[t].left>s-r?s-r:e.state[t].left,e.state[t].top=e.state[t].top<0?e.state[t].top=0:e.state[t].top,e.state[t].top=e.state[t].top>d-i?d-i:e.state[t].top,e.state[t]}};t.default=g},ELtT:function(e,t,a){var o=a("uRtX"),n=a("KFas").document,r=o(n)&&o(n.createElement);e.exports=function(e){return r?n.createElement(e):{}}},FsTu:function(e,t,a){a("dmd9"),a("wCtA"),e.exports=a("Lo5Z")},GZtZ:function(e,t){var a=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++a+o).toString(36))}},GrKX:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("AA3o"),r=o(n),i=a("xSur"),l=o(i),s=a("T+56"),d=o(s),c=a("VSuD"),u=o(c),h=a("DrPG"),f=o(h),g=a("HUPQ"),p=o(g),m=a("yE5a"),v=o(m),b=a("uObV"),y=o(b),w=function(){function e(t){(0,r.default)(this,e),this.room=t}return(0,l.default)(e,[{key:"registerEventToRoom",value:function(){for(var e in u.default.EVENTTYPE.RoomEvent)!function(e){v.default.getTkRoom().addEventListener(u.default.EVENTTYPE.RoomEvent[e],function(t){var a=!0;"stream-rtcStats"===t.type&&(a=!1),a&&L.Logger.debug(u.default.EVENTTYPE.RoomEvent[e]+" event:",t),d.default.Room.dispatchEvent(t,!1)})}(e)}},{key:"addEventListenerToRoomHandler",value:function(){var e=this;for(var t in u.default.EVENTTYPE.RoomEvent)!function(t){d.default.Room.addEventListener(u.default.EVENTTYPE.RoomEvent[t],function(a){if(!e["handler"+f.default.replaceFirstUper(t)]||"function"!=typeof e["handler"+f.default.replaceFirstUper(t)]||!e["handler"+f.default.replaceFirstUper(t)](a)){var o=!0;"stream-rtcStats"===a.type&&(o=!1),d.default.CoreController.dispatchEvent(a,o)}})}(t)}},{key:"handlerRoomPubmsg",value:function(e){e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(p.default.serviceTime||(p.default.serviceTime=1e3*t.ts,p.default.remindServiceTime=1e3*t.ts),t.name){case"SharpsChange":p.default.showRemoteRemindContent&&v.default.getTkRoom().getUser(t.fromID)&&(t.remindContent=v.default.getTkRoom().getUser(t.fromID).nickname),y.default.handlerPubmsg_SharpsChange(t)}if("sendNetworkState"===t.name||"BlackBoardDrag"===t.name||"videoDraghandle"===t.name)return!0}},{key:"handlerRoomMsglist",value:function(e){var t=e.message,a=(e.source,{});return function(e,t,a){var o={};for(var n in e)a&&a[e[n].name]||(e[n].data&&"string"==typeof e[n].data&&(e[n].data=JSON.parse(e[n].data)),/outIframe/.test(e[n].name)?d.default.CoreController.dispatchEvent({type:"outIframe-msglist",message:{signallingData:e[n]}}):null==o[e[n].name]||void 0==o[e[n].name]?(o[e[n].name]=[],o[e[n].name].push(e[n])):o[e[n].name].push(e[n]));var r=o.SharpsChange;null!=r&&void 0!=r&&r.length>0&&y.default.handlerMsglist_SharpsChange(r),o.SharpsChange=null;var i=o.VideoWhiteboard;null!==i&&void 0!==i&&i.length>0&&d.default.CoreController.dispatchEvent({type:"receive-msglist-VideoWhiteboard",message:{VideoWhiteboardArray:i}}),o.VideoWhiteboard=null}(t,0,a),!0}},{key:"handlerRoomDelmsg",value:function(e){e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(t.name){case"SharpsChange":y.default.handlerDelmsg_SharpsChange(t)}}},{key:"handlerRoomPlaybackClearAll",value:function(e){return d.default.CoreController.dispatchEvent({type:u.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController}),!0}},{key:"handlerRoomTransmitWindowSize",value:function(){document.getElementById("tk_app")?(p.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,p.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(p.default.windowInnerWidth=window.innerWidth,p.default.windowInnerHeight=window.innerHeight);var e=p.default.windowInnerWidth/u.default.STANDARDSIZE,t=document.getElementById("all_root")||document.getElementsByTagName("html");if(t){var a=f.default.isArray(t)?t[0]:t;a&&a.style&&(a.style.fontSize=e+"px")}return d.default.Window.dispatchEvent({type:u.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:e}}),!0}}]),e}(),S=new w;S.addEventListenerToRoomHandler(),t.default=S},HUPQ:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("3cXf"),r=o(n),i=a("DrPG"),l=o(i);window.GLOBAL=window.GLOBAL||{};var s=window.GLOBAL;s.classBegin=!1,s.endClassBegin=!1,s.routeName=void 0,s.playback=!1,s.playPptVideoing=!1,s.playMediaFileing=!1,s.serviceTime=void 0,s.firstGetServiceTime=!1,s.isHandleMsglist=!1,s.remindServiceTime=void 0,s.classBeginTime=void 0,s.isSkipPageing=!1,s.isClient=!1,s.isBroadcast=!1,s.mobileDeviceType=void 0,s.windowInnerWidth=window.innerWidth,s.windowInnerHeight=window.innerHeight;var d=l.default.getBrowserInfo();L.Logger.info("浏览器 browserInfo:"+(0,r.default)(d)),s.isMobile=d.versions.mobile||d.versions.ios||d.versions.android||d.versions.iPhone||d.versions.iPad,s.isBroadcastClient=s.isClient&&s.isBroadcast,s.isBroadcastMobile=s.isMobile&&s.isBroadcast,s.languageName="ch"===l.default.getUrlParams("languageType")?"chinese":"tw"===l.default.getUrlParams("languageType")?"complex":"english",s.videoDrawingBoardType=l.default.getUrlParams("videoDrawingBoardType"),s.defaultFileInfo={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0},s.showRemoteRemindContent=!1,t.default=s},HzJ8:function(e,t,a){e.exports={default:a("aSM5"),__esModule:!0}},IYkF:function(e,t,a){e.exports={default:a("nrcm"),__esModule:!0}},Joyc:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"K0/C":function(e,t){t.f={}.propertyIsEnumerable},KFas:function(e,t){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},KH7x:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=a("MGgt"),r=o(n),i=a("HzJ8"),l=o(i);t.default=function(){function e(e,t){var a=[],o=!0,n=!1,r=void 0;try{for(var i,s=(0,l.default)(e);!(o=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){n=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},"KQ1+":function(e,t,a){a("6/+b")("asyncIterator")},KyAL:function(e,t,a){function o(e){return a(n(e))}function n(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./i18_chinese.js":"ppOE","./i18_complex.js":"2vo4","./i18_english.js":"yZ13"};o.keys=function(){return Object.keys(r)},o.resolve=n,e.exports=o,o.id="KyAL"},Lo5Z:function(e,t,a){var o=a("iKyp"),n=a("QjZ5")("iterator"),r=a("9mma");e.exports=a("UusJ").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||r.hasOwnProperty(o(t))}},M7ni:function(e,t,a){e.exports=!a("xVzf")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},MGgt:function(e,t,a){e.exports={default:a("FsTu"),__esModule:!0}},MITN:function(e,t,a){var o=a("KFas"),n=a("UusJ"),r=a("W0SX"),i=a("OCs/"),l=function(e,t,a){var s,d,c,u=e&l.F,h=e&l.G,f=e&l.S,g=e&l.P,p=e&l.B,m=e&l.W,v=h?n:n[t]||(n[t]={}),b=v.prototype,y=h?o:f?o[t]:(o[t]||{}).prototype;h&&(a=t);for(s in a)(d=!u&&y&&void 0!==y[s])&&s in v||(c=d?y[s]:a[s],v[s]=h&&"function"!=typeof y[s]?a[s]:p&&d?r(c,o):m&&y[s]==c?function(e){var t=function(t,a,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,o)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):g&&"function"==typeof c?r(Function.call,c):c,g&&((v.virtual||(v.virtual={}))[s]=c,e&l.R&&b&&!b[s]&&i(b,s,c)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},Macf:function(e,t,a){var o=a("qRYU").f,n=a("7Tch"),r=a("QjZ5")("toStringTag");e.exports=function(e,t,a){e&&!n(e=a?e:e.prototype,r)&&o(e,r,{configurable:!0,value:t})}},MgeX:function(e,t,a){e.exports={default:a("hdvR"),__esModule:!0}},Mx9c:function(e,t,a){var o=a("MITN"),n=a("UusJ"),r=a("xVzf");e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],i={};i[e]=t(a),o(o.S+o.F*r(function(){a(1)}),"Object",i)}},NUpW:function(e,t,a){var o=a("Joyc");e.exports=function(e){return Object(o(e))}},O9zq:function(e,t,a){"use strict";var o=a("KFas"),n=a("7Tch"),r=a("M7ni"),i=a("MITN"),l=a("/Mll"),s=a("X/59").KEY,d=a("xVzf"),c=a("CTvS"),u=a("Macf"),h=a("GZtZ"),f=a("QjZ5"),g=a("eQoU"),p=a("6/+b"),m=a("QmGQ"),v=a("5sQS"),b=a("Dc6E"),y=a("uRtX"),w=a("DGQG"),S=a("xXu8"),T=a("+BLA"),_=a("OTtE"),I=a("aCDz"),k=a("YzBJ"),E=a("qRYU"),P=a("OtAM"),C=k.f,W=E.f,D=I.f,A=o.Symbol,L=o.JSON,x=L&&L.stringify,M=f("_hidden"),B=f("toPrimitive"),R={}.propertyIsEnumerable,N=c("symbol-registry"),O=c("symbols"),F=c("op-symbols"),U=Object.prototype,j="function"==typeof A,z=o.QObject,H=!z||!z.prototype||!z.prototype.findChild,K=r&&d(function(){return 7!=_(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a})?function(e,t,a){var o=C(U,t);o&&delete U[t],W(e,t,a),o&&e!==U&&W(U,t,o)}:W,V=function(e){var t=O[e]=_(A.prototype);return t._k=e,t},G=j&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},Q=function(e,t,a){return e===U&&Q(F,t,a),b(e),t=S(t,!0),b(a),n(O,t)?(a.enumerable?(n(e,M)&&e[M][t]&&(e[M][t]=!1),a=_(a,{enumerable:T(0,!1)})):(n(e,M)||W(e,M,T(1,{})),e[M][t]=!0),K(e,t,a)):W(e,t,a)},Y=function(e,t){b(e);for(var a,o=m(t=w(t)),n=0,r=o.length;r>n;)Q(e,a=o[n++],t[a]);return e},J=function(e,t){return void 0===t?_(e):Y(_(e),t)},q=function(e){var t=R.call(this,e=S(e,!0));return!(this===U&&n(O,e)&&!n(F,e))&&(!(t||!n(this,e)||!n(O,e)||n(this,M)&&this[M][e])||t)},Z=function(e,t){if(e=w(e),t=S(t,!0),e!==U||!n(O,t)||n(F,t)){var a=C(e,t);return!a||!n(O,t)||n(e,M)&&e[M][t]||(a.enumerable=!0),a}},X=function(e){for(var t,a=D(w(e)),o=[],r=0;a.length>r;)n(O,t=a[r++])||t==M||t==s||o.push(t);return o},$=function(e){for(var t,a=e===U,o=D(a?F:w(e)),r=[],i=0;o.length>i;)!n(O,t=o[i++])||a&&!n(U,t)||r.push(O[t]);return r};j||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(a){this===U&&t.call(F,a),n(this,M)&&n(this[M],e)&&(this[M][e]=!1),K(this,e,T(1,a))};return r&&H&&K(U,e,{configurable:!0,set:t}),V(e)},l(A.prototype,"toString",function(){return this._k}),k.f=Z,E.f=Q,a("809B").f=I.f=X,a("K0/C").f=q,a("/a/u").f=$,r&&!a("Ul0Y")&&l(U,"propertyIsEnumerable",q,!0),g.f=function(e){return V(f(e))}),i(i.G+i.W+i.F*!j,{Symbol:A});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)f(ee[te++]);for(var ae=P(f.store),oe=0;ae.length>oe;)p(ae[oe++]);i(i.S+i.F*!j,"Symbol",{for:function(e){return n(N,e+="")?N[e]:N[e]=A(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),i(i.S+i.F*!j,"Object",{create:J,defineProperty:Q,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:$}),L&&i(i.S+i.F*(!j||d(function(){var e=A();return"[null]"!=x([e])||"{}"!=x({a:e})||"{}"!=x(Object(e))})),"JSON",{stringify:function(e){for(var t,a,o=[e],n=1;arguments.length>n;)o.push(arguments[n++]);if(a=t=o[1],(y(t)||void 0!==e)&&!G(e))return v(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!G(t))return t}),o[1]=t,x.apply(L,o)}}),A.prototype[B]||a("OCs/")(A.prototype,B,A.prototype.valueOf),u(A,"Symbol"),u(Math,"Math",!0),u(o.JSON,"JSON",!0)},"OCs/":function(e,t,a){var o=a("qRYU"),n=a("+BLA");e.exports=a("M7ni")?function(e,t,a){return o.f(e,t,n(1,a))}:function(e,t,a){return e[t]=a,e}},OTtE:function(e,t,a){var o=a("Dc6E"),n=a("Qlg0"),r=a("gE2q"),i=a("nUWZ")("IE_PROTO"),l=function(){},s=function(){var e,t=a("ELtT")("iframe"),o=r.length;for(t.style.display="none",a("lIme").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;o--;)delete s.prototype[r[o]];return s()};e.exports=Object.create||function(e,t){var a;return null!==e?(l.prototype=o(e),a=new l,l.prototype=null,a[i]=e):a=s(),void 0===t?a:n(a,t)}},OtAM:function(e,t,a){var o=a("nwJ7"),n=a("gE2q");e.exports=Object.keys||function(e){return o(e,n)}},Ovlj:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("3cXf"),r=o(n),i=a("hRKE"),l=o(i),s=a("AA3o"),d=o(s),c=a("xSur"),u=o(c),h=a("HUPQ"),f=o(h),g=a("yE5a"),p=o(g),m=a("Sa83"),v=o(m),b=a("VSuD"),y=o(b),w=function(){function e(){(0,d.default)(this,e)}return(0,u.default)(e,[{key:"pubMsg",value:function(e,t,a,o,n,i,s,d){if(v.default.handler.getAppPermissions("pubMsg")&&f.default.appConnected){a=a||"__all";var c=!n;o&&"object"===(void 0===o?"undefined":(0,l.default)(o))&&(o=(0,r.default)(o)),p.default.getTkRoom().pubMsg(e,t,a,o,c,i,s,d)}}},{key:"delMsg",value:function(e,t,a,o){v.default.handler.getAppPermissions("delMsg")&&f.default.appConnected&&(a=a||"__all",o&&"object"===(void 0===o?"undefined":(0,l.default)(o))&&(o=(0,r.default)(o)),p.default.getTkRoom().delMsg(e,t,a,o))}},{key:"setProperty",value:function(e,t,a){v.default.handler.getAppPermissions("setProperty")&&f.default.appConnected&&(t=t||"__all",p.default.getTkRoom().changeUserProperty(e,t,a))}},{key:"setParticipantPropertyToAll",value:function(e,t){if(v.default.handler.getAppPermissions("setParticipantPropertyToAll")){var a=this,o=p.default.getTkRoom().getUsers()[e];if(!o)return void L.Logger.error("user is not exist  , user id is "+e+"!");(o.role===y.default.role.roleChairman||o.role===y.default.role.roleStudent||o.role===y.default.role.roleTeachingAssistant&&y.default.joinRoomInfo.assistantOpenMyseftAV||!t||void 0==t.publishstate)&&a.setProperty(e,"__all",t)}}},{key:"sendSignallingDataToParticipant",value:function(e,t,a,o,n,r,i,l,s){if(v.default.handler.getAppPermissions("sendSignallingDataToParticipant")){var d=this;e?d.delMsg(t,a,o,n):(l||"VideoWhiteboard"===t||"ClassBegin"===t||"SharpsChange"===t||"WBPageCount"===t||"ShowPage"===t||"whiteboardMarkTool"===t||(l="ClassBegin"),d.pubMsg(t,a,o,n,r,i,l,s))}}},{key:"sendTextMessage",value:function(e,t){v.default.handler.getAppPermissions("sendTextMessage")&&f.default.appConnected&&e&&(t=t||"__all",e&&"object"===(void 0===e?"undefined":(0,l.default)(e))&&(e=(0,r.default)(e)),p.default.getTkRoom().sendMessage(e,t))}}]),e}();t.default=w},PRvV:function(e,t){},PqAP:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=a("jyQm"),r=o(n),i=a("i+ms"),l=o(i),s=a("Sa83"),d=o(s),c=a("rkp3"),u=o(c);d.default.handler.loadSystemRequiredInfo(),l.default.render(r.default.createElement(u.default,null),document.getElementById("tk_app"))},"Q+Ik":function(e,t,a){e.exports={default:a("DfvK"),__esModule:!0}},QjZ5:function(e,t,a){var o=a("CTvS")("wks"),n=a("GZtZ"),r=a("KFas").Symbol,i="function"==typeof r;(e.exports=function(e){return o[e]||(o[e]=i&&r[e]||(i?r:n)("Symbol."+e))}).store=o},Qlg0:function(e,t,a){var o=a("qRYU"),n=a("Dc6E"),r=a("OtAM");e.exports=a("M7ni")?Object.defineProperties:function(e,t){n(e);for(var a,i=r(t),l=i.length,s=0;l>s;)o.f(e,a=i[s++],t[a]);return e}},QmGQ:function(e,t,a){var o=a("OtAM"),n=a("/a/u"),r=a("K0/C");e.exports=function(e){var t=o(e),a=n.f;if(a)for(var i,l=a(e),s=r.f,d=0;l.length>d;)s.call(e,i=l[d++])&&t.push(i);return t}},"RNB/":function(e,t,a){var o=a("tXsA"),n=a("Joyc");e.exports=function(e){return function(t,a){var r,i,l=String(n(t)),s=o(a),d=l.length;return s<0||s>=d?e?"":void 0:(r=l.charCodeAt(s),r<55296||r>56319||s+1===d||(i=l.charCodeAt(s+1))<56320||i>57343?e?l.charAt(s):r:e?l.slice(s,s+2):i-56320+(r-55296<<10)+65536)}}},S2tW:function(e,t,a){a("eWTT");var o=a("UusJ").Object;e.exports=function(e,t){return o.defineProperties(e,t)}},Sa83:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("hRKE"),r=o(n),i=a("T+56"),l=o(i),s=a("GrKX"),d=o(s),c=a("VSuD"),u=o(c),h=a("HUPQ"),f=o(h),g=a("DrPG"),p=o(g),m=a("0jvK"),v=o(m),b=a("ZZXC"),y=o(b),w=a("yE5a"),S=o(w),T=a("Wi6Q"),_=o(T),I=TK.EventDispatcher({});l.default.CoreController=I,I.handler={},I.handler.loadSystemRequiredInfo=function(){if(document.oncontextmenu=null,document.oncontextmenu=function(){return!1},window.onbeforeunload=null,window.onbeforeunload=function(){},TK.tkLogPrintConfig)if(u.default.DEV){var e={debug:!0},t={development:!0,logLevel:u.default.LOGLEVEL.DEBUG},a={webrtcLogDebug:!0};TK.tkLogPrintConfig(e,t,a)}else{var o={debug:!1},n={development:!1,logLevel:u.default.LOGLEVEL.INFO},r={webrtcLogDebug:!1};TK.tkLogPrintConfig(o,n,r)}y.default.getAppLanguageInfo(function(e){f.default.language=e}),S.default.setTkRoom(TK.Room()),S.default.getTkRoom().changeExtendSendInterfaceName("_videoWhiteboardPage"),d.default.registerEventToRoom()},I.handler.setAppPermissions=function(e,t){v.default.setAppPermissions(e,t)},I.handler.getAppPermissions=function(e){return v.default.getAppPermissions(e)},I.handler.initAppPermissions=function(e){v.default.initAppPermissions(e)},I.handler.addEventListenerOnCoreController=function(){var e=function(){document.getElementById("tk_app")?(f.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,f.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(f.default.windowInnerWidth=window.innerWidth,f.default.windowInnerHeight=window.innerHeight);var e=f.default.windowInnerWidth/u.default.STANDARDSIZE,t=document.getElementById("all_root")||document.getElementsByTagName("html");if(t){var a=p.default.isArray(t)?t[0]:t;a&&a.style&&(a.style.fontSize=e+"px")}l.default.Window.dispatchEvent({type:u.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:e}})};p.default.tool.removeEvent(window,"resize",e),p.default.tool.addEvent(window,"resize",e,!1),e();var t=function(e){l.default.Window.dispatchEvent({type:u.default.EVENTTYPE.WindowEvent.onMessage,message:{event:e}})};p.default.tool.removeEvent(window,"message",t),p.default.tool.addEvent(window,"message",t,!1);var a=function(e){l.default.Document.dispatchEvent({type:u.default.EVENTTYPE.DocumentEvent.onFullscreenchange,message:{event:e}})};p.default.tool.removeFullscreenchange(a),p.default.tool.addFullscreenchange(a),"mobile"===TK.SDKTYPE&&I.handler.addEventfRromMobileUICoreEventManager()},I.handler.addEventfRromMobileUICoreEventManager=function(){"mobile"===TK.SDKTYPE&&(TK.mobileUICoreEventManager.addEventListener("mobileSdk_setInitPageParameterFormPhone",function(e){var t=e.message;if(void 0!==t.deviceType&&(f.default.mobileDeviceType=0===TK.global.initPageParameterFormPhone.deviceType?"phone":"pad",l.default.CoreController.dispatchEvent({type:"updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone"})),void 0!==t.myself&&"object"===(0,r.default)(t.myself)){f.default.appConnected=!0,f.default.classBegin=!0,Object.customAssign(S.default.getTkRoom().getMySelf(),t.myself);var a={nickname:S.default.getTkRoom().getMySelf().nickname,thirdid:S.default.getTkRoom().getMySelf().id,roomrole:Number(S.default.getTkRoom().getMySelf().role)};u.default.bindRoomInfoToTkConstant(a),u.default.bindParticipantHasRoleToTkConstant();var o=_.default.getRoleHasDefalutAppPermissions();v.default.initAppPermissions(o)}f.default.playback=TK.global.initPageParameterFormPhone.playback,void 0!==t.serviceUrl&&u.default.bindServiceinfoToTkConstant(void 0,void 0,void 0,!0)}),TK.mobileUICoreEventManager.addEventListener("mobileSdk_changeInitPageParameterFormPhone",function(e){var t=e.message;void 0!==t.deviceType&&(f.default.mobileDeviceType=0===TK.global.initPageParameterFormPhone.deviceType?"phone":"pad",l.default.CoreController.dispatchEvent({type:"updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone"})),void 0!==t.serviceUrl&&u.default.bindServiceinfoToTkConstant(void 0,void 0,void 0,!1)}))},I.handler.addEventListenerOnCoreController(),t.default=I},"Sr0+":function(e,t,a){var o=a("MITN"),n=a("2P8z")(!0);o(o.S,"Object",{entries:function(e){return n(e)}})},"T+56":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};o.Document=TK.EventDispatcher({}),o.Window=TK.EventDispatcher({}),o.Element=TK.EventDispatcher({}),o.Room=TK.EventDispatcher({}),o.Stream=TK.EventDispatcher({}),o.Role=TK.EventDispatcher({}),t.default=o},USsz:function(e,t,a){"use strict";var o=a("W273"),n=a("qWNy"),r=a("9mma"),i=a("DGQG");e.exports=a("4ztK")(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,n(1)):"keys"==t?n(0,a):"values"==t?n(0,e[a]):n(0,[a,e[a]])},"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},UWEk:function(e,t){},Ul0Y:function(e,t){e.exports=!0},UusJ:function(e,t){var a=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=a)},UzKs:function(e,t,a){"use strict";t.__esModule=!0;var o=a("hRKE"),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}},VSuD:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("8zml"),r=o(n),i=a("DrPG"),l=o(i),s=a("T+56"),d=o(s),c=a("HUPQ"),u=(o(c),{}),h="v2.1.0",f="2017120622",g=!1;try{h="2.1.6",f=2018011516,g=!1}catch(a){L.Logger.warning("There is no configuration version number and version time[__VERSIONS__ , __VERSIONSTIME__]!"),L.Logger.warning("There is no configuration dev mark[__DEV__]!")}u.VERSIONS=h,u.VERSIONSTIME=f,u.newpptVersions=2017091401,u.remoteNewpptUpdateTime=201712062201,u.debugFromAddress=!!l.default.getUrlParams("debug")&&""!=l.default.getUrlParams("debug"),u.DEV=g||u.debugFromAddress,u.role={},(0,r.default)(u.role,{roleChairman:{value:0,writable:!1},roleTeachingAssistant:{value:1,writable:!1},roleStudent:{value:2,writable:!1},roleAudit:{value:3,writable:!1},rolePatrol:{value:4,writable:!1},rolePlayback:{value:-1,writable:!1}});var p={};(0,r.default)(p,{roomPubmsg:{value:"room-pubmsg",writable:!1,enumerable:!0},roomDelmsg:{value:"room-delmsg",writable:!1,enumerable:!0},roomDisconnected:{value:"room-disconnected",writable:!1,enumerable:!0},roomPlaybackClearAll:{value:"room-playback-clear_all",writable:!1,enumerable:!0},roomPlaybackClearAllFromPlaybackController:{value:"room-playback-clear_all-from-playback-controller",writable:!1,enumerable:!0},roomMsglist:{value:"room-msglist",writable:!1,enumerable:!0},roomTransmitWindowSize:{value:"transmitWindowSize",writable:!1,enumerable:!0}});var m={};(0,r.default)(m,{onResize:{value:"onResize",writable:!1}}),(0,r.default)(m,{onMessage:{value:"onMessage",writable:!1}});var v={};(0,r.default)(v,{onKeydown:{value:"onKeydown",writable:!1},onFullscreenchange:{value:"onFullscreenchange",writable:!1}}),u.EVENTTYPE={},(0,r.default)(u.EVENTTYPE,{RoomEvent:{value:p,writable:!1},WindowEvent:{value:m,writable:!1},DocumentEvent:{value:v,writable:!1}}),u.ROOMTYPE={},(0,r.default)(u.ROOMTYPE,{oneToOne:{value:0,writable:!1}}),u.PUBLISHSTATE={},(0,r.default)(u.PUBLISHSTATE,{PUBLISH_STATE_NONE:{value:TK.PUBLISH_STATE_NONE,writable:!1},PUBLISH_STATE_AUDIOONLY:{value:TK.PUBLISH_STATE_AUDIOONLY,writable:!1},PUBLISH_STATE_VIDEOONLY:{value:TK.PUBLISH_STATE_VIDEOONLY,writable:!1},PUBLISH_STATE_BOTH:{value:TK.PUBLISH_STATE_BOTH,writable:!1},PUBLISH_STATE_MUTEALL:{value:TK.PUBLISH_STATE_MUTEALL,writable:!1}}),u.STANDARDSIZE=15.8,u.companyidToCompanyName={10035:{value:"icoachu",writable:!1,enumerable:!0},10036:{value:"stupidBird",writable:!1,enumerable:!0},10059:{value:"17zuoye",writable:!1,enumerable:!0}},u.LOGLEVEL={},(0,r.default)(u.LOGLEVEL,{DEBUG:{value:0,writable:!1},TRACE:{value:1,writable:!1},INFO:{value:2,writable:!1},WARNING:{value:3,writable:!1},ERROR:{value:4,writable:!1},NONE:{value:5,writable:!1}}),u.SERVICEINFO={},u.bindServiceinfoToTkConstant=function(e,t,a){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=TK.global.initPageParameterFormPhone.serviceUrl.address.split("://");e=e||n[0],t=t||n[1],a=a||TK.global.initPageParameterFormPhone.serviceUrl.port;var r={protocol:e,hostname:t,port:a,sdkPort:443,protocolAndHostname:e+"://"+t,address:e+"://"+t+":"+a};o&&(r.joinUrl=l.default.encrypt(window.location.href)),Object.customAssign(u.SERVICEINFO,r),o&&console.info("encrypt_tk_info:\n",u.SERVICEINFO.joinUrl),d.default&&d.default.CoreController&&d.default.CoreController.dispatchEvent&&d.default.CoreController.dispatchEvent({type:"bindServiceinfoToTkConstant",message:{SERVICEINFO:u.SERVICEINFO}})},u.joinRoomInfo={},u.bindRoomInfoToTkConstant=function(e){if(!e)return void L.Logger.error("joinRoomInfo is not exist!");L.Logger.debug("joinRoomInfo:",e),u.joinRoomInfo=e,d.default.CoreController.dispatchEvent({type:"bindRoomInfoToTkConstant",message:{joinRoomInfo:u.joinRoomInfo}})},u.hasRole={},u.bindParticipantHasRoleToTkConstant=function(){if(!u.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,r.default)(u.hasRole,{roleChairman:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.roleChairman,writable:!1},roleTeachingAssistant:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.roleTeachingAssistant,writable:!1},roleStudent:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.roleStudent,writable:!1},roleAudit:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.roleAudit,writable:!1},rolePatrol:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.rolePatrol,writable:!1},rolePlayback:{value:u.joinRoomInfo&&u.joinRoomInfo.roomrole===u.role.rolePlayback,writable:!1}}),d.default.CoreController.dispatchEvent({type:"bindParticipantHasRoleToTkConstant",message:{hasRole:u.hasRole}})},u.hasRoomtype={},u.bindParticipantHasRoomtypeToTkConstant=function(){if(!u.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,r.default)(u.hasRoomtype,{oneToOne:{value:u.joinRoomInfo&&u.joinRoomInfo.roomtype===u.ROOMTYPE.oneToOne,writable:!1}}),d.default.CoreController.dispatchEvent({type:"bindParticipantHasRoomtypeToTkConstant",message:{hasRoomtype:u.hasRoomtype}})},window.TkConstant=u,t.default=u},W0SX:function(e,t,a){var o=a("6EVm");e.exports=function(e,t,a){if(o(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,o){return e.call(t,a,o)};case 3:return function(a,o,n){return e.call(t,a,o,n)}}return function(){return e.apply(t,arguments)}}},W273:function(e,t){e.exports=function(){}},Wi6Q:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("ZLEe"),r=o(n),i=a("HzJ8"),l=o(i),s=a("AA3o"),d=o(s),c=a("xSur"),u=o(c),h=a("VSuD"),f=o(h),g=a("yE5a"),p=(o(g),a("0jvK")),m=o(p),v=a("T+56"),b=(o(v),a("HUPQ")),y=o(b),w=a("Sa83"),S=(o(w),function(){function e(t){(0,d.default)(this,e),this.role=t}return(0,u.default)(e,[{key:"getRoleHasDefalutAppPermissions",value:function(e){var t=e||m.default.productionDefaultAppAppPermissions();if(f.default.joinRoomInfo&&void 0!=f.default.joinRoomInfo.roomrole)switch(f.default.joinRoomInfo.roomrole){case f.default.role.roleChairman:if(y.default.classBegin){var a=!0,o=!1,n=void 0;try{for(var i,s=(0,l.default)((0,r.default)(t));!(a=(i=s.next()).done);a=!0)t[i.value]=!0}catch(e){o=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw n}}Object.customAssign(t,{raisehand:!1,dialCircleClick:!1})}else Object.customAssign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0,endClassbeginRevertToStartupLayout:!0});break;case f.default.role.roleTeachingAssistant:if(y.default.classBegin){var d=!0,c=!1,u=void 0;try{for(var h,g=(0,l.default)((0,r.default)(t));!(d=(h=g.next()).done);d=!0)t[h.value]=!0}catch(e){c=!0,u=e}finally{try{!d&&g.return&&g.return()}finally{if(c)throw u}}Object.customAssign(t,{laser:!1,endClassbeginRevertToStartupLayout:!1})}else Object.customAssign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0});break;case f.default.role.rolePatrol:y.default.classBegin,Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1});break;case f.default.role.roleStudent:y.default.classBegin?Object.customAssign(t,{whiteboardPagingPage:f.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:f.default.joinRoomInfo.isSupportPageTrun,jumpPage:f.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromSharpsChange:!0}):Object.customAssign(t,{whiteboardPagingPage:f.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:f.default.joinRoomInfo.isSupportPageTrun,jumpPage:f.default.joinRoomInfo.isSupportPageTrun,h5DocumentActionClick:f.default.joinRoomInfo.isSupportPageTrun,dynamicPptActionClick:f.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0});break;case f.default.role.rolePlayback:y.default.classBegin,Object.customAssign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1});break;case f.default.role.roleAudit:var p=!0,v=!1,b=void 0;try{for(var w,S=(0,l.default)((0,r.default)(t));!(p=(w=S.next()).done);p=!0)t[w.value]=!1}catch(e){v=!0,b=e}finally{try{!p&&S.return&&S.return()}finally{if(v)throw b}}Object.customAssign(t,{pubMsg:!0,sendSignallingDataToParticipant:!0})}return t}},{key:"addEventListenerToRoomHandler",value:function(){}}]),e}()),T=new S;T.addEventListenerToRoomHandler(),t.default=T},"X/59":function(e,t,a){var o=a("GZtZ")("meta"),n=a("uRtX"),r=a("7Tch"),i=a("qRYU").f,l=0,s=Object.isExtensible||function(){return!0},d=!a("xVzf")(function(){return s(Object.preventExtensions({}))}),c=function(e){i(e,o,{value:{i:"O"+ ++l,w:{}}})},u=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,o)){if(!s(e))return"F";if(!t)return"E";c(e)}return e[o].i},h=function(e,t){if(!r(e,o)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[o].w},f=function(e){return d&&g.NEED&&s(e)&&!r(e,o)&&c(e),e},g=e.exports={KEY:o,NEED:!1,fastKey:u,getWeak:h,onFreeze:f}},X6b2:function(e,t,a){var o=a("iKyp"),n=a("QjZ5")("iterator"),r=a("9mma");e.exports=a("UusJ").getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||r[o(e)]}},Y7Ml:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=a("qCHB"),r=o(n),i=a("IYkF"),l=o(i),s=a("hRKE"),d=o(s);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,d.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},YRCL:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("Yarq"),r=o(n),i=a("AA3o"),l=o(i),s=a("xSur"),d=o(s),c=a("UzKs"),u=o(c),h=a("Y7Ml"),f=o(h),g=a("Ovlj"),p=o(g),m=a("yE5a"),v=o(m),b=a("DrPG"),y=(o(b),a("VSuD")),w=(o(y),a("Sa83")),S=o(w),T=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"sendSignallingFromUpdateTime",value:function(e){if(S.default.handler.getAppPermissions("sendSignallingFromUpdateTime")){var t=this,a=e||"__all",o={};t.sendSignallingDataToParticipant(!1,"UpdateTime","UpdateTime",a,o,!0)}}},{key:"sendSignallingFromSharpsChange",value:function(e,t,a,o,n,r,i,l,s){if(S.default.handler.getAppPermissions("sendSignallingFromSharpsChange")){var d=this;e&&(r=!0),d.sendSignallingDataToParticipant(e,t,a,o,n,r,i,l,s)}}},{key:"sendSignallingFromWBPageCount",value:function(e){S.default.handler.getAppPermissions("sendSignallingFromWBPageCount")&&this.sendSignallingDataToParticipant(!1,"WBPageCount","WBPageCount","__allExceptSender",e,void 0)}},{key:"sendSignallingFromShowPage",value:function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"__all";if(S.default.handler.getAppPermissions("sendSignallingFromShowPage")){if(!a)return void L.Logger.error("sendSignallingFromShowPage data is not exist!");a&&"string"==typeof a&&(a=JSON.parse(a)),a.isDynamicPPT&&!S.default.handler.getAppPermissions("sendSignallingFromDynamicPptShowPage")||a.isH5Document&&!S.default.handler.getAppPermissions("sendSignallingFromH5ShowPage")||a.isGeneralFile&&!S.default.handler.getAppPermissions("sendSignallingFromGeneralShowPage")||this.sendSignallingDataToParticipant(e,"ShowPage",t,o,a)}}},{key:"sendSignallingFromDynamicPptTriggerActionClick",value:function(e){S.default.handler.getAppPermissions("sendSignallingFromDynamicPptTriggerActionClick")&&this.sendSignallingDataToParticipant(!1,"NewPptTriggerActionClick","NewPptTriggerActionClick","__allExceptSender",e,!1)}},{key:"sendSignallingFromH5DocumentAction",value:function(e){S.default.handler.getAppPermissions("sendSignallingFromH5DocumentAction")&&this.sendSignallingDataToParticipant(!1,"H5DocumentAction","H5DocumentAction","__allExceptSender",e,!1)}},{key:"sendSignallingFromVideoDraghandle",value:function(e,t){if(S.default.handler.getAppPermissions("sendSignallingFromVideoDraghandle")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"videoDraghandle","videoDraghandle",t,e,!1)}}},{key:"sendMarkToolMouseIsSelect",value:function(e,t,a){if(S.default.handler.getAppPermissions("sendWhiteboardMarkTool")){var o=this,n={selectMouse:e};t&&(n.selectElementLiId=t),a&&(n.selectElementId=a),o.sendSignallingDataToParticipant(!1,"whiteboardMarkTool","whiteboardMarkTool","__allExceptSender",n)}}},{key:"sendSignallingFromBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];S.default.handler.getAppPermissions("sendSignallingFromBlackBoard")&&this.sendSignallingDataToParticipant(t,"BlackBoard","BlackBoard","__all",e)}},{key:"sendSignallingTimerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!S.default.handler.getAppPermissions("sendSignallingTimerToStudent"))return!1;this.sendSignallingDataToParticipant(t,"timer","timerMesg","__all",e)}},{key:"sendSignallingFromBlackBoardDrag",value:function(e,t){if(S.default.handler.getAppPermissions("sendSignallingFromBlackBoardDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"BlackBoardDrag","BlackBoardDrag",t,e,!1,void 0,"BlackBoard")}}},{key:"sendSignallingDialToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];S.default.handler.getAppPermissions("sendSignallingDialToStudent")&&this.sendSignallingDataToParticipant(t,"dial","dialMesg","__all",e)}},{key:"sendSignallingAnswerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!S.default.handler.getAppPermissions("sendSignallingAnswerToStudent"))return!1;this.sendSignallingDataToParticipant(t,"answer","answerMesg","__all",e)}},{key:"sendSignallingDataStudentToTeacherAnswer",value:function(e,t){if(!S.default.handler.getAppPermissions("sendSignallingDataStudentToTeacherAnswer"))return!1;var a=this,o="submitAnswers_"+v.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,"submitAnswers",o,"__all",t,void 0,void 0,"answerMesg")}},{key:"sendSignallingQiangDaQi",value:function(e,t){if(!S.default.handler.getAppPermissions("sendSignallingQiangDaQi"))return!1;this.sendSignallingDataToParticipant(e,"qiangDaQi","qiangDaQiMesg","__all",t)}},{key:"sendSignallingQiangDaZhe",value:function(e,t){if(!S.default.handler.getAppPermissions("sendSignallingQiangDaZhe"))return!1;var a=this,o="QiangDaZhe_"+v.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,"QiangDaZhe",o,"__all",t,void 0,void 0,"qiangDaQiMesg")}},{key:"sendSignallingFromDialDrag",value:function(e,t){if(S.default.handler.getAppPermissions("sendSignallingFromDialDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"DialDrag","DialDrag",t,e,!1,void 0,"dialMesg")}}},{key:"sendSignallingFromResponderDrag",value:function(e,t){if(S.default.handler.getAppPermissions("isSendSignallingFromResponderDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"ResponderDrag","ResponderDrag",t,e,!1,void 0,"qiangDaQiMesg")}}},{key:"sendSignallingFromTimerDrag",value:function(e,t){if(S.default.handler.getAppPermissions("isSendSignallingFromTimerDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"TimerDrag","TimerDrag",t,e,!1,void 0,"timerMesg")}}},{key:"sendSignallingFromAnswerDrag",value:function(e,t){if(S.default.handler.getAppPermissions("isSendSignallingFromAnswerDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"AnswerDrag","AnswerDrag",t,e,!1,void 0,"answerMesg")}}}]),t}(p.default),_=new T;t.default=_},Yarq:function(e,t,a){e.exports={default:a("yjjd"),__esModule:!0}},YwFF:function(e,t,a){a("1GTc"),e.exports=a("UusJ").Object.assign},Yyxk:function(e,t,a){e.exports={default:a("bcUa"),__esModule:!0}},YzBJ:function(e,t,a){var o=a("K0/C"),n=a("+BLA"),r=a("DGQG"),i=a("xXu8"),l=a("7Tch"),s=a("DnLf"),d=Object.getOwnPropertyDescriptor;t.f=a("M7ni")?d:function(e,t){if(e=r(e),t=i(t,!0),s)try{return d(e,t)}catch(e){}if(l(e,t))return n(!o.f.call(e,t),e[t])}},ZLEe:function(e,t,a){e.exports={default:a("rhsp"),__esModule:!0}},ZZXC:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("DrPG"),r=o(n),i=a("HUPQ"),l=o(i),s=a("VSuD"),d=(o(s),a("yE5a")),c=(o(d),a("T+56")),u=(o(c),a("YRCL")),h=(o(u),{getAppLanguageInfo:function(e,t){var o=t||l.default.languageName,n={};l.default.language=l.default.language||{},n.name=o,n.languageData=a("KyAL")("./i18_"+o+".js").default,e&&"function"==typeof e&&e(n),document.body.className=document.body.className.replace(/(chinese|english|complex)/g,"")+" "+n.name,document.body.setAttribute("data-language",n.name)},TkUtils:r.default});t.default=h},aA9S:function(e,t,a){e.exports={default:a("YwFF"),__esModule:!0}},aCDz:function(e,t,a){var o=a("DGQG"),n=a("809B").f,r={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return n(e)}catch(e){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==r.call(e)?l(e):n(o(e))}},aSM5:function(e,t,a){a("dmd9"),a("wCtA"),e.exports=a("rLQK")},adMp:function(e,t,a){a("pBXl");var o=a("UusJ").Object;e.exports=function(e,t,a){return o.defineProperty(e,t,a)}},bJSL:function(e,t,a){var o=a("NUpW"),n=a("hghX");a("Mx9c")("getPrototypeOf",function(){return function(e){return n(o(e))}})},bcUa:function(e,t,a){a("O9zq"),a("UWEk"),a("KQ1+"),a("vuzV"),e.exports=a("UusJ").Symbol},buLY:function(e,t,a){"use strict";var o={error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)}};window.Log=o},"cz9/":function(e,t,a){a("wCtA"),a("dmd9"),e.exports=a("eQoU").f("iterator")},dmd9:function(e,t,a){a("USsz");for(var o=a("KFas"),n=a("OCs/"),r=a("9mma"),i=a("QjZ5")("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<l.length;s++){var d=l[s],c=o[d],u=c&&c.prototype;u&&!u[i]&&n(u,i,d),r[d]=r.Array}},eOcM:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("hRKE"),r=o(n),i=a("4YfN"),l=o(i),s=a("Yarq"),d=o(s),c=a("AA3o"),u=o(c),h=a("xSur"),f=o(h),g=a("UzKs"),p=o(g),m=a("Y7Ml"),v=o(m),b=a("jyQm"),y=o(b),w=a("HUPQ"),S=o(w),T=a("VSuD"),_=o(T),I=a("6ifl"),k=o(I),E=a("T+56"),P=o(E),C=a("Sa83"),W=o(C),D=function(e){function t(e,a){(0,u.default)(this,t);var o=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e,a));return o.state={videoDrawBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageScalc:16/9,isShow:!1,backgroundColor:"transparent",instanceId:o.props.videoDrawingBoardInstanceId||"videoDrawBoard",saveImage:!1,nickname:o.props.videoDrawingBoardInstanceId||"videoDrawBoard",deawPermission:!1,associatedMsgID:"VideoWhiteboard"},useToolInfo:{useToolKey:"tool_pencil",useToolColor:"#FF0000",blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},selectBlackboardToolSizeId:"blackboard_size_small"},BlackboardSmartIsShow:!1},o.listernerBackupid=(new Date).getTime()+"_"+Math.random(),o}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;P.default.CoreController.addEventListener(_.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),P.default.CoreController.addEventListener(_.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),P.default.CoreController.addEventListener(_.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),P.default.CoreController.addEventListener(_.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),P.default.CoreController.addEventListener("receive-msglist-VideoWhiteboard",e.receiveMsglistVideoWhiteboard.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;P.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.videoDrawBoardInfo.isShow!==this.state.videoDrawBoardInfo.isShow&&this.setState({BlackboardSmartIsShow:this.state.videoDrawBoardInfo.isShow})}},{key:"handlerRoomPlaybackClearAll",value:function(){var e=(0,l.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e})}},{key:"handlerRoomDisconnected",value:function(){var e=(0,l.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"VideoWhiteboard":var a=(0,l.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=W.default.handler.getAppPermissions("isShowVideoDrawTool"),t.data&&"object"===(0,r.default)(t.data)&&t.data.videoRatio&&(a.watermarkImageScalc=t.data.videoRatio),this.setState({videoDrawBoardInfo:a})}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"VideoWhiteboard":case"ClassBegin":var t=(0,l.default)({},this.state.videoDrawBoardInfo);t.isShow=!1,t.deawPermission=!1,this.setState({videoDrawBoardInfo:t})}}},{key:"receiveMsglistVideoWhiteboard",value:function(e){var t=e.message.VideoWhiteboardArray[0].data,a=(0,l.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=W.default.handler.getAppPermissions("isShowVideoDrawTool"),t&&"object"===(void 0===t?"undefined":(0,r.default)(t))&&t.videoRatio&&(a.watermarkImageScalc=t.videoRatio),this.setState({videoDrawBoardInfo:a})}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"changeStrokeColorClick",value:function(e){this.state.useToolInfo.useToolColor=e,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[],a=[];return a="mobile"!==TK.SDKTYPE?["#FF0000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF","#FE9401","#FF2C55","#007AFF","#7457F1","#626262","#000000"]:["#FF0000","#FFFF00","#007AFF","#000000"],a.forEach(function(a,o){var n="mobile"!==TK.SDKTYPE?y.default.createElement("li",{className:"color-option "+(e.state.useToolInfo.useToolColor===a?" active":""),key:o,onClick:e.changeStrokeColorClick.bind(e,a),style:{backgroundColor:a},id:"video_drawBoard_color_"+e._colorFilter(a)}):y.default.createElement("li",{key:o,className:"blackboard-tool-option"},y.default.createElement("button",{id:"video_drawBoard_color_"+e._colorFilter(a),className:"color-option "+(e.state.useToolInfo.useToolColor===a?" active":""),style:{backgroundColor:a},onTouchStart:e.changeStrokeColorClick.bind(e,a)}));t.push(n)}),{toolColorsArray:t}}},{key:"handleToolClick",value:function(e){"tool_pencil"!==e&&"tool_text"!==e&&"tool_eraser"!==e||(this.state.useToolInfo.useToolKey=e,this.setState({useToolInfo:this.state.useToolInfo}))}},{key:"_changeStrokeSizeClick",value:function(e,t){this.state.useToolInfo.selectBlackboardToolSizeId=e,this.state.useToolInfo.blackboardToolsInfo=t,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"render",value:function(){var e=this,t=e.state,a=t.videoDrawBoardInfo,o=t.useToolInfo,n=this.props.containerWidthAndHeight,r=o.useToolKey,i=e._loadToolColorsElementArray(),l=i.toolColorsArray,s="tool_eraser"===r?o.blackboardToolsInfo.eraser:o.blackboardToolsInfo.pencil;return y.default.createElement("div",{className:"video-drawing-board-box",style:{display:a.isShow?"block":"none"}},y.default.createElement("div",{className:"video-drawing-board",style:{display:a.isShow?"flex":"none"}},this.state.BlackboardSmartIsShow?y.default.createElement(k.default,{isBaseboard:!1,containerWidthAndHeight:n,instanceId:a.instanceId,nickname:a.nickname,show:this.state.BlackboardSmartIsShow,backgroundColor:a.backgroundColor,useToolKey:r,fontSize:o.blackboardToolsInfo.text,useToolColor:o.useToolColor,pencilWidth:s,showRemoteRemindContent:!1,deawPermission:a.deawPermission,watermarkImageScalc:a.watermarkImageScalc,associatedMsgID:a.associatedMsgID}):void 0),y.default.createElement("ul",{className:"blackboard-tool clear-float",style:{display:a.deawPermission?"":"none"}},y.default.createElement("li",{className:"blackboard-tool-option"+("tool_pencil"===r?" active":"")},y.default.createElement("button",{id:"video_blackboard_tool_pencil",className:"tool-btn pencil-icon "+("tool_pencil"===r?" active":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:e.handleToolClick.bind(e,"tool_pencil")})),y.default.createElement("li",{className:"blackboard-tool-option"+("tool_text"===r?" active":""),style:{display:"none"}}," ",y.default.createElement("button",{id:"video_blackboard_tool_text",className:"tool-btn text-icon"+("tool_text"===r?" active":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:e.handleToolClick.bind(e,"tool_text")})),y.default.createElement("li",{className:"blackboard-tool-option"+("tool_eraser"===r?" active":"")},y.default.createElement("button",{id:"video_blackboard_tool_eraser",className:"tool-btn eraser-icon"+("tool_eraser"===r?" active":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:e.handleToolClick.bind(e,"tool_eraser")})),"mobile"!==TK.SDKTYPE?y.default.createElement("li",{className:"blackboard-tool-option colors  add-position-relative"},y.default.createElement("button",{id:"video_blackboard_tool_color",className:"tool-btn colors-icon",title:S.default.language.languageData.header.tool.blackBoard.boardTool.color},y.default.createElement("span",{className:"current-color",style:{backgroundColor:o.useToolColor}})),y.default.createElement("div",{className:"blackboard-color-size-box"},y.default.createElement("ul",{className:"tool-size-container",id:"video_blackboard_tool_size"},y.default.createElement("li",{id:"video_blackboard_size_small",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_small",{pencil:5,text:30,eraser:30}),className:"size-small "+("blackboard_size_small"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},y.default.createElement("span",null)),y.default.createElement("li",{id:"video_blackboard_size_middle",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_middle",{pencil:15,text:36,eraser:90}),className:"size-middle "+("blackboard_size_middle"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},y.default.createElement("span",null)),y.default.createElement("li",{id:"video_blackboard_size_big",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_big",{pencil:30,text:72,eraser:150}),className:"size-big "+("blackboard_size_big"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":"")},y.default.createElement("span",null))),y.default.createElement("ol",{className:"colors-container"},l))):l))}}]),t}(y.default.Component);t.default=D},eQoU:function(e,t,a){t.f=a("QjZ5")},eWTT:function(e,t,a){var o=a("MITN");o(o.S+o.F*!a("M7ni"),"Object",{defineProperties:a("Qlg0")})},esCQ:function(e,t,a){var o=a("BLKo");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},gDty:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=a("hRKE"),r=o(n),i=a("aA9S"),l=o(i);Object.customAssign=function(e){try{return l.default.apply(l.default,arguments)}catch(i){for(var t=L.Utils.toJsonParse(L.Utils.toJsonStringify(e)),a=1;a<arguments.length;a++){var o=arguments[a];if(o&&"object"===(void 0===o?"undefined":(0,r.default)(o)))for(var n in o)t[n]=o[n]}return e=t||{}}}},gE2q:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},hRKE:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=a("2LoE"),r=o(n),i=a("Yyxk"),l=o(i),s="function"==typeof l.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":typeof e};t.default="function"==typeof l.default&&"symbol"===s(r.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":void 0===e?"undefined":s(e)}},hdvR:function(e,t,a){a("j0bN"),e.exports=a("UusJ").Object.values},hghX:function(e,t,a){var o=a("7Tch"),n=a("NUpW"),r=a("nUWZ")("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),o(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},iKyp:function(e,t,a){var o=a("BLKo"),n=a("QjZ5")("toStringTag"),r="Arguments"==o(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,a,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=i(t=Object(e),n))?a:r?o(t):"Object"==(l=o(t))&&"function"==typeof t.callee?"Arguments":l}},j0bN:function(e,t,a){var o=a("MITN"),n=a("2P8z")(!1);o(o.S,"Object",{values:function(e){return n(e)}})},"kU6/":function(e,t,a){var o=a("MITN");o(o.S,"Object",{setPrototypeOf:a("BAOS").set})},lIme:function(e,t,a){var o=a("KFas").document;e.exports=o&&o.documentElement},liLe:function(e,t,a){e.exports={default:a("adMp"),__esModule:!0}},lw6p:function(e,t,a){var o=a("tXsA"),n=Math.max,r=Math.min;e.exports=function(e,t){return e=o(e),e<0?n(e+t,0):r(e,t)}},nBsG:function(e,t,a){"use strict";var o=a("OtAM"),n=a("/a/u"),r=a("K0/C"),i=a("NUpW"),l=a("esCQ"),s=Object.assign;e.exports=!s||a("xVzf")(function(){var e={},t={},a=Symbol(),o="abcdefghijklmnopqrst";return e[a]=7,o.split("").forEach(function(e){t[e]=e}),7!=s({},e)[a]||Object.keys(s({},t)).join("")!=o})?function(e,t){for(var a=i(e),s=arguments.length,d=1,c=n.f,u=r.f;s>d;)for(var h,f=l(arguments[d++]),g=c?o(f).concat(c(f)):o(f),p=g.length,m=0;p>m;)u.call(f,h=g[m++])&&(a[h]=f[h]);return a}:s},nUWZ:function(e,t,a){var o=a("CTvS")("keys"),n=a("GZtZ");e.exports=function(e){return o[e]||(o[e]=n(e))}},nrcm:function(e,t,a){a("uy8w");var o=a("UusJ").Object;e.exports=function(e,t){return o.create(e,t)}},nwJ7:function(e,t,a){var o=a("7Tch"),n=a("DGQG"),r=a("pTZr")(!1),i=a("nUWZ")("IE_PROTO");e.exports=function(e,t){var a,l=n(e),s=0,d=[];for(a in l)a!=i&&o(l,a)&&d.push(a);for(;t.length>s;)o(l,a=t[s++])&&(~r(d,a)||d.push(a));return d}},pBXl:function(e,t,a){var o=a("MITN");o(o.S+o.F*!a("M7ni"),"Object",{defineProperty:a("qRYU").f})},pTZr:function(e,t,a){var o=a("DGQG"),n=a("sSQC"),r=a("lw6p");e.exports=function(e){return function(t,a,i){var l,s=o(t),d=n(s.length),c=r(i,d);if(e&&a!=a){for(;d>c;)if((l=s[c++])!=l)return!0}else for(;d>c;c++)if((e||c in s)&&s[c]===a)return e||c||0;return!e&&-1}}},ppOE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={header:{tool:{blackBoard:{title:{open:"小白板",close:"關閉",prev:"上壹位",next:"下壹位",shrink:"縮小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分發",recycle:"回收",againDispenseed:"再次分發",commonTeacher:"老師"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"筆",text:"文字",eraser:"橡皮",color:"顏色及粗細"}},colorAndMeasure:{title:"顏色及粗細",selectColorText:"選擇顏色",selectMeasure:"選擇粗細"}}},alertWin:{ok:{showError:{text:"確定"},showPrompt:{text:"確定"},showConfirm:{cancel:"取消",ok:"確定"}},title:{showError:{text:"錯誤信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"確認消息"}}}};t.default=o},qCHB:function(e,t,a){e.exports={default:a("Ay9U"),__esModule:!0}},qRYU:function(e,t,a){var o=a("Dc6E"),n=a("DnLf"),r=a("xXu8"),i=Object.defineProperty;t.f=a("M7ni")?Object.defineProperty:function(e,t,a){if(o(e),t=r(t,!0),o(a),n)try{return i(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},qWNy:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},qd7y:function(e,t,a){"use strict";var o=a("OTtE"),n=a("+BLA"),r=a("Macf"),i={};a("OCs/")(i,a("QjZ5")("iterator"),function(){return this}),e.exports=function(e,t,a){e.prototype=o(i,{next:n(1,a)}),r(e,t+" Iterator")}},rLQK:function(e,t,a){var o=a("Dc6E"),n=a("X6b2");e.exports=a("UusJ").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return o(t.call(e))}},rhsp:function(e,t,a){a("CLwS"),e.exports=a("UusJ").Object.keys},rkp3:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("Yarq"),r=o(n),i=a("AA3o"),l=o(i),s=a("xSur"),d=o(s),c=a("UzKs"),u=o(c),h=a("Y7Ml"),f=o(h),g=a("jyQm"),p=o(g),m=a("yE5a"),v=o(m),b=a("T+56"),y=o(b),w=a("HUPQ"),S=o(w),T=a("eOcM"),_=o(T),I=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={updateState:!1},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){y.default.Window.addEventListener(TkConstant.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),y.default.CoreController.addEventListener("updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone",this.handlerUpdateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone.bind(this),this.listernerBackupid),v.default.getTkRoom()&&v.default.getTkRoom().onPageFinished&&v.default.getTkRoom().onPageFinished()}},{key:"componentWillUnmount",value:function(){y.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerOnResize",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"handlerUpdateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"callAllWrapOnClick",value:function(e){y.default.CoreController.dispatchEvent({type:"callAllWrapOnClick",message:{event:e}})}},{key:"render",value:function(){return p.default.createElement("section",{className:"app-mobile  all-container "+("phone"===S.default.mobileDeviceType?"phone":"pad"),onTouchStart:this.callAllWrapOnClick.bind(this)},p.default.createElement(_.default,{containerWidthAndHeight:{width:S.default.windowInnerWidth,height:S.default.windowInnerHeight},videoDrawingBoardInstanceId:"fileVideo"===S.default.videoDrawingBoardType?"localFileStreamVideoDrawBoard":"videoDrawBoard"}))}}]),t}(p.default.Component);t.default=I},sSQC:function(e,t,a){var o=a("tXsA"),n=Math.min;e.exports=function(e){return e>0?n(o(e),9007199254740991):0}},tXsA:function(e,t){var a=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:a)(e)}},uObV:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("ZLEe"),r=o(n),i=a("Q+Ik"),l=o(i),s=a("KH7x"),d=o(s),c=a("hRKE"),u=o(c),h=a("MgeX"),f=o(h),g=a("HzJ8"),p=o(g),m=a("AA3o"),v=o(m),b=a("xSur"),y=o(b);String.prototype.colorHex=function(){var e=this,t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgb|RGB)/.test(e)){for(var a=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),o="#",n=0;n<a.length;n++){var r=Number(a[n]).toString(16);"0"===r&&(r+=r),o+=r}return 7!==o.length&&(o=e),o}if(!t.test(e))return e;var i=e.replace(/#/,"").split("");if(6===i.length)return e;if(3===i.length){for(var l="#",s=0;s<i.length;s+=1)l+=i[s]+i[s];return l}},String.prototype.colorRgb=function(){var e=this.toLowerCase(),t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&t.test(e)){if(4===e.length){for(var a="#",o=1;o<4;o+=1)a+=e.slice(o,o+1).concat(e.slice(o,o+1));e=a}for(var n=[],r=1;r<7;r+=2)n.push(parseInt("0x"+e.slice(r,r+2)));return"RGB("+n.join(",")+")"}return e};var w={addEvent:function(e,t,a,o){o=void 0!=o&&null!=o&&o,e.addEventListener?e.addEventListener(t,a,o):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,o){e.addEventListener?e.removeEventListener(t,a,o):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},getOffset:function(e){for(var t={left:e.offsetLeft,top:e.offsetTop};e!=document.body;)e=e.offsetParent,t.left+=e.offsetLeft,t.top+=e.offsetTop;return t}},S=function(){function e(){(0,v.default)(this,e),this.whiteboardToolsInfo={primaryColor:"#000000",secondaryColor:"#ffffff",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",fontStyle:"normal",fontWeight:"normal"},this.defaultProductionOptions={whiteboardClear:!0,watermarkImageScalc:16/9,whiteboardMagnification:1,containerWidthAndHeight:{width:0,height:0},minHeight:void 0,rotateDeg:0,baseWhiteboardWidth:960,proprietaryTools:!1,deawPermission:!0,tempDeawPermission:!0,saveRedoStack:!1,saveUndoStack:!1,remindContentTime:3e3,showRemoteRemindContent:!1,showMyselfRemindContent:!1},this.whiteboardInstanceIDPrefix="whiteboard_",this.whiteboardInstanceDefaultID="whiteboard_default",this.whiteboardInstanceStore={},this.whiteboardThumbnailStore={},this.uniqueWhiteboard=!1,this.minMagnification=1,this.maxMagnification=3,this.useWhiteboardTool={tool_pencil:!1,tool_highlighter:!1,tool_line:!1,tool_arrow:!1,tool_dashed:!1,tool_eraser:!1,tool_text:!1,tool_rectangle:!1,tool_rectangle_empty:!1,tool_ellipse:!1,tool_ellipse_empty:!1,tool_polygon:!1,tool_eyedropper:!1,tool_selectShape:!1,tool_mouse:!1,tool_laser:!1,action_undo:!1,action_redo:!1,action_clear:!1,zoom_big:!1,zoom_small:!1,zoom_default:!1},this.specialWhiteboardInstanceIDPrefix="specialWhiteboardInstanceIDPrefix_",this.awaitSaveToWhiteboardInstanceSignallingArray=[],this.commonActiveTool="tool_pencil",this.basicTemplateWhiteboardSignallingList={}}return(0,y.default)(e,[{key:"getSpecialWhiteboardInstanceIDPrefix",value:function(){return this.specialWhiteboardInstanceIDPrefix}},{key:"setUniqueWhiteboard",value:function(e){this.uniqueWhiteboard=e}},{key:"activeCommonWhiteboardTool",value:function(e){var t=this;/^tool_/.test(e)&&(t.commonActiveTool=e);var a=!0,o=!1,n=void 0;try{for(var r,i=(0,p.default)((0,f.default)(t.whiteboardInstanceStore));!(a=(r=i.next()).done);a=!0){var l=r.value;if(!l.proprietaryTools){var s=l.id;t.activeWhiteboardTool(e,s)}}}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}}},{key:"updateCommonWhiteboardToolsInfo",value:function(e){e&&"object"===(void 0===e?"undefined":(0,u.default)(e))&&Object.customAssign(this.whiteboardToolsInfo,e)}},{key:"getWhiteboardDefaultFiledata",value:function(e){var t={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0};return e&&"object"===(void 0===e?"undefined":(0,u.default)(e))&&Object.customAssign(t,e),t}},{key:"handlerPubmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"pubmsg");var t=e.data.whiteboardID,a=this._getWhiteboardInstanceById(t);if(!a)return e.source="pubmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);if(e&&null!=e.data&&("shapeSaveEvent"===e.data.eventType||"clearEvent"===e.data.eventType||"redoEvent"===e.data.eventType||"laserMarkEvent"===e.data.eventType))if(e.source="pubmsg","laserMarkEvent"===e.data.eventType)this._receiveSnapshot(e,a);else{var o=e.id.substring(e.id.lastIndexOf("###_")+4);if(o){var n=o.split("_"),r=n[1],i=n[2],l=this.getWhiteboardFiledata(t);l.fileid==r&&l.currpage==i&&(this._receiveSnapshot(e,a),a.showRemoteRemindContent&&e.remindContent&&this._handlerShowRemoteRemindContentFromPubmsgData(a,e)),null===a.waitingProcessShapeData[o]||void 0===a.waitingProcessShapeData[o]?(a.waitingProcessShapeData[o]=[],a.waitingProcessShapeData[o].push(e)):a.waitingProcessShapeData[o].push(e)}}}}},{key:"handlerDelmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"delmsg");var t=e.data.whiteboardID,a=this._getWhiteboardInstanceById(t);if(!a){e.source="delmsg";for(var o=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;o>=0;o--)if(this.awaitSaveToWhiteboardInstanceSignallingArray[o].id===e.id){this.awaitSaveToWhiteboardInstanceSignallingArray.splice(o,1);break}return}var n=e.id.substring(e.id.lastIndexOf("###_")+4);if(n){var r=n.split("_"),i=r[1],l=r[2],s=this.getWhiteboardFiledata(t);if(e.source="delmsg",s.fileid==i&&s.currpage==l&&this._receiveSnapshot(e,a),a.waitingProcessShapeData[n]&&Array.isArray(a.waitingProcessShapeData[n])&&a.waitingProcessShapeData[n].length>0)for(var d=a.waitingProcessShapeData[n].length-1;d>=0;d--){var c=a.waitingProcessShapeData[n][d];if(c.id===e.id){a.waitingProcessShapeData[n].splice(d,1);break}}}}}},{key:"handlerMsglist_SharpsChange",value:function(e){for(var t=0;t<e.length;t++){var a=e[t];a.data&&"string"==typeof a.data&&(a.data=JSON.parse(a.data)),this._saveBasicTemplateWhiteboardSignallingData(a,"msglist");var o=a.data.whiteboardID,n=this._getWhiteboardInstanceById(o);if(n){if(null!=a.data&&("shapeSaveEvent"===a.data.eventType||"clearEvent"===a.data.eventType||"redoEvent"===a.data.eventType)){a.source="msglist";var r=a.id.substring(a.id.lastIndexOf("###_")+4);null===n.waitingProcessShapeData[r]||void 0===n.waitingProcessShapeData[r]?(n.waitingProcessShapeData[r]=[],n.waitingProcessShapeData[r].push(a)):n.waitingProcessShapeData[r].push(a)}}else a.source="msglist",this.awaitSaveToWhiteboardInstanceSignallingArray.push(a)}}},{key:"preloadWhiteboardImg",value:function(e,t){if(!e)return void L.Logger.warning("preload img url is not esixt!");var a=new Image;a.onload=function(){t&&"function"==typeof t&&t()},a.onerror=function(t){L.Logger.error("preload img  fail , img url is "+e)},a.src=e}},{key:"productionWhiteboard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.whiteboardElementId,a=e.thumbnailId,o=e.productionOptions,n=void 0===o?{}:o,r=e.handler,i=void 0===r?{}:r,l=e.id,s=this;if(!t)return void L.Logger.error("whiteboardElementId is required!");var d=s._getWhiteboardInstanceID(l),c=s._getWhiteboardInstanceByID(d);if(c)return L.Logger.error("The production whiteboard(whiteboardInstanceID:"+d+") fails, the whiteboard already exists!"),c;c={};var u=document.getElementById(t);if(!u)return L.Logger.error("Whiteboard elements do not exist , element id is:"+t+"!"),c;var h=document.createElement("div"),f=t+"_whiteboardInstance";return h.className="whiteboard-instance-element",h.id=f,u.appendChild(h),n=Object.customAssign({},s.defaultProductionOptions,n),s.whiteboardInstanceStore[d]=c,c.filedata=n.filedata||{},c.baseWhiteboardWidth=n.baseWhiteboardWidth,c.whiteboardInstanceID=d,c.parcelAncestorElementId=n.parcelAncestorElementId,c.isBaseboard=n.isBaseboard,c.needLooadBaseboard=n.needLooadBaseboard,c.dependenceBaseboardWhiteboardID=n.dependenceBaseboardWhiteboardID,c.watermarkImageScalc=n.watermarkImageScalc,c.whiteboardMagnification=n.whiteboardMagnification,c.remindContentTime=n.remindContentTime,c.showRemoteRemindContent=n.showRemoteRemindContent,c.showMyselfRemindContent=n.showMyselfRemindContent,c.associatedMsgID=n.associatedMsgID,c.associatedUserID=n.associatedUserID,c.proprietaryTools=n.proprietaryTools,c.minHeight=n.minHeight,c.rotateDeg=n.rotateDeg,c.deawPermission=n.deawPermission,c.tempDeawPermission=n.tempDeawPermission,c.nickname=n.nickname,c.userid=n.userid,c.whiteboardToolsInfo=Object.customAssign({},s.whiteboardToolsInfo),n.primaryColor&&(c.whiteboardToolsInfo.primaryColor=n.primaryColor),n.secondaryColor&&(c.whiteboardToolsInfo.secondaryColor=n.secondaryColor),n.backgroundColor&&(c.whiteboardToolsInfo.backgroundColor=n.backgroundColor),c.saveRedoStack=n.saveRedoStack,c.saveUndoStack=n.saveUndoStack,c.imageThumbnailId=n.imageThumbnailId,c.imageThumbnailTipContent=n.imageThumbnailTipContent,c.registerWhiteboardToolsList={},c.stackStorage={},c.handler={},c.handler.sendSignallingToServer=i.sendSignallingToServer,c.handler.delSignallingToServer=i.delSignallingToServer,c.handler.resizeWhiteboardSizeCallback=i.resizeWhiteboardSizeCallback,c.handler.noticeUpdateToolDescCallback=i.noticeUpdateToolDescCallback,c.handler.whiteboardWatermarkImageOnloadCallback=i.whiteboardWatermarkImageOnloadCallback,c.active=!0,c.containerWidthAndHeight=n.containerWidthAndHeight,c.useImgOriginalSizeToContainerWidthAndHeight=n.useImgOriginalSizeToContainerWidthAndHeight,c.myselfId=n.myselfId,c.undoRedoClearToMySelf=n.undoRedoClearToMySelf,c.useToolKey=n.useToolKey,c.waitingProcessShapeData={},c.whiteboardElementId=t,c.whiteboardElement=u,c.whiteboardInstanceElementId=f,c.whiteboardInstanceElement=h,c.id=l,c.thumbnailId=a,c.lc=window.LC.init(c.whiteboardInstanceElement),c.lc.backingScale=1,c.lc.setColor("primary",c.whiteboardToolsInfo.primaryColor),c.lc.setColor("secondary",c.whiteboardToolsInfo.secondaryColor),c.lc.setColor("background",c.whiteboardToolsInfo.backgroundColor),c.lc.setWatermarkImageToLcBackground(!1),c.lc.setZoom(1),c.lc.setPan(0,0),c.lc.on("shapeSave",s._handlerShapeSaveEvent.bind(s,c)),c.lc.on("sendUndo",s._handlerUndoEvent.bind(s,c)),c.lc.on("sendRedo",s._handlerRedoEvent.bind(s,c)),c.lc.on("sendClear",s._handlerClearEvent.bind(s,c)),c.lc.on("drawingChange",this._handlerDrawingChangeEvent.bind(s,c)),c.activeTool=void 0,c.lc.myselfId=c.myselfId,c.lc.undoRedoClearToMySelf=c.undoRedoClearToMySelf,n.whiteboardClear&&s.clearWhiteboardAllDataById(l),s._changeWhiteboardDeawPermission(c.deawPermission,c),s._changeWhiteboardTemporaryDeawPermission(c.tempDeawPermission,c),s._saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance(c),s.activeWhiteboardTool(c.proprietaryTools?c.useToolKey?c.useToolKey:"tool_pencil":s.commonActiveTool,l),s._zoomIsDisable(c),s._actionIsDisable(c),s._noticeUpdateToolDesc(c),s._resizeWhiteboardHandler(c),c}},{key:"changeWhiteboardExclusiveAttribute",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":(0,u.default)(t))){var a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[changeWhiteboardExclusiveAttribute]There are no white board Numbers that belong to id "+e);for(var o in t)a.hasOwnProperty(o)&&(a[o]=t[o],"myselfId"!==o&&"undoRedoClearToMySelf"!==o||a.lc&&(a.lc[o]=a[o]))}}},{key:"updateImageThumbnailId",value:function(e,t){var a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[updateImageThumbnailId]There are no white board Numbers that belong to id "+e);a.imageThumbnailId=t,this._saveImageBase64ToImageThumbnail(a)}},{key:"updateWhiteboardSaveRedoStackAndSaveUndoStack",value:function(e,t){var a=t.saveRedoStack,o=t.saveUndoStack,n=this._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateSaveRedoStackAndSaveUndoStack]There are no white board Numbers that belong to id "+e);n.saveRedoStack=void 0!=a?a:n.saveRedoStack,n.saveUndoStack=void 0!=o?o:n.saveUndoStack}},{key:"updateIsBaseboard",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateIsBaseboard]There are no white board Numbers that belong to id "+e);o.isBaseboard=t}},{key:"updateDependenceBaseboardWhiteboardID",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateDependenceBaseboardWhiteboardID]There are no white board Numbers that belong to id "+e);o.dependenceBaseboardWhiteboardID=t}},{key:"updateShowRemindContent",value:function(e,t,a){var o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateShowRemindContent]There are no white board Numbers that belong to id "+e);o.showRemoteRemindContent=t||o.showRemoteRemindContent,o.showMyselfRemindContent=a||o.showMyselfRemindContent}},{key:"updateWhiteboardAssociatedMsgID",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateWhiteboardAssociatedMsgID]There are no white board Numbers that belong to id "+e);o.associatedMsgID=t}},{key:"updateWhiteboardAssociatedUserID",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateWhiteboardAssociatedUserID]There are no white board Numbers that belong to id "+e);o.associatedUserID=t}},{key:"hasWhiteboardById",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return void 0!==a&&null!==a}},{key:"clearWhiteboardAllDataById",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[clear]There are no white board Numbers that belong to id "+e);t._clearWhiteboardAllDataByInstance(a)}},{key:"productionSpecialId",value:function(e){return this.specialWhiteboardInstanceIDPrefix+e}},{key:"destroyWhiteboardInstance",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[destroy]There are no white board Numbers that belong to id "+e);t._destroyWhiteboardInstance(a)}},{key:"clearRedoAndUndoStack",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[clearRedoAndUndoStack]There are no white board Numbers that belong to id "+e);a._clearRedoAndUndoStack(o,t)}},{key:"resetDedaultWhiteboardMagnification",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[resetDedaultWhiteboardMagnification]There are no white board Numbers that belong to id "+e);a.whiteboardMagnification=t.defaultProductionOptions.whiteboardMagnification,t._zoomIsDisable(a),t._resizeWhiteboardHandler(a)}},{key:"updateWhiteboardMagnification",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateWhiteboardMagnification]There are no white board Numbers that belong to id "+e);o.whiteboardMagnification=t}},{key:"updateWhiteboardWatermarkImageScalc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultProductionOptions.watermarkImageScalc,a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[updateWhiteboardWatermarkImageScalc]There are no white board Numbers that belong to id "+e);this._updateWhiteboardWatermarkImageScalc(a,t)}},{key:"setWhiteboardWatermarkImage",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.resetDedaultWhiteboardMagnification,n=void 0===o||o,r=this;L.Logger.debug("setWhiteboardWatermarkImage watermarkImageUrl:"+t);var i=r._getWhiteboardInstanceById(e);if(!i)return void L.Logger.error("[setWhiteboardWatermarkImage]There are no white board Numbers that belong to id "+e);i.lc.watermarkImage=null,n&&r.resetDedaultWhiteboardMagnification(e),t?(r.showWhiteboardCanvasBackground(e),r._showWhiteboardLoading(i),clearTimeout(i.setWhiteboardWatermarkImageTimer),i.setWhiteboardWatermarkImageTimer=setTimeout(function(){var e=new Image;e.onload=function(){var t=e.width/e.height;i.handler.whiteboardWatermarkImageOnloadCallback&&"function"==typeof i.handler.whiteboardWatermarkImageOnloadCallback&&i.handler.whiteboardWatermarkImageOnloadCallback({width:e.width,height:e.height}),i.useImgOriginalSizeToContainerWidthAndHeight&&(i.containerWidthAndHeight={width:e.width,height:e.height}),i.lc.setWatermarkImage(e),r._resizeWhiteboardByScalc(i,{watermarkImage:e,watermarkImageScalc:t}),r._hideWhiteboardLoading(i)},e.onerror=function(e){L.Logger.error("img load fail , img url is "+t)},e.src=t},150)):(r.hideWhiteboardCanvasBackground(e),i.lc.watermarkScale=1,r._resizeWhiteboardByScalc(i,{isChangeWatermarkScale:!1}),r._hideWhiteboardLoading(i),i.lc.watermarkImage=null,i.lc.customCanvasBackgroundElement.style.backgroundImage="",r._hideWhiteboardLoading(i))}},{key:"resizeWhiteboardHandler",value:function(e){var t=this;if(void 0===e){var a=!0,o=!1,n=void 0;try{for(var r,i=(0,p.default)((0,f.default)(t.whiteboardInstanceStore));!(a=(r=i.next()).done);a=!0){var l=r.value;t._resizeWhiteboardHandler(l)}}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}}else{var s=t._getWhiteboardInstanceById(e);if(!s)return void L.Logger.error("[resizeWhiteboardHandler]There are no white board Numbers that belong to id "+e);t._resizeWhiteboardHandler(s)}}},{key:"updateContainerWidthAndHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.width,o=t.height,n=this,r=n._getWhiteboardInstanceById(e);return r?void 0===a||void 0===o?void L.Logger.error("[updateContainerWidthAndHeight]width or height is not exist , [width:"+a+" , height:"+o+"]!"):(r.containerWidthAndHeight={width:a,height:o},void n._resizeWhiteboardHandler(r)):void L.Logger.error("[updateContainerWidthAndHeight]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardCanvasBackground",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[hideWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e);a.lc&&a.lc.backgroundCanvas&&(a.lc.backgroundCanvas.style.display="none",a.lc.customCanvasBackgroundElement.style.display="none")}},{key:"showWhiteboardCanvasBackground",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[showWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e);a.lc&&a.lc.backgroundCanvas&&(a.lc.backgroundCanvas.style.display="",a.lc.customCanvasBackgroundElement.style.display="")}},{key:"hideWhiteboard",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);a&&a.whiteboardElement&&(a.whiteboardElement.style.display="none")}},{key:"showWhiteboard",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);a&&a.whiteboardElement&&(a.whiteboardElement.style.display="block")}},{key:"updateTextFont",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.fontSize,o=t.fontFamily,n=t.fontStyle,r=t.fontWeight,i=this,l=i._getWhiteboardInstanceById(e);if(!l)return void L.Logger.error("[updateTextFont]There are no white board Numbers that belong to id "+e);l.whiteboardToolsInfo.fontSize=void 0!=a?a:l.whiteboardToolsInfo.fontSize,l.whiteboardToolsInfo.fontFamily=void 0!=o?o:l.whiteboardToolsInfo.fontFamily,l.whiteboardToolsInfo.fontStyle=void 0!=n?n:l.whiteboardToolsInfo.fontStyle,l.whiteboardToolsInfo.fontWeight=void 0!=r?r:l.whiteboardToolsInfo.fontWeight,i._updateTextFont(l)}},{key:"updateEraserWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.eraserWidth,o=this,n=o._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateEraserWidth]There are no white board Numbers that belong to id "+e);n.whiteboardToolsInfo.eraserWidth=void 0!=a?a:n.whiteboardToolsInfo.eraserWidth,o._updateEraserWidth(n)}},{key:"updatePencilWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.pencilWidth,o=this,n=o._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updatePencilWidth]There are no white board Numbers that belong to id "+e);n.whiteboardToolsInfo.pencilWidth=void 0!=a?a:n.whiteboardToolsInfo.pencilWidth,o._updatePencilWidth(n)}},{key:"updateWhiteboardToolsInfo",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e);t&&"object"===(void 0===t?"undefined":(0,u.default)(t))&&Object.customAssign(o.whiteboardToolsInfo,t)}},{key:"updateShapeWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.shapeWidth,o=this,n=o._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[uploadShapeWidth]There are no white board Numbers that belong to id "+e);n.whiteboardToolsInfo.shapeWidth=void 0!=a?a:n.whiteboardToolsInfo.shapeWidth,o._updateShapeWidth(n)}},{key:"updateColor",value:function(e,t){var a=this;if(t&&"object"===(void 0===t?"undefined":(0,u.default)(t))){var o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateColor]There are no white board Numbers that belong to id "+e);var n=!0,r=!1,i=void 0;try{for(var s,c=(0,p.default)((0,l.default)(t));!(n=(s=c.next()).done);n=!0){var h=s.value,f=(0,d.default)(h,2),g=f[0],m=f[1];o.whiteboardToolsInfo[g+"Color"]=m}}catch(e){r=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}a._updateColor(o,t)}}},{key:"activeWhiteboardTool",value:function(e,t){var a=this;if(void 0===a.useWhiteboardTool[e])return void L.Logger.error("The whiteboard does not have the "+e+" tool!");if(void 0===t||null===t)return void L.Logger.error("[activeWhiteboardTool]id is undefined or null ");var o=a._getWhiteboardInstanceById(t);if(!o)return void L.Logger.error("[activeWhiteboardTool]There are no white board Numbers that belong to id "+t);if(/^tool_/.test(e))if(o.activeTool=e,a._setWhiteboardTools(e,o),a._handlerActiveToolLaser(e,o),"tool_text"==e?a._updateTextFont(o):"tool_eraser"==e?a._updateEraserWidth(o):"tool_pencil"==e||"tool_highlighter"==e||"tool_line"==e||"tool_arrow"==e||"tool_dashed"==e?a._updatePencilWidth(o):"tool_rectangle"!=e&&"tool_rectangle_empty"!=e&&"tool_ellipse"!=e&&"tool_ellipse_empty"!=e&&"tool_polygon"!=e||a._updateShapeWidth(o),"tool_ellipse_empty"==e||"tool_rectangle_empty"==e?o.lc.setColor("secondary","transparent"):o.lc.setColor("secondary",o.whiteboardToolsInfo.secondaryColor),"tool_highlighter"===e){var n=o.whiteboardToolsInfo.primaryColor.colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");o.lc.setColor("primary",n)}else o.lc.setColor("primary",o.whiteboardToolsInfo.primaryColor);else if(/^action_/.test(e)){if("action_undo"===e){var r=o.undoRedoClearToMySelf&&o.myselfId?o.myselfId:void 0;o.lc.sendUndo(r)}else if("action_redo"===e){var i=o.undoRedoClearToMySelf&&o.myselfId?o.myselfId:void 0;o.lc.sendRedo(i)}else if("action_clear"===e){var l=o.undoRedoClearToMySelf&&o.myselfId?o.myselfId:void 0;o.lc.sendClear(l)}a._actionIsDisable(o)}else/^zoom_/.test(e)&&("zoom_big"===e?o.whiteboardMagnification<a.maxMagnification&&(o.whiteboardMagnification+=.5):"zoom_small"===e?o.whiteboardMagnification>a.minMagnification&&(o.whiteboardMagnification-=.5):"zoom_default"===e&&(o.whiteboardMagnification=a.defaultProductionOptions.whiteboardMagnification),o.whiteboardMagnification>a.maxMagnification?o.whiteboardMagnification=a.maxMagnification:o.whiteboardMagnification<a.minMagnification&&(o.whiteboardMagnification=a.minMagnification),a._zoomIsDisable(o),a._resizeWhiteboardHandler(o))}},{key:"changeWhiteboardTemporaryDeawPermission",value:function(e,t){var a=this,o=void 0;if(void 0!=t&&!(o=a._getWhiteboardInstanceById(t)))return void L.Logger.error("[changeWhiteboardTemporaryDeawPermission]There are no white board Numbers that belong to id "+t);a._changeWhiteboardTemporaryDeawPermission(e,o)}},{key:"changeWhiteboardDeawPermission",value:function(e,t){var a=this,o=void 0;if(void 0!=t&&!(o=a._getWhiteboardInstanceById(t)))return void L.Logger.error("[changeWhiteboardDeawPermission]There are no white board Numbers that belong to id "+t);a._changeWhiteboardDeawPermission(e,o)}},{key:"registerWhiteboardTools",value:function(e,t){var a=this;if(!t||"object"!==(void 0===t?"undefined":(0,u.default)(t)))return void L.Logger.error("[initWhiteboardTools] tools desc cannot be empty and type json!");var o=a._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[registerWhiteboardTools]There are no white board Numbers that belong to id "+e);var n={},r=!0,i=!1,s=void 0;try{for(var c,h=(0,p.default)((0,l.default)(t));!(r=(c=h.next()).done);r=!0){var f=c.value,g=(0,d.default)(f,2),m=g[0],v=g[1];void 0!==a.useWhiteboardTool[m]?(n[m]=a._productionToolDesc(m,v),a.useWhiteboardTool[m]=!0):L.Logger.warning("The whiteboard does not have the "+m+" tool!")}}catch(e){i=!0,s=e}finally{try{!r&&h.return&&h.return()}finally{if(i)throw s}}o.registerWhiteboardToolsList=n,o.isRegisterWhiteboardTool=!0,a._zoomIsDisable(o),a._zoomIsDisable(o),a._noticeUpdateToolDesc(o)}},{key:"hasWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?!!(t.filedata&&"object"===(0,u.default)(t.filedata)&&(0,r.default)(t.filedata).length>0):void L.Logger.error("[hasWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardFiledata",value:function(e,t){var a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[updateWhiteboardFiledata]There are no white board Numbers that belong to id "+e);this._updateWhiteboardFiledata(a,t)}},{key:"getWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?Object.customAssign({},t.filedata):void L.Logger.error("[getWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"loadCurrpageWhiteboard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.loadRedoStack,o=void 0!==a&&a,n=(t.loadUndoStack,t.callback),r=this._getWhiteboardInstanceById(e);if(!r)return void L.Logger.error("[loadCurrpageWhiteboard]There are no white board Numbers that belong to id "+e);this._clearRedoAndUndoStack(r),this._basicTemplateWhiteboardSignallingListToWhiteboardInstance(r);var i=r.filedata,l=i.fileid,s=i.currpage;if(void 0===r.waitingProcessShapeData||null===r.waitingProcessShapeData)r.waitingProcessShapeData={};else{var d=r.waitingProcessShapeData["SharpsChange_"+l+"_"+s];null!==d&&void 0!==d&&d.length>0&&this._batchReceiveSnapshot(d,r)}if(o){var c=r.stackStorage["redoStack_"+l+"_"+s];c&&c.length>0&&(r.lc.redoStack=c)}this._actionIsDisable(r),n&&"function"==typeof n&&n()}},{key:"saveWhiteboardStackToStorage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.saveRedoStack,o=t.saveUndoStack,n=this._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[saveWhiteboardStackToStorage]There are no white board Numbers that belong to id "+e);a=void 0!=a?a:n.saveRedoStack,o=void 0!=o?o:n.saveUndoStack;var r=this.getWhiteboardFiledata(e),i=r.fileid,l=r.currpage;o&&(n.stackStorage["undoStack_"+i+"_"+l]=n.lc.undoStack.slice(0)),a&&(n.stackStorage["redoStack_"+i+"_"+l]=n.lc.redoStack.slice(0))}},{key:"showWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e);this._showWhiteboardLoading(t)}},{key:"hideWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e);this._hideWhiteboardLoading(t)}},{key:"isWhiteboardTextEditing",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?"Text"==t.lc.tool.name.toString()&&"editing"==t.lc.tool.currentShapeState:void L.Logger.error("[isWhiteboardTextEditing]There are no white board Numbers that belong to id "+e)}},{key:"checkWhiteboardCanvasSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.isResize,o=void 0!==a&&a,n=this._getWhiteboardInstanceById(e);return n?n.lc&&n.lc.canvas?(0===n.lc.canvas.width||0===n.lc.canvas.height)&&(o&&this._resizeWhiteboardHandler(n),!0):void 0:void L.Logger.error("[checkWhiteboardCanvasSize]There are no white board Numbers that belong to id "+e)}},{key:"downCanvasImageToLocalFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png",a=this._getWhiteboardInstanceById(e);if(!a)return void L.Logger.error("[downCanvasImageToLocalFile]There are no white board Numbers that belong to id "+e);var o=this._convertCanvasToImageBase64(a,t);o=o.replace(function(e){return e=e.toLocaleLowerCase().replace(/jpg/i,"jpeg"),"image/"+e.match(/png|jpeg|bmp|gif/)[0]}(t),"image/octet-stream");var n=(a.nickname?a.nickname+"_":"")+a.id+"_"+(new Date).getTime()+"."+t;!function(e,t){var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=e,a.download=t;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(o)}(o,n)}},{key:"_clearRedoAndUndoStack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.clear,o=void 0===a||a,n=t.redo,r=void 0===n||n,i=t.undo,l=void 0===i||i,s=this;o&&s._clearLc(e,{triggerEvent:!1}),r&&s._clearLcRedoStack(e),l&&s._clearLcUndoStack(e),s._actionIsDisable(e)}},{key:"_updateWhiteboardFiledata",value:function(e,t){t&&"object"===(void 0===t?"undefined":(0,u.default)(t))&&(t.currpage=Number(t.currpage),t.pagenum=Number(t.pagenum),t.pptslide=Number(t.pptslide),t.pptstep=Number(t.pptstep),t.steptotal=Number(t.steptotal),Object.customAssign(e.filedata,t))}},{key:"_batchReceiveSnapshot",value:function(e,t){var a=this;if(!Array.isArray(e))return void L.Logger.error("shapesArray must be an array!");e.forEach(function(o,n){var r=!0;n===e.length-1&&(r=!1),a._handlerRemoteDataToWhiteboard(o,r,t)}),a._actionIsDisable(t)}},{key:"_receiveSnapshot",value:function(e,t){var a=this;a._handlerRemoteDataToWhiteboard(e,!1,t),a._actionIsDisable(t)}},{key:"_handlerRemoteDataToWhiteboard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];if(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),null!=e.data&&null!=e.data.eventType)if("delmsg"===e.source)switch(e.data.eventType){case"shapeSaveEvent":case"clearEvent":case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(a.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(a,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.undo(!1,e.data.clearActionId)}else switch(e.data.eventType){case"shapeSaveEvent":if(a&&a.lc&&a.lc.undoStack&&a.lc.undoStack.length>0)for(var o=!1,n=a.lc.undoStack.length-1;n>=0;n--){var r=a.lc.undoStack[n];switch(r.actionName){case"AddShapeAction":r.shapeId===e.data.shapeId&&(r.undo&&r.undo(),a.lc.undoStack.splice(n,1),o=!0)}if(o)break}e.data&&e.data.data&&e.data.data.data&&(e.data.data=LC.JSONToShape(e.data.data)),a.lc.saveShape(e.data.data,!1,null,t,e.fromID,e.seq);break;case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(a.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(a,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.undo(!1,e.data.clearActionId);break;case"redoEvent":if(e.data.actionName&&"AddShapeAction"===e.data.actionName){for(var i=!0,l=a.lc.undoStack.length-1;l>=0;l--)if(e.data.shapeId===a.lc.undoStack[l].shapeId){i=!1;break}if(i){for(var s=!1,d=a.lc.redoStack.length-1;d>=0;d--)if(e.data.shapeId===a.lc.redoStack[d].shapeId){s=!0;break}if(s)a.lc.redo(!1,e.data.shapeId);else{e.data&&e.data.data&&e.data.data.data&&(e.data.data=LC.JSONToShape(e.data.data));var c=e.data.otherInfo,u=void 0===c?{authorUserId:e.fromID,seq:e.seq}:c;a.lc.saveShape(e.data.data,!1,null,t,u.authorUserId,u.seq)}}}else if(e.data.actionName&&"ClearAction"===e.data.actionName){for(var h=!0,f=a.lc.undoStack.length-1;f>=0;f--)if(e.data.clearActionId===a.lc.undoStack[f].id){h=!1;break}if(h){for(var g=!1,p=a.lc.redoStack.length-1;p>=0;p--)if(e.data.clearActionId===a.lc.redoStack[p].id){g=!0;break}if(g)a.lc.redo(!1,e.data.clearActionId),this._removeAllRemindContent(a);else{var m=e.data.otherInfo,v=void 0===m?{authorUserId:e.fromID,toAuthorUserId:void 0,seq:e.seq}:m;a.lc.clear(!1,e.data.clearActionId,v.authorUserId,v.toAuthorUserId,v.seq),this._removeAllRemindContent(a)}}}break;case"clearEvent":a.lc.clear(!1,e.data.clearActionId,e.fromID,e.data.toAuthorUserId,e.seq),this._removeAllRemindContent(a);break;case"laserMarkEvent":var b=a.lc.containerEl.parentNode.getElementsByClassName("laser-mark")[0];switch(e.data.actionName){case"show":b.style.display="block";break;case"hide":b.style.display="none";break;case"move":if(e.data&&e.data.laser){var y=e.data.laser.left,w=e.data.laser.top;b.style.left=y+"%",b.style.top=w+"%"}}}}},{key:"_productionToolDesc",value:function(e,t){return{toolKey:e,disabled:!1}}},{key:"_noticeUpdateToolDesc",value:function(e){e&&e.isRegisterWhiteboardTool&&(clearTimeout(e.noticeUpdateToolDescTimer),e.noticeUpdateToolDescTimer=setTimeout(function(){e.handler&&e.handler.noticeUpdateToolDescCallback&&e.handler.noticeUpdateToolDescCallback(e.registerWhiteboardToolsList)},250))}},{key:"_updateToolDesc",value:function(e,t,a){if(e.registerWhiteboardToolsList[t]){var o=!0,n=!1,r=void 0;try{for(var i,s=(0,p.default)((0,l.default)(a));!(o=(i=s.next()).done);o=!0){var c=i.value,u=(0,d.default)(c,2),h=u[0],f=u[1];void 0!==e.registerWhiteboardToolsList[t][h]&&(e.registerWhiteboardToolsList[t][h]=f)}}catch(e){n=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw r}}}}},{key:"_batchUpdateToolDesc",value:function(e,t){var a=this;if(!Array.isArray(t))return void L.Logger.error("updateDescArray must be an array , whiteboard id is "+e.id+"!");var o=!0,n=!1,r=void 0;try{for(var i,l=(0,p.default)(t);!(o=(i=l.next()).done);o=!0){var s=i.value;Array.isArray(s)&&a._updateToolDesc(e,s[0],s[1])}}catch(e){n=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}}},{key:"_setWhiteboardTools",value:function(e,t){var a=this,o=function(t){var o=a._productionToolByCore(e,t);t.lc.setTool(o)};a._automaticTraverseWhiteboardInstance(t,o)}},{key:"_productionToolByCore",value:function(e,t){var a=this,o=void 0;if(void 0===a.useWhiteboardTool[e])return L.Logger.error("The whiteboard does not have the "+e+" tool!"),o;switch(e){case"tool_pencil":case"tool_highlighter":o=new LC.tools.Pencil(t.lc);break;case"tool_line":o=new LC.tools.Line(t.lc);break;case"tool_arrow":o=new LC.tools.Line(t.lc),o.hasEndArrow=!0;break;case"tool_dashed":o=new LC.tools.Line(t.lc),o.isDashed=!0;break;case"tool_eraser":o=new LC.tools.Eraser(t.lc);break;case"tool_text":o=new LC.tools.Text(t.lc);break;case"tool_rectangle":case"tool_rectangle_empty":o=new LC.tools.Rectangle(t.lc);break;case"tool_ellipse":case"tool_ellipse_empty":o=new LC.tools.Ellipse(t.lc);break;case"tool_polygon":o=new LC.tools.Polygon(t.lc);break;case"tool_eyedropper":o=new LC.tools.Eyedropper(t.lc);break;case"tool_selectShape":o=new LC.tools.SelectShape(t.lc);break;case"tool_mouse":case"tool_laser":o=t.lc.tool;break;default:L.Logger.warning("Tool "+e+" is not created in the whiteboard core layer!"),o=t.lc.tool}return o}},{key:"_getWhiteboardInstanceID",value:function(e){var t=this,a=t.uniqueWhiteboard||void 0==e||null==e?t.whiteboardInstanceDefaultID:t.whiteboardInstanceIDPrefix+e;return e&&"string"==typeof e&&new RegExp(t.specialWhiteboardInstanceIDPrefix,"g").test(e)&&(a=e),a}},{key:"_getWhiteboardInstanceById",value:function(e){var t=this,a=t._getWhiteboardInstanceID(e);return t.whiteboardInstanceStore[a]}},{key:"_getWhiteboardInstanceByID",value:function(e){return this.whiteboardInstanceStore[e]}},{key:"_resizeWhiteboardByScalc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.watermarkImage,o=t.isChangeCanvas,n=void 0===o||o,r=t.isChangeWatermarkScale,i=void 0===r||r,l=t.watermarkImageScalc;l=void 0!==l?l:e.watermarkImageScalc;var s=e.lc;if(s){var d=e.whiteboardElement,c=e.whiteboardInstanceElement,u=e.containerWidthAndHeight.width,h=e.containerWidthAndHeight.height;if(e.parcelAncestorElementId&&document.getElementById(e.parcelAncestorElementId)){var f=document.getElementById(e.parcelAncestorElementId);u=f.clientWidth,h=f.clientHeight}var g={},p=0,m=0,v=0,b=0;if(h*l<u?(p=Math.round(h*l*e.whiteboardMagnification),m=Math.round(h*e.whiteboardMagnification),d.style.width=p+"px",d.style.height=m+"px",c.style.width=p+"px",c.style.height=m+"px",void 0!==e.minHeight&&null!==e.minHeight&&(v=e.minHeight*l,b=e.minHeight,d.style.minWidth=v+"px",d.style.minHeight=b+"px",c.style.minWidth=v+"px",c.style.minHeight=b+"px",g.minWidth=v+"px",g.minHegiht=b+"px"),g.top="0%",g.left="50%",g.marginTop="0px",g.marginLeft=-p/2+"px",g.width=p+"px",g.height=m+"px"):(p=Math.round(u*e.whiteboardMagnification),m=Math.round(u/l*e.whiteboardMagnification),d.style.width=p+"px",d.style.height=m+"px",c.style.width=p+"px",c.style.height=m+"px",void 0!==e.minHeight&&null!==e.minHeight&&(v=e.minHeight*l,b=e.minHeight,d.style.minWidth=v+"px",d.style.minHeight=b+"px",c.style.minWidth=v+"px",c.style.minHeight=b+"px",g.minWidth=v+"px",g.minHegiht=b+"px"),g.top="50%",g.left="0%",g.marginTop=-m/2+"px",g.marginLeft="0px",g.width=p+"px",g.height=m+"px"),n){s.respondToSizeChange();var y=c.clientWidth,w=c.clientHeight,S=(y+w)/(e.baseWhiteboardWidth+e.baseWhiteboardWidth*l);if(s.setZoom(S),s.setPan(0,0),i&&a){var T=a.width,_=a.height,I=s.backgroundCanvas.width/T,k=s.backgroundCanvas.height/_,E=(I+k)/2;s.watermarkScale=E,s.setWatermarkImage(a)}}e.whiteboardMagnification>1?g.addClassName="custom-scroll-bar":g.addClassName="",e.handler&&e.handler.resizeWhiteboardSizeCallback&&"function"==typeof e.handler.resizeWhiteboardSizeCallback&&e.handler.resizeWhiteboardSizeCallback(g)}}},{key:"_clearWhiteboardAllDataByInstance",value:function(e){if(!e)return void L.Logger.error("[_clear]The whiteboard instance does not exist!");e.lc.clear(!1),e.lc.redoStack.length=0,e.lc.undoStack.length=0,e.stackStorage={},e.waitingProcessShapeData={},this._removeAllRemindContent(e)}},{key:"_resizeWhiteboardHandler",value:function(e){var t=this;if(e&&e.lc){var a=e.lc.watermarkImage;if(a&&a.src){var o=a.width/a.height;t._resizeWhiteboardByScalc(e,{watermarkImage:a,watermarkImageScalc:o})}else t._resizeWhiteboardByScalc(e,{isChangeWatermarkScale:!1});this._updateAllRemindContent(e)}}},{key:"_updateWhiteboardWatermarkImageScalc",value:function(e,t){e.watermarkImageScalc=t,this._resizeWhiteboardHandler(e)}},{key:"_productionWhiteboardRemindContent",value:function(e,t,a,o,n){var r=this;if(e&&o)try{if(e&&e.lc&&e.lc.containerEl.parentNode&&"function"==typeof e.lc.drawingCoordsToClientCoords){var i=e.lc.drawingCoordsToClientCoords(t,a);if(i){var l=document.createElement("span");l.className="remind-content",l.style.position="absolute",l.style.left=i.x+"px",l.style.top=i.y+"px",l.innerHTML=o;var s=n?"whiteboard_remind_"+n:"whiteboard_remind_"+(new Date).getTime();l.setAttribute("data-position-x",t),l.setAttribute("data-position-y",a),l.setAttribute("id",s),e.lc.containerEl.parentNode.appendChild(l),setTimeout(function(){r._removeRemindContentByElementId(e,s),l=null},e.remindContentTime)}}}catch(e){L.Logger.error("productionWhiteboardRemindContent error:",e)}}},{key:"_updateAllRemindContent",value:function(e){try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&t.length>0)for(var a=0;a<t.length;a++){var o=t[a],n=Number(o.getAttribute("data-position-x")),r=Number(o.getAttribute("data-position-y")),i=e.lc.drawingCoordsToClientCoords(n,r);o.style.left=i.x+"px",o.style.top=i.y+"px"}}}catch(e){L.Logger.error("updateAllRemindContent error:",e)}}},{key:"_removeRemindContentByElementId",value:function(e,t){if(e&&e.lc&&e.lc.containerEl.parentNode){var a=document.getElementById(t);a&&(a.innerHTML="",e.lc.containerEl.parentNode.removeChild(a),a=null)}}},{key:"_removeAllRemindContent",value:function(e){if(e&&e.lc&&e.lc.containerEl.parentNode)try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&t.length>0)for(var a=t.length-1;a>=0;a--){var o=t[a];o.innerHTML="",e.lc.containerEl.parentNode.removeChild(o),o=null}}}catch(e){L.Logger.error("removeAllRemindContent error:",e)}}},{key:"_handlerShapeSaveEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"shapeSaveEvent",t),this._actionIsDisable(e)}},{key:"_handlerUndoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"undoEvent",t),this._actionIsDisable(e)}},{key:"_handlerRedoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"redoEvent",t),this._actionIsDisable(e)}},{key:"_handlerClearEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"clearEvent",t),this._actionIsDisable(e)}},{key:"_handlerDrawingChangeEvent",value:function(e){this._saveImageBase64ToImageThumbnail(e)}},{key:"_saveImageBase64ToImageThumbnail",value:function(e){if(e.imageThumbnailId){var t=document.getElementById(e.imageThumbnailId);if(t&&"img"===t.nodeName.toLowerCase()){var a=this._convertCanvasToImageBase64(e,"jpg");t.src=a,e.imageThumbnailTipContent&&document.getElementById(e.imageThumbnailId+"_imageDescribe")?document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.imageThumbnailTipContent:e.nickname&&document.getElementById(e.imageThumbnailId+"_imageDescribe")&&(document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.nickname)}}}},{key:"_destroyWhiteboardInstance",value:function(e){var t=this;clearTimeout(e.noticeUpdateToolDescTimer),clearTimeout(e.laserTimer),clearTimeout(e.setWhiteboardWatermarkImageTimer),t.basicTemplateWhiteboardSignallingList[e.id]&&(t.basicTemplateWhiteboardSignallingList[e.id]=null,delete t.basicTemplateWhiteboardSignallingList[e.id]),t._clearWhiteboardAllDataByInstance(e);var a=e.whiteboardInstanceID,o=e.whiteboardElement;e.lc&&"function"==typeof e.lc.teardown&&e.lc.teardown(),o?o.innerHTML="":L.Logger.warning("[destroy] whiteboard elements do not exist , element id is:"+e.whiteboardElementId+"!");var n=e.thumbnailId?document.getElementById(e.thumbnailId):void 0;n&&(n.innerHTML="");var i=!0,l=!1,s=void 0;try{for(var d,c=(0,p.default)((0,r.default)(e));!(i=(d=c.next()).done);i=!0){var u=d.value;e[u]=null,delete e[u]}}catch(e){l=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(l)throw s}}t.whiteboardInstanceStore[a]=null,delete t.whiteboardInstanceStore[a]}},{key:"_clearLc",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).triggerEvent,e&&e.lc?(e.lc.clear(!1),this._removeAllRemindContent(e)):L.Logger.warning("clear whiteboard is not exist!")}},{key:"_clearLcRedoStack",value:function(e){e&&e.lc?e.lc.redoStack.length=0:L.Logger.warning("clearRedoStack whiteboard is not exist!")}},{key:"_clearLcUndoStack",value:function(e){e&&e.lc?e.lc.undoStack.length=0:L.Logger.warning("clearUndoStack whiteboard is not exist!")}},{key:"_showWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="block")}},{key:"_hideWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="none")}},{key:"_changeWhiteboardTemporaryDeawPermission",value:function(e,t){var a=this,o=function(t){var a=t.lc;if(a.isTmpDrawAble!==e){a.isTmpDrawAble=e;var o=a.containerEl.parentNode.getElementsByClassName("temporary-draw-permission")[0];a.isTmpDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}};a._automaticTraverseWhiteboardInstance(t,o)}},{key:"_changeWhiteboardDeawPermission",value:function(e,t){var a=this,o=function(t){var a=t.lc;if(a.isDrawAble!==e){a.isDrawAble=e;var o=a.containerEl.parentNode.getElementsByClassName("draw-permission")[0];a.isDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}};a._automaticTraverseWhiteboardInstance(t,o)}},{key:"_handlerActiveToolLaser",value:function(e,t){var a=this,o=function(t){var o=t.lc,n=o.containerEl.parentNode,r=n.getElementsByClassName("temporary-draw-permission")[0],i=n.getElementsByClassName("laser-mark")[0];if("tool_laser"===e)t._laserEventHandler_mousemove=function(e){var o=e.pageX,n=e.pageY,l=r.getBoundingClientRect(),s=void 0,d=void 0,c=r.clientWidth,u=r.clientHeight;switch(t.rotateDeg){case 0:s=o-l.left,d=n-l.top;break;case 90:s=n-l.top,d=u-(o-l.left);break;case 180:s=c-(o-l.left),d=u-(n-l.top);break;case 270:s=c-(n-l.top),d=o-l.left;break;default:s=o-l.left,d=n-l.top}var h=s/c*100,f=d/u*100;return i.style.left=h+"%",i.style.top=f+"%",clearTimeout(t.laserTimer),t.laserTimer=setTimeout(function(){if(t.laserPosition&&(Math.abs(h-t.laserPosition.left)>.3||Math.abs(f-t.laserPosition.top)>.3)){var e={laser:{left:h,top:f},action:{actionName:"move"}};t.laserPosition=e.laser,a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",e)}},100),!1},t._laserEventHandler_mouseenter=function(e){var o={action:{actionName:"show"}};return a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",o),i.style.display="block",!1},t._laserEventHandler_mouseleave=function(e){var o={action:{actionName:"hide"}};return a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",o),i.style.display="none",!1},a._changeWhiteboardTemporaryDeawPermission(!1,t),t.selectLaserTool=!0,w.removeEvent(r,"mousemove",t._laserEventHandler_mousemove),w.removeEvent(n,"mouseenter",t._laserEventHandler_mouseenter),w.removeEvent(n,"mouseleave",t._laserEventHandler_mouseleave),r.className=r.className.replace(/ cursor-none/g,""),r.className+=" cursor-none",t.laserPosition=t.laserPosition||{left:0,top:0},w.addEvent(r,"mousemove",t._laserEventHandler_mousemove),w.addEvent(n,"mouseenter",t._laserEventHandler_mouseenter),w.addEvent(n,"mouseleave",t._laserEventHandler_mouseleave);else if(a._changeWhiteboardTemporaryDeawPermission("tool_mouse"!==e,t),w.removeEvent(r,"mousemove",t._laserEventHandler_mousemove),w.removeEvent(n,"mouseenter",t._laserEventHandler_mouseenter),w.removeEvent(n,"mouseleave",t._laserEventHandler_mouseleave),r.className=r.className.replace(/ cursor-none/g,""),i.style.display="none",t.selectLaserTool){var l={action:{actionName:"hide"}};a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",l),t.selectLaserTool=!1}};a._automaticTraverseWhiteboardInstance(t,o)}},{key:"_sendSignallingToServer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.idPrefix,o=t.data,n=t.signallingName,r=t.assignId,i=t.do_not_save,l=t.expiresabs,s=t.associatedMsgID,d=t.associatedUserID;if(!e)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance is not exist!");if(e.handler&&e.handler.sendSignallingToServer&&"function"==typeof e.handler.sendSignallingToServer){var c=e.filedata,u=c.currpage,h=c.fileid;if(void 0===u||void 0===h)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+u+","+h+"]!");o&&"string"==typeof o&&(o=JSON.parse(o)),o.whiteboardID=e.id,o.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(o.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),s=s||e.associatedMsgID,d=d||e.associatedUserID;var f=r||a+"###_"+n+"_"+h+"_"+u,g="__allExceptSender";"shapeSaveEvent"!==o.eventType&&"undoEvent"!==o.eventType&&"redoEvent"!==o.eventType&&"clearEvent"!==o.eventType||(g="__all");var p=Object.customAssign({},o);this._saveBasicTemplateWhiteboardSignallingData({signallingName:n,id:f,toID:g,data:p,do_not_save:i,expiresabs:l,associatedMsgID:s,associatedUserID:d},"pubmsg"),e.handler.sendSignallingToServer(n,f,g,o,i,l,s,d)}}},{key:"_delSignallingToServer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.idPrefix,o=t.data,n=t.signallingName,r=t.assignId;if(!e)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance is not exist!");if(e.handler&&e.handler.delSignallingToServer&&"function"==typeof e.handler.delSignallingToServer){var i=e.filedata,l=i.currpage,s=i.fileid;if(void 0===l||void 0===s)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+l+","+s+"]!");o.whiteboardID=e.id,o.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(o.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID);var d=r||a+"###_"+n+"_"+s+"_"+l,c="__allExceptSender";"shapeSaveEvent"!==o.eventType&&"undoEvent"!==o.eventType&&"redoEvent"!==o.eventType&&"clearEvent"!==o.eventType||(c="__all");var u=Object.customAssign({},o);this._saveBasicTemplateWhiteboardSignallingData({signallingName:n,id:d,toID:c,data:u},"delmsg"),e.handler.delSignallingToServer(n,d,c,o)}}},{key:"_sendWhiteboardMessageToSignallingServer",value:function(e,t,a){var o=this,n=void 0,r=void 0,i=void 0,l=void 0,s=void 0,d=void 0,c=void 0;switch(t){case"shapeSaveEvent":null==(d=LC.shapeToJSON(a.shape))||null==d.className||"LinePath"!=d.className&&"ErasedLinePath"!=d.className||(d.data.smoothedPointCoordinatePairs=null,delete d.data.smoothedPointCoordinatePairs,d.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})),c={eventType:t,actionName:a.action.actionName,shapeId:a.shapeId,data:d},n=a.shapeId,r=c,i="SharpsChange",l=void 0,s=void 0,o._sendSignallingToServer(e,{idPrefix:n,data:r,signallingName:i,assignId:l,do_not_save:s});break;case"undoEvent":if("AddShapeAction"===a.action.actionName){var u=a.action.shapeId;c={eventType:t,actionName:a.action.actionName,shapeId:u},n=u,r=c,i="SharpsChange",l=void 0,o._delSignallingToServer(e,{idPrefix:n,data:r,signallingName:i,assignId:l})}else if("ClearAction"===a.action.actionName){var h=a.action.id;c={eventType:t,actionName:a.action.actionName,clearActionId:h},n=h,r=c,i="SharpsChange",l=void 0,o._delSignallingToServer(e,{idPrefix:n,data:r,signallingName:i,assignId:l})}break;case"redoEvent":if("AddShapeAction"===a.action.actionName){null==(d=LC.shapeToJSON(a.action.shape))||null==d.className||"LinePath"!=d.className&&"ErasedLinePath"!=d.className||(d.data.smoothedPointCoordinatePairs=null,delete d.data.smoothedPointCoordinatePairs,d.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])}));var f=a.action.shapeId,g={authorUserId:a.action.authorUserId,seq:a.action.seq};c={eventType:t,actionName:a.action.actionName,shapeId:f,data:d,otherInfo:g};var p=f,m=c;o._sendSignallingToServer(e,{idPrefix:p,data:m,signallingName:"SharpsChange",assignId:void 0,do_not_save:void 0})}else if("ClearAction"===a.action.actionName){var v=a.action.id,b={authorUserId:a.action.authorUserId,seq:a.action.seq,toAuthorUserId:a.action.toAuthorUserId};c={eventType:t,actionName:a.action.actionName,clearActionId:v,otherInfo:b},n=v,r=c,i="SharpsChange",l=void 0,s=void 0,o._sendSignallingToServer(e,{idPrefix:n,data:r,signallingName:i,assignId:l,do_not_save:s})}break;case"clearEvent":var y=a.clearActionId;c={eventType:t,actionName:a.action.actionName,clearActionId:y},n=y,r=c,i="SharpsChange",l=void 0,s=void 0,e&&e.undoRedoClearToMySelf&&e.myselfId&&(c.toAuthorUserId=e.myselfId),o._sendSignallingToServer(e,{idPrefix:n,data:r,signallingName:i,assignId:l,do_not_save:s});break;case"laserMarkEvent":c={eventType:t,actionName:a.action.actionName},a&&a.laser&&(c.laser=a.laser),n="laserMarkEvent",r=c,i="SharpsChange",l=void 0,s=!0,o._sendSignallingToServer(e,{idPrefix:n,data:r,signallingName:i,assignId:l,do_not_save:s})}}},{key:"_updateTextFont",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.fontSize,a=e.whiteboardToolsInfo.fontFamily,o=e.whiteboardToolsInfo.fontStyle,n=e.whiteboardToolsInfo.fontWeight,r=e.lc.tool;"Text"==r.name&&(r.font=o+" "+n+" "+t+"px "+a)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateEraserWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.eraserWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updatePencilWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.pencilWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateShapeWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.shapeWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateColor",value:function(e,t){var a=this;if(t&&"object"===(void 0===t?"undefined":(0,u.default)(t))){var o=function(e){var a=!0,o=!1,n=void 0;try{for(var i,l=(0,p.default)((0,r.default)(t));!(a=(i=l.next()).done);a=!0){var s=i.value;if(e.lc.setColor(s,e.whiteboardToolsInfo[s+"Color"]),"primary"===s&&"tool_highlighter"===e.activeTool){var d=e.whiteboardToolsInfo[s+"Color"].colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");e.lc.setColor(s,d)}}}catch(e){o=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw n}}};a._automaticTraverseWhiteboardInstance(e,o)}}},{key:"_actionIsDisable",value:function(e){var t=this,a=function(e){if(e.active){if(0===e.lc.shapes.length){var a=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}else{var o=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];if(e.undoRedoClearToMySelf&&e.myselfId){o=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];for(var n=0;n<e.lc.shapes.length;n++)if(e.lc.shapes[n].authorUserId===e.myselfId){o=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];break}}t._batchUpdateToolDesc(e,o),t._noticeUpdateToolDesc(e)}e.lc.canRedo()?(t._updateToolDesc(e,"action_redo",{disabled:!1}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"action_redo",{disabled:!0}),t._noticeUpdateToolDesc(e)),e.lc.canUndo()?(t._updateToolDesc(e,"action_undo",{disabled:!1}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"action_undo",{disabled:!0}),t._noticeUpdateToolDesc(e))}};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_zoomIsDisable",value:function(e){var t=this,a=function(e){if(e.active){if(e.whiteboardMagnification<=t.minMagnification){var a=[["zoom_small",{disabled:!0}],["zoom_default",{disabled:!0}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}else{var o=[["zoom_small",{disabled:!1}],["zoom_default",{disabled:!1}]];t._batchUpdateToolDesc(e,o),t._noticeUpdateToolDesc(e)}e.whiteboardMagnification>=t.maxMagnification?(t._updateToolDesc(e,"zoom_big",{disabled:!0}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"zoom_big",{disabled:!1}),t._noticeUpdateToolDesc(e))}};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_automaticTraverseWhiteboardInstance",value:function(e,t){var a=this;if(e)t&&"function"==typeof t&&t(e);else{var o=!0,n=!1,r=void 0;try{for(var i,l=(0,p.default)((0,f.default)(a.whiteboardInstanceStore));!(o=(i=l.next()).done);o=!0){var s=i.value;t&&"function"==typeof t&&t(s)}}catch(e){n=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}}}},{key:"_saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance",value:function(e){for(var t=!1,a=0;a<this.awaitSaveToWhiteboardInstanceSignallingArray.length;a++){var o=this.awaitSaveToWhiteboardInstanceSignallingArray[a];if(o.data&&"string"==typeof o.data&&(o.data=JSON.parse(o.data)),o.data.whiteboardID===e.id){var n=o.id.substring(o.id.lastIndexOf("###_")+4);null==e.waitingProcessShapeData[n]||void 0==e.waitingProcessShapeData[n]?(e.waitingProcessShapeData[n]=[],e.waitingProcessShapeData[n].push(o)):e.waitingProcessShapeData[n].push(o),t=!0,this.awaitSaveToWhiteboardInstanceSignallingArray.splice(a,1,null)}}if(t)for(var r=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;r>=0;r--)null===this.awaitSaveToWhiteboardInstanceSignallingArray[r]&&this.awaitSaveToWhiteboardInstanceSignallingArray.splice(r,1)}},{key:"_basicTemplateWhiteboardSignallingListToWhiteboardInstance",value:function(e){e.needLooadBaseboard&&!e.isBaseboard&&void 0!==e.dependenceBaseboardWhiteboardID&&!e.isHandleBasicTemplateWhiteboardSignallingList&&e.id!==e.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]&&Array.isArray(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID])&&(this._batchReceiveSnapshot(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID],e),e.isHandleBasicTemplateWhiteboardSignallingList=!0)}},{key:"_convertCanvasToImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";if(e&&e.lc&&e.lc.canvas){var a=e.lc.canvas,o=new Image;return o.src=a.toDataURL("image/"+t),o}}},{key:"_convertCanvasToImageBase64",value:function(e,t){if(e&&e.lc&&e.lc.canvas)return e.lc.canvas.toDataURL("image/"+t)}},{key:"_saveBasicTemplateWhiteboardSignallingData",value:function(e,t){e.data.isBaseboard&&e&&e.data&&e.data.isBaseboard&&void 0!==e.data.whiteboardID&&(e.source=t,this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]=this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]||[],this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID].push(e))}},{key:"_handlerShowRemoteRemindContentFromPubmsgData",value:function(e,t){var a=void 0,o=void 0,n=void 0;if("pubmsg"===t.source&&t.data&&"shapeSaveEvent"===t.data.eventType)if("LinePath"==t.data.data.className){var r=t.data.data.points.length;r>0&&(a=t.data.data.points[r-1].x,o=t.data.data.points[r-1].y,n=t.remindContent),this._productionWhiteboardRemindContent(e,a,o,n,t.data.shapeId)}else"Rectangle"==t.data.data.className||"Ellipse"==t.data.data.className?(t.data.data.width>0&&t.data.data.height>0?(a=t.data.data.x+t.data.data.width,o=t.data.data.y):t.data.data.width>0&&t.data.data.height<0?(a=t.data.data.x+t.data.data.width,o=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height<0?(a=t.data.data.x,o=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height>0&&(a=t.data.data.x,o=t.data.data.y),n=t.remindContent,this._productionWhiteboardRemindContent(e,a,o,n,t.data.shapeId)):"Text"==t.data.data.className?(a=t.data.data.x+t.data.data.renderer.metrics.width,o=t.data.data.y+20*t.data.data.renderer.metricses.length,n=t.remindContent,this._productionWhiteboardRemindContent(e,a,o,n,t.data.shapeId)):"Line"==t.data.data.className&&(a=t.data.data.x2,o=t.data.data.y2,n=t.remindContent,this._productionWhiteboardRemindContent(e,a,o,n,t.data.shapeId))}}]),e}(),T=new S;t.default=T},uRtX:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},uy8w:function(e,t,a){var o=a("MITN");o(o.S,"Object",{create:a("OTtE")})},vuzV:function(e,t,a){a("6/+b")("observable")},w5fS:function(e,t){},wCtA:function(e,t,a){"use strict";var o=a("RNB/")(!0);a("4ztK")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=o(t,a),this._i+=e.length,{value:e,done:!1})})},xSur:function(e,t,a){"use strict";t.__esModule=!0;var o=a("liLe"),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}()},xVzf:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},xXu8:function(e,t,a){var o=a("uRtX");e.exports=function(e,t){if(!o(e))return e;var a,n;if(t&&"function"==typeof(a=e.toString)&&!o(n=a.call(e)))return n;if("function"==typeof(a=e.valueOf)&&!o(n=a.call(e)))return n;if(!t&&"function"==typeof(a=e.toString)&&!o(n=a.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},yE5a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=void 0,t=void 0,a=void 0,o=void 0,n=void 0;this.getTkRoom=function(){return e},this.getRoomName=function(){return t},this.setTkRoom=function(t){e=t},this.setRoomName=function(e){t=e},this.getLocalStream=function(){return o},this.setLocalStream=function(e){o=e},this.getUserName=function(){return a},this.setUserName=function(e){a=e},this.getUserThirdid=function(){return n},this.setUserThirdid=function(e){n=e},this.clearAll=function(){e=null,t=null,a=null,o=null,n=null}};t.default=new o},yZ13:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={header:{tool:{blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous one",next:"Next person",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Again Send",commonTeacher:"Teacher"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text Input",eraser:"Eraser",color:"Colors and Thickness"}},colorAndMeasure:{title:"Colors and Thickness",selectColorText:"select Colour",selectMeasure:"select Thickness"}}},alertWin:{ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}}}};t.default=o},yjjd:function(e,t,a){a("bJSL"),e.exports=a("UusJ").Object.getPrototypeOf}},[0]);