webpackJsonp([2,0],{0:function(e,t,a){e.exports=a(259)},41:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),i=o(n);window.GLOBAL=window.GLOBAL||{};var r=window.GLOBAL;r.classBegin=!1,r.endClassBegin=!1,r.routeName=void 0,r.playback=!1,r.playPptVideoing=!1,r.playMediaFileing=!1,r.serviceTime=void 0,r.firstGetServiceTime=!1,r.isHandleMsglist=!1,r.remindServiceTime=void 0,r.classBeginTime=void 0,r.isSkipPageing=!1,r.isClient=!1,r.isBroadcast=!1,r.mobileDeviceType=void 0,r.windowInnerWidth=window.innerWidth,r.windowInnerHeight=window.innerHeight;var l=i.default.getBrowserInfo();L.Logger.info("浏览器 browserInfo:"+JSON.stringify(l)),r.isMobile=l.versions.mobile||l.versions.ios||l.versions.android||l.versions.iPhone||l.versions.iPad,r.isBroadcastClient=r.isClient&&r.isBroadcast,r.isBroadcastMobile=r.isMobile&&r.isBroadcast,r.languageName="ch"===i.default.getUrlParams("languageType")?"chinese":"tw"===i.default.getUrlParams("languageType")?"complex":"english",r.defaultFileInfo={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0},r.showRemoteRemindContent=!1,t.default=r,e.exports=t.default},42:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};a.Document=TK.EventDispatcher({}),a.Window=TK.EventDispatcher({}),a.Element=TK.EventDispatcher({}),a.Room=TK.EventDispatcher({}),a.Stream=TK.EventDispatcher({}),a.Role=TK.EventDispatcher({}),t.default=a,e.exports=t.default},50:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=void 0,t=void 0,a=void 0,o=void 0,n=void 0;this.getTkRoom=function(){return e},this.getRoomName=function(){return t},this.setTkRoom=function(t){e=t},this.setRoomName=function(e){t=e},this.getLocalStream=function(){return o},this.setLocalStream=function(e){o=e},this.getUserName=function(){return a},this.setUserName=function(e){a=e},this.getUserThirdid=function(){return n},this.setUserThirdid=function(e){n=e},this.clearAll=function(){e=null,t=null,a=null,o=null,n=null}};t.default=new a,e.exports=t.default},51:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),i=o(n),r=a(42),l=o(r),s=a(41),d=(o(s),{}),c="v2.1.0",u="2017120622",h=!1;try{c="2.1.0",u=2017120622,h=!1}catch(e){L.Logger.warning("There is no configuration version number and version time[__VERSIONS__ , __VERSIONSTIME__]!"),L.Logger.warning("There is no configuration dev mark[__DEV__]!")}d.VERSIONS=c,d.VERSIONSTIME=u,d.newpptVersions=2017091401,d.remoteNewpptUpdateTime=201712062201,d.debugFromAddress=!!i.default.getUrlParams("debug")&&""!=i.default.getUrlParams("debug"),d.DEV=h||d.debugFromAddress,d.role={},Object.defineProperties(d.role,{roleChairman:{value:0,writable:!1},roleTeachingAssistant:{value:1,writable:!1},roleStudent:{value:2,writable:!1},roleAudit:{value:3,writable:!1},rolePatrol:{value:4,writable:!1},rolePlayback:{value:-1,writable:!1}});var g={};Object.defineProperties(g,{roomPubmsg:{value:"room-pubmsg",writable:!1,enumerable:!0},roomDelmsg:{value:"room-delmsg",writable:!1,enumerable:!0},roomMsglist:{value:"room-msglist",writable:!1,enumerable:!0}});var p={};Object.defineProperties(p,{onResize:{value:"onResize",writable:!1}}),Object.defineProperties(p,{onMessage:{value:"onMessage",writable:!1}});var f={};Object.defineProperties(f,{onKeydown:{value:"onKeydown",writable:!1},onFullscreenchange:{value:"onFullscreenchange",writable:!1}}),d.EVENTTYPE={},Object.defineProperties(d.EVENTTYPE,{RoomEvent:{value:g,writable:!1},WindowEvent:{value:p,writable:!1},DocumentEvent:{value:f,writable:!1}}),d.ROOMTYPE={},Object.defineProperties(d.ROOMTYPE,{oneToOne:{value:0,writable:!1}}),d.PUBLISHSTATE={},Object.defineProperties(d.PUBLISHSTATE,{PUBLISH_STATE_NONE:{value:TK.PUBLISH_STATE_NONE,writable:!1},PUBLISH_STATE_AUDIOONLY:{value:TK.PUBLISH_STATE_AUDIOONLY,writable:!1},PUBLISH_STATE_VIDEOONLY:{value:TK.PUBLISH_STATE_VIDEOONLY,writable:!1},PUBLISH_STATE_BOTH:{value:TK.PUBLISH_STATE_BOTH,writable:!1},PUBLISH_STATE_MUTEALL:{value:TK.PUBLISH_STATE_MUTEALL,writable:!1}}),d.STANDARDSIZE=15.8,d.companyidToCompanyName={10035:{value:"icoachu",writable:!1,enumerable:!0},10036:{value:"stupidBird",writable:!1,enumerable:!0},10059:{value:"17zuoye",writable:!1,enumerable:!0}},d.LOGLEVEL={},Object.defineProperties(d.LOGLEVEL,{DEBUG:{value:0,writable:!1},TRACE:{value:1,writable:!1},INFO:{value:2,writable:!1},WARNING:{value:3,writable:!1},ERROR:{value:4,writable:!1},NONE:{value:5,writable:!1}}),d.SERVICEINFO={},d.bindServiceinfoToTkConstant=function(e,t,a){var o=arguments.length<=3||void 0===arguments[3]||arguments[3],n=TK.global.initPageParameterFormPhone.serviceUrl.address.split("://");e=e||n[0],t=t||n[1],a=a||TK.global.initPageParameterFormPhone.serviceUrl.port;var r={protocol:e,hostname:t,port:a,sdkPort:443,protocolAndHostname:e+"://"+t,address:e+"://"+t+":"+a};o&&(r.joinUrl=i.default.encrypt(window.location.href)),Object.assign(d.SERVICEINFO,r),o&&console.info("encrypt_tk_info:\n",d.SERVICEINFO.joinUrl),l.default&&l.default.CoreController&&l.default.CoreController.dispatchEvent&&l.default.CoreController.dispatchEvent({type:"bindServiceinfoToTkConstant",message:{SERVICEINFO:d.SERVICEINFO}})},d.joinRoomInfo={},d.bindRoomInfoToTkConstant=function(e){return e?(L.Logger.debug("joinRoomInfo:",e),d.joinRoomInfo=e,void l.default.CoreController.dispatchEvent({type:"bindRoomInfoToTkConstant",message:{joinRoomInfo:d.joinRoomInfo}})):void L.Logger.error("joinRoomInfo is not exist!")},d.hasRole={},d.bindParticipantHasRoleToTkConstant=function(){return d.joinRoomInfo?(Object.defineProperties(d.hasRole,{roleChairman:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleChairman,writable:!1},roleTeachingAssistant:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleTeachingAssistant,writable:!1},roleStudent:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleStudent,writable:!1},roleAudit:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleAudit,writable:!1},rolePatrol:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.rolePatrol,writable:!1},rolePlayback:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.rolePlayback,writable:!1}}),void l.default.CoreController.dispatchEvent({type:"bindParticipantHasRoleToTkConstant",message:{hasRole:d.hasRole}})):void L.Logger.error("TkConstant.joinRoomInfo is not exist!")},d.hasRoomtype={},d.bindParticipantHasRoomtypeToTkConstant=function(){return d.joinRoomInfo?(Object.defineProperties(d.hasRoomtype,{oneToOne:{value:d.joinRoomInfo&&d.joinRoomInfo.roomtype===d.ROOMTYPE.oneToOne,writable:!1}}),void l.default.CoreController.dispatchEvent({type:"bindParticipantHasRoomtypeToTkConstant",message:{hasRoomtype:d.hasRoomtype}})):void L.Logger.error("TkConstant.joinRoomInfo is not exist!")},window.TkConstant=d,t.default=d,e.exports=t.default},52:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n={tool:{launchFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()},isFullScreenStatus:function(e){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1},getFullscreenElement:function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;return e},isFullscreenEnabled:function(){var e=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled;return e},runPrefixMethod:function(e,t){var a=void 0;return["webkit","moz","ms","o",""].forEach(function(o){if(!a){""===o&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var n=typeof e[o+t];n+""!="undefined"&&(a="function"===n?e[o+t]():e[o+t])}}),a},addFullscreenchange:function(e){n.tool.addEvent(document,"fullscreenchange",e,!1),n.tool.addEvent(document,"webkitfullscreenchange",e,!1),n.tool.addEvent(document,"mozfullscreenchange",e,!1),n.tool.addEvent(document,"MSFullscreenChange",e,!1),n.tool.addEvent(document,"msfullscreenchange",e,!1),n.tool.addEvent(document,"fullscreeneventchange",e,!1)},removeFullscreenchange:function(e){n.tool.removeEvent(document,"fullscreenchange",e,!1),n.tool.removeEvent(document,"webkitfullscreenchange",e,!1),n.tool.removeEvent(document,"mozfullscreenchange",e,!1),n.tool.removeEvent(document,"MSFullscreenChange",e,!1),n.tool.removeEvent(document,"msfullscreenchange",e,!1),n.tool.removeEvent(document,"fullscreeneventchange",e,!1)},addFullscreenerror:function(e){n.tool.addEvent(document,"fullscreenerror",e,!1),n.tool.addEvent(document,"webkitfullscreenerror",e,!1),n.tool.addEvent(document,"mozfullscreenerror",e,!1),n.tool.addEvent(document,"MSFullscreenError",e,!1),n.tool.addEvent(document,"msfullscreenerror",e,!1),n.tool.addEvent(document,"fullscreenerroreventchange",e,!1)},removeFullscreenerror:function(e){n.tool.removeEvent(document,"fullscreenerror",e,!1),n.tool.removeEvent(document,"webkitfullscreenerror",e,!1),n.tool.removeEvent(document,"mozfullscreenerror",e,!1),n.tool.removeEvent(document,"MSFullscreenError",e,!1),n.tool.removeEvent(document,"msfullscreenerror",e,!1),n.tool.removeEvent(document,"fullscreenerroreventchange",e,!1)},addEvent:function(e,t,a,o){o=void 0!=o&&null!=o&&o,e.addEventListener?e.addEventListener(t,a,o):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,o){e.addEventListener?e.removeEventListener(t,a,o):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},fireEvent:function(e,t){if(document.createEventObject){var a=document.createEventObject();return e.fireEvent("on"+t,a)}var a=document.createEvent("HTMLEvents");return a.initEvent(t,!0,!0),!e.dispatchEvent(a)},autoElementPositionCneter:function(e){e.css({"margin-left":-e.width()/2+"px","margin-top":-e.height()/2+"px"})},clearElementPositionCneter:function(e){e.css({"margin-left":"","margin-top":""})}},getGUID:function(){function e(){this.date=new Date,"function"!=typeof this.newGUID&&(e.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),a=this.hexadecimal(this.getGUIDTime(),16),o=0;o<9;o++)e+=Math.floor(16*Math.random()).toString(16);for(e+=t,e+=a;e.length<32;)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},e.prototype.hexadecimal=function(e,t,a){return void 0!=a?parseInt(e.toString(),a).toString(t):parseInt(e.toString()).toString(t)},e.prototype.formatGUID=function(e){var t=e.slice(0,8)+"-",a=e.slice(8,12)+"-",o=e.slice(12,16)+"-",n=e.slice(16,20)+"-",i=e.slice(20);return t+a+o+n+i})}return new e},getNewGUID:function(){n.guidObj||(n.guidObj=new n.getGUID);var e=n.guidObj.newGUID();return n.guidObj=null,e},getBrowserInfo:function(){var e=window.navigator.userAgent,t=/(msie\s|trident.*rv:)([\w.]+)/,a=/(firefox)\/([\w.]+)/,o=/(opera).+version\/([\w.]+)/,n=/(chrome)\/([\w.]+)/,i=/version\/([\w.]+).*(safari)/,r=function(e){var r=t.exec(e);return null!=r?{browser:"IE",version:r[2]||"0"}:(r=a.exec(e),null!=r?{browser:r[1]||"",version:r[2]||"0"}:(r=o.exec(e),null!=r?{browser:r[1]||"",version:r[2]||"0"}:(r=n.exec(e),null!=r?{browser:r[1]||"",version:r[2]||"0"}:(r=i.exec(e),null!=r?{browser:r[2]||"",version:r[1]||"0"}:null!=r?{browser:"",version:"0"}:{browser:"unknown",version:"unknown"}))))},l=r(e.toLowerCase()),s={versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),info:{browserName:l.browser,browserVersion:l.version,appCodeName:navigator.appCodeName,appMinorVersion:navigator.appMinorVersion,appName:navigator.appName,appVersion:navigator.appVersion,browserLanguage:navigator.browserLanguage,cookieEnabled:navigator.cookieEnabled,cpuClass:navigator.cpuClass,onLine:navigator.onLine,platform:navigator.platform,systemLanguage:navigator.systemLanguage,userAgent:navigator.userAgent,userLanguage:navigator.userLanguage}};return s},isEmpty:function(e){var t=Object.keys(e);return 0===t.length},getUrlParams:function(e,t){var a=window.location.href;window.TkConstant&&(a=n.decrypt(window.TkConstant.SERVICEINFO.joinUrl)||window.location.href),a=t||a;var o=decodeURIComponent(a),i=o.indexOf("?"),r=o.substring(i+1),l=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s=r.match(l);return null!=s?s[2]:""},replaceFirstUper:function(e){if(e.length>0){var t=e.substring(0,1).toUpperCase(),a=e.substring(1),o=t+a;return o}},isArray:function(e){return Array&&Array.isArray&&"function"==typeof Array.isArray?Array.isArray(e):e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},filterContainDataAttribute:function(e){var t=n;if(e&&!t.isArray(e)&&"object"==typeof e){var a={},i=!0,r=!1,l=void 0;try{for(var s,d=Object.entries(e)[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=o(s.value,2),u=c[0],h=c[1];/^data-/g.test(u)&&(a[u]=h)}}catch(e){r=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(r)throw l}}return a}return e},getFiletyeByFilesuffix:function(e){var t=void 0;return t="jpg"==e||"jpeg"==e||"png"==e||"gif"==e||"ico"==e||"bmp"==e?"jpg":"doc"==e||"docx"==e||"rtf"==e?"doc":"pdf"==e?"pdf":"ppt"==e||"pptx"==e||"pps"==e?"ppt":"txt"==e?"txt":"xls"==e||"xlsx"==e?"xlsx":"mp4"==e||"webm"==e?"mp4":"mp3"==e||"wav"==e?"mp3":"zip"==e?"h5":"whiteboard"===e?"whiteboard":"other"},isFunction:function(e){return e&&"function"==typeof e},getCustomUserPropertyByUser:function(e){var t={disableaudio:e.disableaudio,disablevideo:e.disablevideo,giftnumber:e.giftnumber,hasaudio:e.hasaudio,hasvideo:e.hasvideo,publishstate:e.publishstate,raisehand:e.raisehand};return t},getTimeDifferenceToFormat:function(e,t){var a=t-e;if(a>=0){var o=Math.floor(a/864e5),n=a%864e5,i=Math.floor(n/36e5),r=n%36e5,l=Math.floor(r/6e4),s=r%6e4,d=Math.round(s/1e3),c=i+24*o,u={};return d>=60&&(d=0,l+=1),l>=60&&(l=0,c+=1),u.hh=c>9?c:"0"+c,u.mm=l>9?l:"0"+l,u.ss=d>9?d:"0"+d,u}return void L.Logger.error("Start time is greater than end time [start:"+e+"  , end:"+t+"]!")},isMillisecondClass:function(e){if("number"!=typeof e)return void L.Logger.error("time must is number!");e=String(e);var t=e.length;return 13===t||10!==t&&void L.Logger.warning("The incoming time is incorrect and cannot be judged to be second or second!")},encrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a||n.getUrlParams("debug"))return e}return L.Utils.encrypt(e,t)},decrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a=!1,a||n.getUrlParams("debug"))return e}return L.Utils.decrypt(e,t)},detectOS:function(){var e=navigator.userAgent,t="Win32"===navigator.platform||"Windows"===navigator.platform,a="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(a)return"Mac";var o="X11"===navigator.platform&&!t&&!a;if(o)return"Unix";var n=String(navigator.platform).indexOf("Linux")>-1;if(n)return"Linux";if(t){var i=e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1;if(i)return"Win2000";var r=e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1;if(r)return"WinXP";var l=e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1;if(l)return"Win2003";var s=e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1;if(s)return"WinVista";var d=e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1;if(d)return"Win7";var c=e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1;if(c)return"Win8";var u=e.indexOf("Windows NT 10.0")>-1||e.indexOf("Windows 10")>-1;if(u)return"Win10"}return"Other"},internetSpeedTest:function(){},percentageChangeToRem:function(e,t,a,o){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(o),r=i.clientWidth,l=i.clientHeight,s=window.GLOBAL.windowInnerWidth,d=window.GLOBAL.windowInnerHeight;return e.state[o].left=t*(s-r)/n,e.state[o].top=a*(d-l)/n,e.state[o]},RemChangeToPercentage:function(e,t,a,o){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(o),r=i.clientWidth,l=i.clientHeight,s=window.GLOBAL.windowInnerWidth,d=window.GLOBAL.windowInnerHeight,c=t/(s-r)*n,u=a/(d-l)*n;return{percentLeft:c,percentTop:u}},controlDragBounds:function(e,t,a){var o=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,n=document.getElementById(t),i=n.clientWidth/o,r=n.clientHeight/o,l=document.getElementById(a),s=l.clientWidth/o,d=l.clientHeight/o;return e.state[t].left=e.state[t].left<0?e.state[t].left=0:e.state[t].left,e.state[t].left=e.state[t].left>s-i?s-i:e.state[t].left,e.state[t].top=e.state[t].top<0?e.state[t].top=0:e.state[t].top,e.state[t].top=e.state[t].top>d-r?d-r:e.state[t].top,e.state[t]}};t.default=n,e.exports=t.default},78:function(e,t,a){(function(o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(42),r=n(i),l=a(253),s=n(l),d=a(51),c=n(d),u=a(41),h=n(u),g=a(52),p=n(g),f=a(165),m=n(f),v=a(250),b=n(v),y=a(50),w=n(y),S=a(252),T=n(S),_=TK.EventDispatcher({});r.default.CoreController=_,_.handler={},_.handler.loadSystemRequiredInfo=function(){if(document.oncontextmenu=null,document.oncontextmenu=function(){return!1},window.onbeforeunload=null,window.onbeforeunload=function(){},TK.tkLogPrintConfig)if(c.default.DEV){var e={debug:!0},t={development:!0,logLevel:c.default.LOGLEVEL.DEBUG},a={webrtcLogDebug:!0};TK.tkLogPrintConfig(e,t,a)}else{var e={debug:!1},t={development:!1,logLevel:c.default.LOGLEVEL.INFO},a={webrtcLogDebug:!1};TK.tkLogPrintConfig(e,t,a)}b.default.getAppLanguageInfo(function(e){h.default.language=e}),w.default.setTkRoom(TK.Room()),w.default.getTkRoom().changeExtendSendInterfaceName("_videoWhiteboardPage"),s.default.registerEventToRoom()},_.handler.setAppPermissions=function(e,t){m.default.setAppPermissions(e,t)},_.handler.getAppPermissions=function(e){return m.default.getAppPermissions(e)},_.handler.initAppPermissions=function(e){m.default.initAppPermissions(e)},_.handler.addEventListenerOnCoreController=function(){o(window).off("resize"),o(window).resize(function(){var e=document.getElementById("tk_app");e?(h.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,h.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(h.default.windowInnerWidth=window.innerWidth,h.default.windowInnerHeight=window.innerHeight);var t=h.default.windowInnerWidth/c.default.STANDARDSIZE,a=document.getElementById("all_root")||document.getElementsByTagName("html");if(a){var o=p.default.isArray(a)?a[0]:a;o&&o.style&&(o.style.fontSize=t+"px")}r.default.Window.dispatchEvent({type:c.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:t}})}),o(window).resize();var e=function(e){r.default.Window.dispatchEvent({type:c.default.EVENTTYPE.WindowEvent.onMessage,message:{event:e}})};p.default.tool.removeEvent(window,"message",e),p.default.tool.addEvent(window,"message",e,!1);var t=function(e){r.default.Document.dispatchEvent({type:c.default.EVENTTYPE.DocumentEvent.onFullscreenchange,message:{event:e}})};p.default.tool.removeFullscreenchange(t),p.default.tool.addFullscreenchange(t),"mobile"===TK.SDKTYPE&&_.handler.addEventfRromMobileUICoreEventManager()},_.handler.addEventfRromMobileUICoreEventManager=function(){"mobile"===TK.SDKTYPE&&(TK.mobileUICoreEventManager.addEventListener("mobileSdk_setInitPageParameterFormPhone",function(e){var t=e.message;if(void 0!==t.deviceType&&(h.default.mobileDeviceType=0===TK.global.initPageParameterFormPhone.deviceType?"phone":"pad",r.default.CoreController.dispatchEvent({type:"updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone"})),void 0!==t.myself&&"object"==typeof t.myself){h.default.appConnected=!0,h.default.classBegin=!0,Object.assign(w.default.getTkRoom().getMySelf(),t.myself);var a={nickname:w.default.getTkRoom().getMySelf().nickname,thirdid:w.default.getTkRoom().getMySelf().id,roomrole:Number(w.default.getTkRoom().getMySelf().role)};c.default.bindRoomInfoToTkConstant(a),c.default.bindParticipantHasRoleToTkConstant();var o=T.default.getRoleHasDefalutAppPermissions();m.default.initAppPermissions(o)}h.default.playback=TK.global.initPageParameterFormPhone.playback,void 0!==t.serviceUrl&&c.default.bindServiceinfoToTkConstant(void 0,void 0,void 0,!0)}),TK.mobileUICoreEventManager.addEventListener("mobileSdk_changeInitPageParameterFormPhone",function(e){var t=e.message;void 0!==t.deviceType&&(h.default.mobileDeviceType=0===TK.global.initPageParameterFormPhone.deviceType?"phone":"pad",r.default.CoreController.dispatchEvent({type:"updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone"})),void 0!==t.serviceUrl&&c.default.bindServiceinfoToTkConstant(void 0,void 0,void 0,!1)}))},_.handler.addEventListenerOnCoreController(),t.default=_,e.exports=t.default}).call(t,a(82))},163:function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var a=[],o=!0,n=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}();String.prototype.colorHex=function(){var e=this,t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgb|RGB)/.test(e)){for(var a=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),o="#",n=0;n<a.length;n++){var i=Number(a[n]).toString(16);"0"===i&&(i+=i),o+=i}return 7!==o.length&&(o=e),o}if(!t.test(e))return e;var r=e.replace(/#/,"").split("");if(6===r.length)return e;if(3===r.length){for(var l="#",n=0;n<r.length;n+=1)l+=r[n]+r[n];return l}},String.prototype.colorRgb=function(){var e=this.toLowerCase(),t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&t.test(e)){if(4===e.length){for(var a="#",o=1;o<4;o+=1)a+=e.slice(o,o+1).concat(e.slice(o,o+1));e=a}for(var n=[],o=1;o<7;o+=2)n.push(parseInt("0x"+e.slice(o,o+2)));return"RGB("+n.join(",")+")"}return e};var i={addEvent:function(e,t,a,o){o=void 0!=o&&null!=o&&o,e.addEventListener?e.addEventListener(t,a,o):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,o){e.addEventListener?e.removeEventListener(t,a,o):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},getOffset:function(e){for(var t={left:e.offsetLeft,top:e.offsetTop};e!=document.body;)e=e.offsetParent,t.left+=e.offsetLeft,t.top+=e.offsetTop;return t}},r=function(){function e(){a(this,e),this.whiteboardToolsInfo={primaryColor:"#000000",secondaryColor:"#ffffff",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",fontStyle:"normal",fontWeight:"normal"},this.defaultProductionOptions={whiteboardClear:!0,watermarkImageScalc:16/9,whiteboardMagnification:1,containerWidthAndHeight:{width:0,height:0},minHeight:void 0,rotateDeg:0,baseWhiteboardWidth:960,proprietaryTools:!1,deawPermission:!0,tempDeawPermission:!0,saveRedoStack:!1,saveUndoStack:!0,remindContentTime:3e3,showRemoteRemindContent:!1,showMyselfRemindContent:!1},this.whiteboardInstanceIDPrefix="whiteboard_",this.whiteboardInstanceDefaultID="whiteboard_default",this.whiteboardInstanceStore={},this.whiteboardThumbnailStore={},this.uniqueWhiteboard=!1,this.minMagnification=1,this.maxMagnification=3,this.useWhiteboardTool={tool_pencil:!1,tool_highlighter:!1,tool_line:!1,tool_arrow:!1,tool_dashed:!1,tool_eraser:!1,tool_text:!1,tool_rectangle:!1,tool_rectangle_empty:!1,tool_ellipse:!1,tool_ellipse_empty:!1,tool_polygon:!1,tool_eyedropper:!1,tool_selectShape:!1,tool_mouse:!1,tool_laser:!1,action_undo:!1,action_redo:!1,action_clear:!1,zoom_big:!1,zoom_small:!1,zoom_default:!1},this.specialWhiteboardInstanceIDPrefix="specialWhiteboardInstanceIDPrefix_",this.awaitSaveToWhiteboardInstanceSignallingArray=[],this.commonActiveTool="tool_pencil",this.basicTemplateWhiteboardSignallingList={},this.basicTemplateWhiteboardSignallingChildrenStackStorage={}}return n(e,[{key:"getSpecialWhiteboardInstanceIDPrefix",value:function(){return this.specialWhiteboardInstanceIDPrefix}},{key:"setUniqueWhiteboard",value:function(e){this.uniqueWhiteboard=e}},{key:"activeCommonWhiteboardTool",value:function(e){var t=this;/^tool_/.test(e)&&(t.commonActiveTool=e);var a=!0,o=!1,n=void 0;try{for(var i,r=Object.values(t.whiteboardInstanceStore)[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var l=i.value;if(!l.proprietaryTools){var s=l.id;t.activeWhiteboardTool(e,s)}}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}}},{key:"updateCommonWhiteboardToolsInfo",value:function(e){e&&"object"==typeof e&&Object.assign(this.whiteboardToolsInfo,e)}},{key:"getWhiteboardDefaultFiledata",value:function(e){var t={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0};return e&&"object"==typeof e&&Object.assign(t,e),t}},{key:"handlerPubmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"pubmsg");var t=e.data.whiteboardID,a=this._getWhiteboardInstanceById(t);if(!a)return e.source="pubmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);if(e&&null!=e.data&&("shapeSaveEvent"===e.data.eventType||"clearEvent"===e.data.eventType||"redoEvent"===e.data.eventType||"laserMarkEvent"===e.data.eventType||"changeZoomEvent"===e.data.eventType))if(e.source="pubmsg","laserMarkEvent"===e.data.eventType)this._receiveSnapshot(e,a);else{var o=e.id.substring(e.id.lastIndexOf("###_")+4);if(o){var n=o.split("_"),i=n[1],r=n[2],l=this.getWhiteboardFiledata(t);l.fileid==i&&l.currpage==r?(this._receiveSnapshot(e,a),a.showRemoteRemindContent&&e.remindContent&&this._handlerShowRemoteRemindContentFromPubmsgData(a,e)):null==a.waitingProcessShapeData[o]||void 0==a.waitingProcessShapeData[o]?(a.waitingProcessShapeData[o]=[],a.waitingProcessShapeData[o].push(e)):a.waitingProcessShapeData[o].push(e)}}}}},{key:"handlerDelmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"delmsg");var t=e.data.whiteboardID,a=this._getWhiteboardInstanceById(t);if(!a)return e.source="delmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);var o=e.id.substring(e.id.lastIndexOf("###_")+4);if(o){var n=o.split("_"),i=n[1],r=n[2],l=this.getWhiteboardFiledata(t);e.source="delmsg",l.fileid==i&&l.currpage==r?this._receiveSnapshot(e,a):null==a.waitingProcessShapeData[o]||void 0==a.waitingProcessShapeData[o]?(a.waitingProcessShapeData[o]=[],a.waitingProcessShapeData[o].push(e)):a.waitingProcessShapeData[o].push(e)}}}},{key:"handlerMsglist_SharpsChange",value:function(e){for(var t=0;t<e.length;t++){var a=e[t];a.data&&"string"==typeof a.data&&(a.data=JSON.parse(a.data)),void 0!==a.data.whiteboardID&&void 0!==a.data.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID]&&this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]&&(this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]=null,delete this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]),this._saveBasicTemplateWhiteboardSignallingData(a,"msglist");var o=a.data.whiteboardID,n=this._getWhiteboardInstanceById(o);if(n){if(null!=a.data&&("shapeSaveEvent"===a.data.eventType||"clearEvent"===a.data.eventType||"redoEvent"===a.data.eventType||"changeZoomEvent"===a.data.eventType)){a.source="msglist";var i=a.id.substring(a.id.lastIndexOf("###_")+4);null==n.waitingProcessShapeData[i]||void 0==n.waitingProcessShapeData[i]?(n.waitingProcessShapeData[i]=[],n.waitingProcessShapeData[i].push(a)):n.waitingProcessShapeData[i].push(a)}}else a.source="msglist",this.awaitSaveToWhiteboardInstanceSignallingArray.push(a)}}},{key:"preloadWhiteboardImg",value:function(e,t){if(!e)return void L.Logger.warning("preload img url is not esixt!");var a=new Image;a.onload=function(){t&&"function"==typeof t&&t()},a.src=e}},{key:"productionWhiteboard",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.whiteboardElementId,a=e.thumbnailId,o=e.productionOptions,n=void 0===o?{}:o,i=e.handler,r=void 0===i?{}:i,l=e.id,s=this;if(!t)return void L.Logger.error("whiteboardElementId is required!");var d=s._getWhiteboardInstanceID(l),c=s._getWhiteboardInstanceByID(d);if(c)return L.Logger.error("The production whiteboard(whiteboardInstanceID:"+d+") fails, the whiteboard already exists!"),c;c={};var u=document.getElementById(t);if(!u)return L.Logger.error("Whiteboard elements do not exist , element id is:"+t+"!"),c;var h=document.createElement("div"),g=t+"_whiteboardInstance";return h.className="whiteboard-instance-element",h.id=g,u.appendChild(h),n=Object.assign({},s.defaultProductionOptions,n),s.whiteboardInstanceStore[d]=c,c.filedata=n.filedata||{},c.baseWhiteboardWidth=n.baseWhiteboardWidth,c.whiteboardInstanceID=d,c.parcelAncestorElementId=n.parcelAncestorElementId,c.isBaseboard=n.isBaseboard,c.needLooadBaseboard=n.needLooadBaseboard,c.dependenceBaseboardWhiteboardID=n.dependenceBaseboardWhiteboardID,c.watermarkImageScalc=n.watermarkImageScalc,c.whiteboardMagnification=n.whiteboardMagnification,c.remindContentTime=n.remindContentTime,c.showRemoteRemindContent=n.showRemoteRemindContent,c.showMyselfRemindContent=n.showMyselfRemindContent,c.associatedMsgID=n.associatedMsgID,c.associatedUserID=n.associatedUserID,c.proprietaryTools=n.proprietaryTools,
c.minHeight=n.minHeight,c.rotateDeg=n.rotateDeg,c.deawPermission=n.deawPermission,c.tempDeawPermission=n.tempDeawPermission,c.nickname=n.nickname,c.userid=n.userid,c.whiteboardToolsInfo=Object.assign({},s.whiteboardToolsInfo),n.primaryColor&&(c.whiteboardToolsInfo.primaryColor=n.primaryColor),n.secondaryColor&&(c.whiteboardToolsInfo.secondaryColor=n.secondaryColor),n.backgroundColor&&(c.whiteboardToolsInfo.backgroundColor=n.backgroundColor),c.saveRedoStack=n.saveRedoStack,c.saveUndoStack=n.saveUndoStack,c.imageThumbnailId=n.imageThumbnailId,c.imageThumbnailTipContent=n.imageThumbnailTipContent,c.registerWhiteboardToolsList={},c.stackStorage={},c.handler={},c.handler.sendSignallingToServer=r.sendSignallingToServer,c.handler.delSignallingToServer=r.delSignallingToServer,c.handler.resizeWhiteboardSizeCallback=r.resizeWhiteboardSizeCallback,c.handler.noticeUpdateToolDescCallback=r.noticeUpdateToolDescCallback,c.active=!0,c.containerWidthAndHeight=n.containerWidthAndHeight,c.useToolKey=n.useToolKey,c.waitingProcessShapeData={},c.whiteboardElementId=t,c.whiteboardElement=u,c.whiteboardInstanceElementId=g,c.whiteboardInstanceElement=h,c.id=l,c.thumbnailId=a,c.lc=window.LC.init(c.whiteboardInstanceElement),c.lc.backingScale=1,c.lc.setColor("primary",c.whiteboardToolsInfo.primaryColor),c.lc.setColor("secondary",c.whiteboardToolsInfo.secondaryColor),c.lc.setColor("background",c.whiteboardToolsInfo.backgroundColor),c.lc.setZoom(1),c.lc.setPan(0,0),c.lc.on("shapeSave",s._handlerShapeSaveEvent.bind(s,c)),c.lc.on("undo",s._handlerUndoEvent.bind(s,c)),c.lc.on("redo",s._handlerRedoEvent.bind(s,c)),c.lc.on("clear",s._handlerClearEvent.bind(s,c)),c.lc.on("drawingChange",this._handlerDrawingChangeEvent.bind(s,c)),c.activeTool=void 0,n.whiteboardClear&&s.clearWhiteboardAllDataById(l),void 0!==c.dependenceBaseboardWhiteboardID&&void 0!==c.id&&s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID]&&s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]&&(c.isBaseboard||(c.stackStorage=Object.assign({},s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id])),s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]=null,delete s.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]),s._changeWhiteboardDeawPermission(c.deawPermission,c),s._changeWhiteboardTemporaryDeawPermission(c.tempDeawPermission,c),s._saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance(c),s.activeWhiteboardTool(c.proprietaryTools?c.useToolKey?c.useToolKey:"tool_pencil":s.commonActiveTool,l),s._zoomIsDisable(c),s._actionIsDisable(c),s._noticeUpdateToolDesc(c),s._resizeWhiteboardHandler(c),c}},{key:"updateImageThumbnailId",value:function(e,t){var a=this._getWhiteboardInstanceById(e);return a?(a.imageThumbnailId=t,void this._saveImageBase64ToImageThumbnail(a)):void L.Logger.error("[updateImageThumbnailId]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardSaveRedoStackAndSaveUndoStack",value:function(e,t){var a=t.saveRedoStack,o=t.saveUndoStack,n=this._getWhiteboardInstanceById(e);return n?(n.saveRedoStack=void 0!=a?a:n.saveRedoStack,void(n.saveUndoStack=void 0!=o?o:n.saveUndoStack)):void L.Logger.error("[updateSaveRedoStackAndSaveUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"updateIsBaseboard",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);return o?void(o.isBaseboard=t):void L.Logger.error("[updateIsBaseboard]There are no white board Numbers that belong to id "+e)}},{key:"updateDependenceBaseboardWhiteboardID",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);return o?void(o.dependenceBaseboardWhiteboardID=t):void L.Logger.error("[updateDependenceBaseboardWhiteboardID]There are no white board Numbers that belong to id "+e)}},{key:"updateShowRemindContent",value:function(e,t,a){var o=this._getWhiteboardInstanceById(e);return o?(o.showRemoteRemindContent=t||o.showRemoteRemindContent,void(o.showMyselfRemindContent=a||o.showMyselfRemindContent)):void L.Logger.error("[updateShowRemindContent]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedMsgID",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);return o?void(o.associatedMsgID=t):void L.Logger.error("[updateWhiteboardAssociatedMsgID]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedUserID",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);return o?void(o.associatedUserID=t):void L.Logger.error("[updateWhiteboardAssociatedUserID]There are no white board Numbers that belong to id "+e)}},{key:"hasWhiteboardById",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return void 0!==a&&null!==a}},{key:"clearWhiteboardAllDataById",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?void t._clearWhiteboardAllDataByInstance(a):void L.Logger.error("[clear]There are no white board Numbers that belong to id "+e)}},{key:"productionSpecialId",value:function(e){var t=this,a=t.specialWhiteboardInstanceIDPrefix+e;return a}},{key:"destroyWhiteboardInstance",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?void t._destroyWhiteboardInstance(a):void L.Logger.error("[destroy]There are no white board Numbers that belong to id "+e)}},{key:"clearRedoAndUndoStack",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);return o?void a._clearRedoAndUndoStack(o,t):void L.Logger.error("[clearRedoAndUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"resetDedaultWhiteboardMagnification",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?(a.whiteboardMagnification=t.defaultProductionOptions.whiteboardMagnification,t._zoomIsDisable(a),void t._resizeWhiteboardHandler(a)):void L.Logger.error("[resetDedaultWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardMagnification",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);return o?void(o.whiteboardMagnification=t):void L.Logger.error("[updateWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardWatermarkImageScalc",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.defaultProductionOptions.watermarkImageScalc:arguments[1],a=this._getWhiteboardInstanceById(e);return a?void this._updateWhiteboardWatermarkImageScalc(a,t):void L.Logger.error("[updateWhiteboardWatermarkImageScalc]There are no white board Numbers that belong to id "+e)}},{key:"setWhiteboardWatermarkImage",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=a.resetDedaultWhiteboardMagnification,n=void 0===o||o,i=this;L.Logger.debug("setWhiteboardWatermarkImage watermarkImageUrl:"+t);var r=i._getWhiteboardInstanceById(e);return r?(r.lc.watermarkImage=null,n&&i.resetDedaultWhiteboardMagnification(e),void(t?(i.showWhiteboardCanvasBackground(e),i._showWhiteboardLoading(r),clearTimeout(r.setWhiteboardWatermarkImageTimer),r.setWhiteboardWatermarkImageTimer=setTimeout(function(){var e=new Image;e.onload=function(){var t=e.width/e.height;r.lc.setWatermarkImage(e),i._resizeWhiteboardByScalc(r,{watermarkImage:e,watermarkImageScalc:t}),i._hideWhiteboardLoading(r)},e.src=t},150)):(i.hideWhiteboardCanvasBackground(e),r.lc.watermarkScale=1,i._resizeWhiteboardByScalc(r,{isChangeWatermarkScale:!1}),i._hideWhiteboardLoading(r),r.lc.watermarkImage=null,i._hideWhiteboardLoading(r)))):void L.Logger.error("[setWhiteboardWatermarkImage]There are no white board Numbers that belong to id "+e)}},{key:"resizeWhiteboardHandler",value:function(e){var t=this;if(void 0===e){var a=!0,o=!1,n=void 0;try{for(var i,r=Object.values(t.whiteboardInstanceStore)[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var l=i.value;t._resizeWhiteboardHandler(l)}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}}else{var l=t._getWhiteboardInstanceById(e);if(!l)return void L.Logger.error("[resizeWhiteboardHandler]There are no white board Numbers that belong to id "+e);t._resizeWhiteboardHandler(l)}}},{key:"updateContainerWidthAndHeight",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.width,o=t.height,n=this,i=n._getWhiteboardInstanceById(e);return i?void 0===a||void 0===o?void L.Logger.error("[updateContainerWidthAndHeight]width or height is not exist , [width:"+a+" , height:"+o+"]!"):(i.containerWidthAndHeight={width:a,height:o},void n._resizeWhiteboardHandler(i)):void L.Logger.error("[updateContainerWidthAndHeight]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardCanvasBackground",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?void(a.lc&&a.lc.backgroundCanvas&&(a.lc.backgroundCanvas.style.display="none")):void L.Logger.error("[hideWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardCanvasBackground",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?void(a.lc&&a.lc.backgroundCanvas&&(a.lc.backgroundCanvas.style.display="")):void L.Logger.error("[showWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboard",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);a&&a.whiteboardElement&&(a.whiteboardElement.style.display="none")}},{key:"showWhiteboard",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);a&&a.whiteboardElement&&(a.whiteboardElement.style.display="block")}},{key:"updateTextFont",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.fontSize,o=t.fontFamily,n=t.fontStyle,i=t.fontWeight,r=this,l=r._getWhiteboardInstanceById(e);return l?(l.whiteboardToolsInfo.fontSize=void 0!=a?a:l.whiteboardToolsInfo.fontSize,l.whiteboardToolsInfo.fontFamily=void 0!=o?o:l.whiteboardToolsInfo.fontFamily,l.whiteboardToolsInfo.fontStyle=void 0!=n?n:l.whiteboardToolsInfo.fontStyle,l.whiteboardToolsInfo.fontWeight=void 0!=i?i:l.whiteboardToolsInfo.fontWeight,void r._updateTextFont(l)):void L.Logger.error("[updateTextFont]There are no white board Numbers that belong to id "+e)}},{key:"updateEraserWidth",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.eraserWidth,o=this,n=o._getWhiteboardInstanceById(e);return n?(n.whiteboardToolsInfo.eraserWidth=void 0!=a?a:n.whiteboardToolsInfo.eraserWidth,void o._updateEraserWidth(n)):void L.Logger.error("[updateEraserWidth]There are no white board Numbers that belong to id "+e)}},{key:"updatePencilWidth",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.pencilWidth,o=this,n=o._getWhiteboardInstanceById(e);return n?(n.whiteboardToolsInfo.pencilWidth=void 0!=a?a:n.whiteboardToolsInfo.pencilWidth,void o._updatePencilWidth(n)):void L.Logger.error("[updatePencilWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardToolsInfo",value:function(e,t){var a=this,o=a._getWhiteboardInstanceById(e);return o?void(t&&"object"==typeof t&&Object.assign(o.whiteboardToolsInfo,t)):void L.Logger.error("[updateWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"updateShapeWidth",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.shapeWidth,o=this,n=o._getWhiteboardInstanceById(e);return n?(n.whiteboardToolsInfo.shapeWidth=void 0!=a?a:n.whiteboardToolsInfo.shapeWidth,void o._updateShapeWidth(n)):void L.Logger.error("[uploadShapeWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateColor",value:function(e,t){var a=this;if(t&&"object"==typeof t){var n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateColor]There are no white board Numbers that belong to id "+e);var i=!0,r=!1,l=void 0;try{for(var s,d=Object.entries(t)[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=o(s.value,2),u=c[0],h=c[1];n.whiteboardToolsInfo[u+"Color"]=h}}catch(e){r=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(r)throw l}}a._updateColor(n,t)}}},{key:"activeWhiteboardTool",value:function(e,t){var a=this;if(void 0===a.useWhiteboardTool[e])return void L.Logger.error("The whiteboard does not have the "+e+" tool!");if(void 0===t||null===t)return void L.Logger.error("[activeWhiteboardTool]id is undefined or null ");var o=a._getWhiteboardInstanceById(t);if(!o)return void L.Logger.error("[activeWhiteboardTool]There are no white board Numbers that belong to id "+t);if(/^tool_/.test(e))if(o.activeTool=e,a._setWhiteboardTools(e,o),a._handlerActiveToolLaser(e,o),"tool_text"==e?a._updateTextFont(o):"tool_eraser"==e?a._updateEraserWidth(o):"tool_pencil"==e||"tool_highlighter"==e||"tool_line"==e||"tool_arrow"==e||"tool_dashed"==e?a._updatePencilWidth(o):"tool_rectangle"!=e&&"tool_rectangle_empty"!=e&&"tool_ellipse"!=e&&"tool_ellipse_empty"!=e&&"tool_polygon"!=e||a._updateShapeWidth(o),"tool_ellipse_empty"==e||"tool_rectangle_empty"==e?o.lc.setColor("secondary","transparent"):o.lc.setColor("secondary",o.whiteboardToolsInfo.secondaryColor),"tool_highlighter"===e){var n=o.whiteboardToolsInfo.primaryColor.colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");o.lc.setColor("primary",n)}else o.lc.setColor("primary",o.whiteboardToolsInfo.primaryColor);else/^action_/.test(e)?("action_undo"===e?o.lc.undo():"action_redo"===e?o.lc.redo():"action_clear"===e&&(o.lc.clear(),this._removeAllRemindContent(o)),a._actionIsDisable(o)):/^zoom_/.test(e)&&("zoom_big"===e?o.whiteboardMagnification<a.maxMagnification&&(o.whiteboardMagnification+=.5):"zoom_small"===e?o.whiteboardMagnification>a.minMagnification&&(o.whiteboardMagnification-=.5):"zoom_default"===e&&(o.whiteboardMagnification=a.defaultProductionOptions.whiteboardMagnification),o.whiteboardMagnification>a.maxMagnification?o.whiteboardMagnification=a.maxMagnification:o.whiteboardMagnification<a.minMagnification&&(o.whiteboardMagnification=a.minMagnification),a._zoomIsDisable(o),a._resizeWhiteboardHandler(o))}},{key:"changeWhiteboardTemporaryDeawPermission",value:function(e,t){var a=this,o=void 0;return void 0==t||(o=a._getWhiteboardInstanceById(t))?void a._changeWhiteboardTemporaryDeawPermission(e,o):void L.Logger.error("[changeWhiteboardTemporaryDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"changeWhiteboardDeawPermission",value:function(e,t){var a=this,o=void 0;return void 0==t||(o=a._getWhiteboardInstanceById(t))?void a._changeWhiteboardDeawPermission(e,o):void L.Logger.error("[changeWhiteboardDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"registerWhiteboardTools",value:function(e,t){var a=this;if(!t||"object"!=typeof t)return void L.Logger.error("[initWhiteboardTools] tools desc cannot be empty and type json!");var n=a._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[registerWhiteboardTools]There are no white board Numbers that belong to id "+e);var i={},r=!0,l=!1,s=void 0;try{for(var d,c=Object.entries(t)[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=o(d.value,2),h=u[0],g=u[1];void 0!==a.useWhiteboardTool[h]?(i[h]=a._productionToolDesc(h,g),a.useWhiteboardTool[h]=!0):L.Logger.warning("The whiteboard does not have the "+h+" tool!")}}catch(e){l=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(l)throw s}}n.registerWhiteboardToolsList=i,n.isRegisterWhiteboardTool=!0,a._zoomIsDisable(n),a._zoomIsDisable(n),a._noticeUpdateToolDesc(n)}},{key:"hasWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[hasWhiteboardFiledata]There are no white board Numbers that belong to id "+e);var a=!0,o=!1,n=void 0;try{for(var i,r=Object.keys(t.filedata)[Symbol.iterator]();!(a=(i=r.next()).done);a=!0)return i.value,!0}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}return!1}},{key:"updateWhiteboardFiledata",value:function(e,t){var a=this._getWhiteboardInstanceById(e);return a?void this._updateWhiteboardFiledata(a,t):void L.Logger.error("[updateWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?Object.assign({},t.filedata):void L.Logger.error("[getWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"loadCurrpageWhiteboard",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.loadRedoStack,o=void 0!==a&&a,n=t.loadUndoStack,i=void 0===n||n,r=t.callback,l=this._getWhiteboardInstanceById(e);if(!l)return void L.Logger.error("[loadCurrpageWhiteboard]There are no white board Numbers that belong to id "+e);this._clearRedoAndUndoStack(l),this._basicTemplateWhiteboardSignallingListToWhiteboardInstance(l);var s=l.filedata,d=s.fileid,c=s.currpage;if(i){var u=l.stackStorage["undoStack_"+d+"_"+c];if(u&&u.length>0)for(var h=0;h<u.length;h++){var g=u[h];"AddShapeAction"===g.actionName?l.lc.saveShape(g.shape,!1,null,!1):"ClearAction"===g.actionName&&(l.lc.clear(!1,g.id),this._removeAllRemindContent(l))}}if(o){var p=l.stackStorage["redoStack_"+d+"_"+c];if(p&&p.length>0){for(var h=p.length-1;h>=0;h--){var g=p[h];"AddShapeAction"===g.actionName?l.lc.saveShape(g.shape,!1,null,!1):"ClearAction"===g.actionName&&(l.lc.clear(!1,g.id),this._removeAllRemindContent(l))}for(var h=0;h<p.length;h++)l.lc.undo(!1)}}if(void 0==l.waitingProcessShapeData||null==l.waitingProcessShapeData)l.waitingProcessShapeData={};else{var f=l.waitingProcessShapeData["SharpsChange_"+d+"_"+c];null!=f&&void 0!=f&&f.length>0&&(this._batchReceiveSnapshot(f,l),l.waitingProcessShapeData["SharpsChange_"+d+"_"+c]=null,delete l.waitingProcessShapeData["SharpsChange_"+d+"_"+c])}this._actionIsDisable(l),r&&"function"==typeof r&&r()}},{key:"saveWhiteboardStackToStorage",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.saveRedoStack,o=t.saveUndoStack,n=this._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[saveWhiteboardStackToStorage]There are no white board Numbers that belong to id "+e);a=void 0!=a?a:n.saveRedoStack,o=void 0!=o?o:n.saveUndoStack;var i=this.getWhiteboardFiledata(e),r=i.fileid,l=i.currpage;o&&(n.stackStorage["undoStack_"+r+"_"+l]=n.lc.undoStack.slice(0)),a&&(n.stackStorage["redoStack_"+r+"_"+l]=n.lc.redoStack.slice(0))}},{key:"showWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?void this._showWhiteboardLoading(t):void L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?void this._hideWhiteboardLoading(t):void L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"isWhiteboardTextEditing",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[isWhiteboardTextEditing]There are no white board Numbers that belong to id "+e);var a="Text"==t.lc.tool.name.toString()&&"editing"==t.lc.tool.currentShapeState;return a}},{key:"checkWhiteboardCanvasSize",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.isResize,o=void 0!==a&&a,n=this._getWhiteboardInstanceById(e);return n?n.lc&&n.lc.canvas?(0===n.lc.canvas.width||0===n.lc.canvas.height)&&(o&&this._resizeWhiteboardHandler(n),!0):void 0:void L.Logger.error("[checkWhiteboardCanvasSize]There are no white board Numbers that belong to id "+e)}},{key:"downCanvasImageToLocalFile",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"png":arguments[1],a=function(e){e=e.toLocaleLowerCase().replace(/jpg/i,"jpeg");var t=e.match(/png|jpeg|bmp|gif/)[0];return"image/"+t},o=function(e,t){var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=e,a.download=t;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(o)},n=this._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[downCanvasImageToLocalFile]There are no white board Numbers that belong to id "+e);var i=this._convertCanvasToImageBase64(n,t);i=i.replace(a(t),"image/octet-stream");var r=(n.nickname?n.nickname+"_":"")+n.id+"_"+(new Date).getTime()+"."+t;o(i,r)}},{key:"_clearRedoAndUndoStack",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.clear,o=void 0===a||a,n=t.redo,i=void 0===n||n,r=t.undo,l=void 0===r||r,s=this;o&&s._clearLc(e,{triggerEvent:!1}),i&&s._clearLcRedoStack(e),l&&s._clearLcUndoStack(e),s._actionIsDisable(e)}},{key:"_updateWhiteboardFiledata",value:function(e,t){t&&"object"==typeof t&&(t.currpage=Number(t.currpage),t.pagenum=Number(t.pagenum),t.pptslide=Number(t.pptslide),t.pptstep=Number(t.pptstep),t.steptotal=Number(t.steptotal),Object.assign(e.filedata,t))}},{key:"_batchReceiveSnapshot",value:function(e,t){var a=this;return Array.isArray(e)?(e.forEach(function(o,n){var i=!0;n===e.length-1&&(i=!1),a._handlerRemoteDataToWhiteboard(o,i,t)}),void a._actionIsDisable(t)):void L.Logger.error("shapesArray must be an array!")}},{key:"_receiveSnapshot",value:function(e,t){var a=this,o=!1;a._handlerRemoteDataToWhiteboard(e,o,t),a._actionIsDisable(t)}},{key:"_handlerRemoteDataToWhiteboard",value:function(e,t,a){if(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),null!=e.data&&null!=e.data.eventType)if("delmsg"===e.source)switch(e.data.eventType){case"shapeSaveEvent":case"clearEvent":case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(a.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(a,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.undo(!1,e.data.clearActionId)}else switch(e.data.eventType){case"shapeSaveEvent":e.data&&e.data.data&&e.data.data.data&&(e.data.data=LC.JSONToShape(e.data.data)),a.lc.saveShape(e.data.data,!1,null,t);break;case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(a.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(a,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.undo(!1,e.data.clearActionId);break;case"redoEvent":if(e.data.actionName&&"AddShapeAction"===e.data.actionName){for(var o=!1,n=a.lc.redoStack.length-1;n>=0;n--)if(e.data.shapeId===a.lc.redoStack[n].shapeId){a.lc.redoStack.splice(n,1),o=!0;break}e.data&&e.data.data&&e.data.data.data&&(e.data.data=LC.JSONToShape(e.data.data)),a.lc.saveShape(e.data.data,!1,null,t)}else e.data.actionName&&"ClearAction"===e.data.actionName&&(a.lc.clear(!1,null),this._removeAllRemindContent(a));break;case"clearEvent":a.lc.clear(!1,null),this._removeAllRemindContent(a);break;case"laserMarkEvent":var i=a.lc.containerEl.parentNode.getElementsByClassName("laser-mark")[0];switch(e.data.actionName){case"show":i.style.display="block";break;case"hide":i.style.display="none";break;case"move":if(e.data&&e.data.laser){var r=e.data.laser.left,l=e.data.laser.top;i.style.left=r+"%",i.style.top=l+"%"}}}}},{key:"_productionToolDesc",value:function(e,t){var a={toolKey:e,disabled:!1};return a}},{key:"_noticeUpdateToolDesc",value:function(e){e&&e.isRegisterWhiteboardTool&&(clearTimeout(e.noticeUpdateToolDescTimer),e.noticeUpdateToolDescTimer=setTimeout(function(){e.handler&&e.handler.noticeUpdateToolDescCallback&&e.handler.noticeUpdateToolDescCallback(e.registerWhiteboardToolsList)},250))}},{key:"_updateToolDesc",value:function(e,t,a){if(e.registerWhiteboardToolsList[t]){var n=!0,i=!1,r=void 0;try{for(var l,s=Object.entries(a)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var d=o(l.value,2),c=d[0],u=d[1];void 0!==e.registerWhiteboardToolsList[t][c]&&(e.registerWhiteboardToolsList[t][c]=u)}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}},{key:"_batchUpdateToolDesc",value:function(e,t){var a=this;if(!Array.isArray(t))return void L.Logger.error("updateDescArray must be an array , whiteboard id is "+e.id+"!");var o=!0,n=!1,i=void 0;try{for(var r,l=t[Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var s=r.value;Array.isArray(s)&&a._updateToolDesc(e,s[0],s[1])}}catch(e){n=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}}},{key:"_setWhiteboardTools",value:function(e,t){var a=this,o=function(t){var o=a._productionToolByCore(e,t);t.lc.setTool(o)};a._automaticTraverseWhiteboardInstance(t,o)}},{key:"_productionToolByCore",value:function(e,t){var a=this,o=void 0;if(void 0===a.useWhiteboardTool[e])return L.Logger.error("The whiteboard does not have the "+e+" tool!"),o;switch(e){case"tool_pencil":o=new LC.tools.Pencil(t.lc);break;case"tool_highlighter":o=new LC.tools.Pencil(t.lc);break;case"tool_line":o=new LC.tools.Line(t.lc);break;case"tool_arrow":o=new LC.tools.Line(t.lc),o.hasEndArrow=!0;break;case"tool_dashed":o=new LC.tools.Line(t.lc),o.isDashed=!0;break;case"tool_eraser":o=new LC.tools.Eraser(t.lc);break;case"tool_text":o=new LC.tools.Text(t.lc);break;case"tool_rectangle":o=new LC.tools.Rectangle(t.lc);break;case"tool_rectangle_empty":o=new LC.tools.Rectangle(t.lc);break;case"tool_ellipse":o=new LC.tools.Ellipse(t.lc);break;case"tool_ellipse_empty":o=new LC.tools.Ellipse(t.lc);break;case"tool_polygon":o=new LC.tools.Polygon(t.lc);break;case"tool_eyedropper":o=new LC.tools.Eyedropper(t.lc);break;case"tool_selectShape":o=new LC.tools.SelectShape(t.lc);break;case"tool_mouse":o=t.lc.tool;break;case"tool_laser":o=t.lc.tool;break;default:L.Logger.warning("Tool "+e+" is not created in the whiteboard core layer!"),o=t.lc.tool}return o}},{key:"_getWhiteboardInstanceID",value:function(e){var t=this,a=t.uniqueWhiteboard||void 0==e||null==e?t.whiteboardInstanceDefaultID:t.whiteboardInstanceIDPrefix+e;if(e&&"string"==typeof e){var o=new RegExp(t.specialWhiteboardInstanceIDPrefix,"g");o.test(e)&&(a=e)}return a}},{key:"_getWhiteboardInstanceById",value:function(e){var t=this,a=t._getWhiteboardInstanceID(e),o=t.whiteboardInstanceStore[a];return o}},{key:"_getWhiteboardInstanceByID",value:function(e){var t=this,a=t.whiteboardInstanceStore[e];return a}},{key:"_resizeWhiteboardByScalc",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.watermarkImage,o=t.isChangeCanvas,n=void 0===o||o,i=t.isChangeWatermarkScale,r=void 0===i||i,l=t.watermarkImageScalc;l=void 0!==l?l:e.watermarkImageScalc;var s=e.lc;if(s){var d=e.whiteboardElement,c=e.whiteboardInstanceElement,u=e.containerWidthAndHeight.width,h=e.containerWidthAndHeight.height;if(e.parcelAncestorElementId&&document.getElementById(e.parcelAncestorElementId)){var g=document.getElementById(e.parcelAncestorElementId);u=g.clientWidth,h=g.clientHeight}var p={},f=0,m=0,v=0,b=0;if(h*l<u?(f=Math.round(h*l*e.whiteboardMagnification),m=Math.round(h*e.whiteboardMagnification),d.style.width=f+"px",d.style.height=m+"px",c.style.width=f+"px",c.style.height=m+"px",void 0!==e.minHeight&&null!==e.minHeight&&(v=e.minHeight*l,b=e.minHeight,d.style.minWidth=v+"px",d.style.minHeight=b+"px",c.style.minWidth=v+"px",c.style.minHeight=b+"px",p.minWidth=v+"px",p.minHegiht=b+"px"),p.top="0%",p.left="50%",p.marginTop="0px",p.marginLeft=-f/2+"px",p.width=f+"px",p.height=m+"px"):(f=Math.round(u*e.whiteboardMagnification),m=Math.round(u/l*e.whiteboardMagnification),d.style.width=f+"px",d.style.height=m+"px",c.style.width=f+"px",c.style.height=m+"px",void 0!==e.minHeight&&null!==e.minHeight&&(v=e.minHeight*l,b=e.minHeight,d.style.minWidth=v+"px",d.style.minHeight=b+"px",c.style.minWidth=v+"px",c.style.minHeight=b+"px",p.minWidth=v+"px",p.minHegiht=b+"px"),p.top="50%",p.left="0%",p.marginTop=-m/2+"px",p.marginLeft="0px",p.width=f+"px",p.height=m+"px"),n){s.respondToSizeChange();var y=c.clientWidth,w=c.clientHeight,S=(y+w)/(e.baseWhiteboardWidth+e.baseWhiteboardWidth*l);if(s.setZoom(S),s.setPan(0,0),r&&a){var T=a.width,_=a.height,I=s.backgroundCanvas.width/T,k=s.backgroundCanvas.height/_,P=(I+k)/2;s.watermarkScale=P,s.setWatermarkImage(a)}}e.whiteboardMagnification>1?p.addClassName="custom-scroll-bar":p.addClassName="",e.handler&&e.handler.resizeWhiteboardSizeCallback&&"function"==typeof e.handler.resizeWhiteboardSizeCallback&&e.handler.resizeWhiteboardSizeCallback(p)}}},{key:"_clearWhiteboardAllDataByInstance",value:function(e){return e?(e.lc.clear(!1),e.lc.redoStack.length=0,e.lc.undoStack.length=0,e.stackStorage={},e.waitingProcessShapeData={},void this._removeAllRemindContent(e)):void L.Logger.error("[_clear]The whiteboard instance does not exist!")}},{key:"_resizeWhiteboardHandler",value:function(e){var t=this;if(e&&e.lc){var a=e.lc.watermarkImage;if(a&&a.src){var o=a.width/a.height;t._resizeWhiteboardByScalc(e,{watermarkImage:a,watermarkImageScalc:o})}else t._resizeWhiteboardByScalc(e,{isChangeWatermarkScale:!1});this._updateAllRemindContent(e)}}},{key:"_updateWhiteboardWatermarkImageScalc",value:function(e,t){e.watermarkImageScalc=t}},{key:"_productionWhiteboardRemindContent",value:function(e,t,a,o,n){var i=this;if(e&&o)try{if(e&&e.lc&&e.lc.containerEl.parentNode&&"function"==typeof e.lc.drawingCoordsToClientCoords){var r=e.lc.drawingCoordsToClientCoords(t,a);r&&!function(){var l=document.createElement("span");l.className="remind-content",l.style.position="absolute",l.style.left=r.x+"px",l.style.top=r.y+"px",l.innerHTML=o;var s=n?"whiteboard_remind_"+n:"whiteboard_remind_"+(new Date).getTime();l.setAttribute("data-position-x",t),l.setAttribute("data-position-y",a),l.setAttribute("id",s),e.lc.containerEl.parentNode.appendChild(l),setTimeout(function(){i._removeRemindContentByElementId(e,s),l=null},e.remindContentTime)}()}}catch(e){L.Logger.error("productionWhiteboardRemindContent error:",e)}}},{key:"_updateAllRemindContent",value:function(e){try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&t.length>0)for(var a=0;a<t.length;a++){var o=t[a],n=Number(o.getAttribute("data-position-x")),i=Number(o.getAttribute("data-position-y")),r=e.lc.drawingCoordsToClientCoords(n,i);o.style.left=r.x+"px",o.style.top=r.y+"px"}}}catch(e){L.Logger.error("updateAllRemindContent error:",e)}}},{key:"_removeRemindContentByElementId",value:function(e,t){if(e&&e.lc&&e.lc.containerEl.parentNode){var a=document.getElementById(t);a&&(a.innerHTML="",e.lc.containerEl.parentNode.removeChild(a),a=null)}}},{key:"_removeAllRemindContent",value:function(e){if(e&&e.lc&&e.lc.containerEl.parentNode)try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&t.length>0)for(var a=t.length-1;a>=0;a--){var o=t[a];o.innerHTML="",e.lc.containerEl.parentNode.removeChild(o),o=null}}}catch(e){L.Logger.error("removeAllRemindContent error:",e)}}},{key:"_handlerShapeSaveEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"shapeSaveEvent",t),this._actionIsDisable(e)}},{key:"_handlerUndoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"undoEvent",t),this._actionIsDisable(e)}},{key:"_handlerRedoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"redoEvent",t),this._actionIsDisable(e)}},{key:"_handlerClearEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"clearEvent",t),this._actionIsDisable(e)}},{key:"_handlerDrawingChangeEvent",value:function(e){this._saveImageBase64ToImageThumbnail(e)}},{key:"_saveImageBase64ToImageThumbnail",value:function(e){if(e.imageThumbnailId){var t=document.getElementById(e.imageThumbnailId);if(t&&"img"===t.nodeName.toLowerCase()){var a=this._convertCanvasToImageBase64(e,"jpg");t.src=a,e.imageThumbnailTipContent&&document.getElementById(e.imageThumbnailId+"_imageDescribe")?document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.imageThumbnailTipContent:e.nickname&&document.getElementById(e.imageThumbnailId+"_imageDescribe")&&(document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.nickname);
}}}},{key:"_destroyWhiteboardInstance",value:function(e){var t=this;clearTimeout(e.noticeUpdateToolDescTimer),clearTimeout(e.laserTimer),clearTimeout(e.setWhiteboardWatermarkImageTimer),void 0===e.dependenceBaseboardWhiteboardID||e.isBaseboard||void 0===e.id||(t.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]?(t.saveWhiteboardStackToStorage(e.id,{saveRedoStack:e.saveRedoStack,saveUndoStack:e.saveUndoStack}),t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]=t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]||{},t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID][e.id]=Object.assign({},e.stackStorage)):t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]&&(t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]=null,delete t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID])),t.basicTemplateWhiteboardSignallingList[e.id]&&(t.basicTemplateWhiteboardSignallingList[e.id]=null,delete t.basicTemplateWhiteboardSignallingList[e.id]),t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]&&(t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]=null,delete t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]),t._clearWhiteboardAllDataByInstance(e);var a=e.whiteboardInstanceID,o=e.whiteboardElement;e.lc&&"function"==typeof e.lc.teardown&&e.lc.teardown(),o?o.innerHTML="":L.Logger.warning("[destroy] whiteboard elements do not exist , element id is:"+e.whiteboardElementId+"!");var n=e.thumbnailId?document.getElementById(e.thumbnailId):void 0;n&&(n.innerHTML="");var i=!0,r=!1,l=void 0;try{for(var s,d=Object.keys(e)[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=s.value;e[c]=null,delete e[c]}}catch(e){r=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(r)throw l}}t.whiteboardInstanceStore[a]=null,delete t.whiteboardInstanceStore[a]}},{key:"_clearLc",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.triggerEvent,e&&e.lc?(e.lc.clear(!1),this._removeAllRemindContent(e)):L.Logger.warning("clear whiteboard is not exist!")}},{key:"_clearLcRedoStack",value:function(e){e&&e.lc?e.lc.redoStack.length=0:L.Logger.warning("clearRedoStack whiteboard is not exist!")}},{key:"_clearLcUndoStack",value:function(e){e&&e.lc?e.lc.undoStack.length=0:L.Logger.warning("clearUndoStack whiteboard is not exist!")}},{key:"_showWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="block")}},{key:"_hideWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="none")}},{key:"_changeWhiteboardTemporaryDeawPermission",value:function(e,t){var a=this,o=function(t){var a=t.lc;if(a.isTmpDrawAble!==e){a.isTmpDrawAble=e;var o=a.containerEl.parentNode.getElementsByClassName("temporary-draw-permission")[0];a.isTmpDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}};a._automaticTraverseWhiteboardInstance(t,o)}},{key:"_changeWhiteboardDeawPermission",value:function(e,t){var a=this,o=function(t){var a=t.lc;if(a.isDrawAble!==e){a.isDrawAble=e;var o=a.containerEl.parentNode.getElementsByClassName("draw-permission")[0];a.isDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}};a._automaticTraverseWhiteboardInstance(t,o)}},{key:"_handlerActiveToolLaser",value:function(e,t){var a=this,o=function(t){var o=t.lc,n=o.containerEl.parentNode,r=n.getElementsByClassName("temporary-draw-permission")[0],l=n.getElementsByClassName("laser-mark")[0];if("tool_laser"===e)a._laserEventHandler_mousemove=a._laserEventHandler_mousemove||function(e){var o=e.pageX,n=e.pageY,i=r.getBoundingClientRect(),s=void 0,d=void 0,c=r.clientWidth,u=r.clientHeight;switch(t.rotateDeg){case 0:s=o-i.left,d=n-i.top;break;case 90:s=n-i.top,d=u-(o-i.left);break;case 180:s=c-(o-i.left),d=u-(n-i.top);break;case 270:s=c-(n-i.top),d=o-i.left;break;default:s=o-i.left,d=n-i.top}var h=s/c*100,g=d/u*100;return l.style.left=h+"%",l.style.top=g+"%",clearTimeout(t.laserTimer),t.laserTimer=setTimeout(function(){if(t.laserPosition&&(Math.abs(h-t.laserPosition.left)>.3||Math.abs(g-t.laserPosition.top)>.3)){var e={laser:{left:h,top:g},action:{actionName:"move"}};t.laserPosition=e.laser,a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",e)}},100),!1},a._laserEventHandler_mouseenter=a._laserEventHandler_mouseenter||function(e){var o={action:{actionName:"show"}};return a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",o),l.style.display="block",!1},a._laserEventHandler_mouseleave=a._laserEventHandler_mouseleave||function(e){var o={action:{actionName:"hide"}};return a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",o),l.style.display="none",!1},a._changeWhiteboardTemporaryDeawPermission(!1,t),t.selectLaserTool=!0,i.removeEvent(r,"mousemove",a._laserEventHandler_mousemove),i.removeEvent(n,"mouseenter",a._laserEventHandler_mouseenter),i.removeEvent(n,"mouseleave",a._laserEventHandler_mouseleave),r.className=r.className.replace(/ cursor-none/g,""),r.className+=" cursor-none",t.laserPosition=t.laserPosition||{left:0,top:0},i.addEvent(r,"mousemove",a._laserEventHandler_mousemove),i.addEvent(n,"mouseenter",a._laserEventHandler_mouseenter),i.addEvent(n,"mouseleave",a._laserEventHandler_mouseleave);else if(a._changeWhiteboardTemporaryDeawPermission("tool_mouse"!==e,t),i.removeEvent(r,"mousemove",a._laserEventHandler_mousemove),i.removeEvent(n,"mouseenter",a._laserEventHandler_mouseenter),i.removeEvent(n,"mouseleave",a._laserEventHandler_mouseleave),r.className=r.className.replace(/ cursor-none/g,""),l.style.display="none",t.selectLaserTool){var s={action:{actionName:"hide"}};a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",s),t.selectLaserTool=!1}};a._automaticTraverseWhiteboardInstance(t,o)}},{key:"_sendSignallingToServer",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.idPrefix,o=t.data,n=t.signallingName,i=t.assignId,r=t.do_not_save,l=t.expiresabs,s=t.associatedMsgID,d=t.associatedUserID;if(!e)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance is not exist!");if(e.handler&&e.handler.sendSignallingToServer&&"function"==typeof e.handler.sendSignallingToServer){var c=e.filedata,u=c.currpage,h=c.fileid;if(void 0===u||void 0===h)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+u+","+h+"]!");o&&"string"==typeof o&&(o=JSON.parse(o)),o.whiteboardID=e.id,o.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(o.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),s=s||e.associatedMsgID,d=d||e.associatedUserID;var g=i||a+"###_"+n+"_"+h+"_"+u,p="__allExceptSender",f=Object.assign({},o);this._saveBasicTemplateWhiteboardSignallingData({signallingName:n,id:g,toID:p,data:f,do_not_save:r,expiresabs:l,associatedMsgID:s,associatedUserID:d},"pubmsg"),e.handler.sendSignallingToServer(n,g,p,o,r,l,s,d)}}},{key:"_delSignallingToServer",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.idPrefix,o=t.data,n=t.signallingName,i=t.assignId;if(!e)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance is not exist!");if(e.handler&&e.handler.delSignallingToServer&&"function"==typeof e.handler.delSignallingToServer){var r=e.filedata,l=r.currpage,s=r.fileid;if(void 0===l||void 0===s)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+l+","+s+"]!");o.whiteboardID=e.id,o.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(o.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID);var d=i||a+"###_"+n+"_"+s+"_"+l,c="__allExceptSender",u=Object.assign({},o);this._saveBasicTemplateWhiteboardSignallingData({signallingName:n,id:d,toID:c,data:u},"delmsg"),e.handler.delSignallingToServer(n,d,c,o)}}},{key:"_sendWhiteboardMessageToSignallingServer",value:function(e,t,a){var o=this,n=void 0,i=void 0,r=void 0,l=void 0,s=void 0,d=void 0,c=void 0;switch(t){case"shapeSaveEvent":if(d=LC.shapeToJSON(a.shape),null!=d&&null!=d.className&&("LinePath"==d.className||"ErasedLinePath"==d.className)){d.data.smoothedPointCoordinatePairs=null,delete d.data.smoothedPointCoordinatePairs;var u=d.data.pointCoordinatePairs;u.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})}c={eventType:t,actionName:a.action.actionName,shapeId:a.shapeId,data:d},n=a.shapeId,i=c,r="SharpsChange",l=void 0,s=void 0,o._sendSignallingToServer(e,{idPrefix:n,data:i,signallingName:r,assignId:l,do_not_save:s});break;case"undoEvent":if("AddShapeAction"===a.action.actionName){var h=a.action.shapeId;c={eventType:t,actionName:a.action.actionName,shapeId:h},n=h,i=c,r="SharpsChange",l=void 0,o._delSignallingToServer(e,{idPrefix:n,data:i,signallingName:r,assignId:l})}else if("ClearAction"===a.action.actionName){var g=a.action.id;c={eventType:t,actionName:a.action.actionName,clearActionId:g},n=g,i=c,r="SharpsChange",l=void 0,o._delSignallingToServer(e,{idPrefix:n,data:i,signallingName:r,assignId:l})}break;case"redoEvent":if("AddShapeAction"===a.action.actionName){if(d=LC.shapeToJSON(a.action.shape),null!=d&&null!=d.className&&("LinePath"==d.className||"ErasedLinePath"==d.className)){d.data.smoothedPointCoordinatePairs=null,delete d.data.smoothedPointCoordinatePairs;var u=d.data.pointCoordinatePairs;u.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})}var h=a.action.shapeId;c={eventType:t,actionName:a.action.actionName,shapeId:h,data:d};var p=h,f=c,m="SharpsChange",v=void 0,b=void 0;o._sendSignallingToServer(e,{idPrefix:p,data:f,signallingName:m,assignId:v,do_not_save:b})}else if("ClearAction"===a.action.actionName){var y=a.action.id;c={eventType:t,actionName:a.action.actionName,clearActionId:y},n=y,i=c,r="SharpsChange",l=void 0,s=void 0,o._sendSignallingToServer(e,{idPrefix:n,data:i,signallingName:r,assignId:l,do_not_save:s})}break;case"clearEvent":var w=a.clearActionId;c={eventType:t,actionName:a.action.actionName,clearActionId:w},n=w,i=c,r="SharpsChange",l=void 0,s=void 0,o._sendSignallingToServer(e,{idPrefix:n,data:i,signallingName:r,assignId:l,do_not_save:s});break;case"laserMarkEvent":var S="laserMarkEvent";c={eventType:t,actionName:a.action.actionName},a&&a.laser&&(c.laser=a.laser),n=S,i=c,r="SharpsChange",l=void 0,s=!0,o._sendSignallingToServer(e,{idPrefix:n,data:i,signallingName:r,assignId:l,do_not_save:s})}}},{key:"_updateTextFont",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.fontSize,a=e.whiteboardToolsInfo.fontFamily,o=e.whiteboardToolsInfo.fontStyle,n=e.whiteboardToolsInfo.fontWeight,i=e.lc.tool;"Text"==i.name&&(i.font=o+" "+n+" "+t+"px "+a)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateEraserWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.eraserWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updatePencilWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.pencilWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateShapeWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.shapeWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateColor",value:function(e,t){var a=this;if(t&&"object"==typeof t){var o=function(e){var a=!0,o=!1,n=void 0;try{for(var i,r=Object.keys(t)[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var l=i.value;if(e.lc.setColor(l,e.whiteboardToolsInfo[l+"Color"]),"primary"===l&&"tool_highlighter"===e.activeTool){var s=e.whiteboardToolsInfo[l+"Color"].colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");e.lc.setColor(l,s)}}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}};a._automaticTraverseWhiteboardInstance(e,o)}}},{key:"_actionIsDisable",value:function(e){var t=this,a=function(e){if(e.active){if(0===e.lc.shapes.length){var a=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}else{var a=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}e.lc.canRedo()?(t._updateToolDesc(e,"action_redo",{disabled:!1}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"action_redo",{disabled:!0}),t._noticeUpdateToolDesc(e)),e.lc.canUndo()?(t._updateToolDesc(e,"action_undo",{disabled:!1}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"action_undo",{disabled:!0}),t._noticeUpdateToolDesc(e))}};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_zoomIsDisable",value:function(e){var t=this,a=function(e){if(e.active){if(e.whiteboardMagnification<=t.minMagnification){var a=[["zoom_small",{disabled:!0}],["zoom_default",{disabled:!0}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}else{var a=[["zoom_small",{disabled:!1}],["zoom_default",{disabled:!1}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}e.whiteboardMagnification>=t.maxMagnification?(t._updateToolDesc(e,"zoom_big",{disabled:!0}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"zoom_big",{disabled:!1}),t._noticeUpdateToolDesc(e))}};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_automaticTraverseWhiteboardInstance",value:function(e,t){var a=this;if(e)t&&"function"==typeof t&&t(e);else{var o=!0,n=!1,i=void 0;try{for(var r,l=Object.values(a.whiteboardInstanceStore)[Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var s=r.value;t&&"function"==typeof t&&t(s)}}catch(e){n=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}}}},{key:"_saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance",value:function(e){for(var t=!1,a=0;a<this.awaitSaveToWhiteboardInstanceSignallingArray.length;a++){var o=this.awaitSaveToWhiteboardInstanceSignallingArray[a];if(o.data&&"string"==typeof o.data&&(o.data=JSON.parse(o.data)),o.data.whiteboardID===e.id){var n=o.id.substring(o.id.lastIndexOf("###_")+4);null==e.waitingProcessShapeData[n]||void 0==e.waitingProcessShapeData[n]?(e.waitingProcessShapeData[n]=[],e.waitingProcessShapeData[n].push(o)):e.waitingProcessShapeData[n].push(o),t=!0,this.awaitSaveToWhiteboardInstanceSignallingArray.splice(a,1,null)}}if(t)for(var a=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;a>=0;a--)null===this.awaitSaveToWhiteboardInstanceSignallingArray[a]&&this.awaitSaveToWhiteboardInstanceSignallingArray.splice(a,1)}},{key:"_basicTemplateWhiteboardSignallingListToWhiteboardInstance",value:function(e){e.needLooadBaseboard&&!e.isBaseboard&&void 0!==e.dependenceBaseboardWhiteboardID&&!e.isHandleBasicTemplateWhiteboardSignallingList&&e.id!==e.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]&&Array.isArray(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID])&&(this._batchReceiveSnapshot(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID],e),e.isHandleBasicTemplateWhiteboardSignallingList=!0)}},{key:"_convertCanvasToImage",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"png":arguments[1];if(e&&e.lc&&e.lc.canvas){var a=e.lc.canvas,o=new Image;return o.src=a.toDataURL("image/"+t),o}}},{key:"_convertCanvasToImageBase64",value:function(e,t){if(e&&e.lc&&e.lc.canvas){var a=e.lc.canvas,o=a.toDataURL("image/"+t);return o}}},{key:"_saveBasicTemplateWhiteboardSignallingData",value:function(e,t){e.data.isBaseboard&&e&&e.data&&e.data.isBaseboard&&void 0!==e.data.whiteboardID&&(e.source=t,this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]=this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]||[],this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID].push(e))}},{key:"_handlerShowRemoteRemindContentFromPubmsgData",value:function(e,t){var a=void 0,o=void 0,n=void 0;if("pubmsg"===t.source&&t.data&&"shapeSaveEvent"===t.data.eventType)if("LinePath"==t.data.data.className){var i=t.data.data.points.length;i>0&&(a=t.data.data.points[i-1].x,o=t.data.data.points[i-1].y,n=t.remindContent),this._productionWhiteboardRemindContent(e,a,o,n,t.data.shapeId)}else"Rectangle"==t.data.data.className||"Ellipse"==t.data.data.className?(t.data.data.width>0&&t.data.data.height>0?(a=t.data.data.x+t.data.data.width,o=t.data.data.y):t.data.data.width>0&&t.data.data.height<0?(a=t.data.data.x+t.data.data.width,o=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height<0?(a=t.data.data.x,o=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height>0&&(a=t.data.data.x,o=t.data.data.y),n=t.remindContent,this._productionWhiteboardRemindContent(e,a,o,n,t.data.shapeId)):"Text"==t.data.data.className?(a=t.data.data.x+t.data.data.renderer.metrics.width,o=t.data.data.y+20*t.data.data.renderer.metricses.length,n=t.remindContent,this._productionWhiteboardRemindContent(e,a,o,n,t.data.shapeId)):"Line"==t.data.data.className&&(a=t.data.data.x2,o=t.data.data.y2,n=t.remindContent,this._productionWhiteboardRemindContent(e,a,o,n,t.data.shapeId))}}]),e}(),l=new r;t.default=l,e.exports=t.default},164:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(e,t,a){for(var o=!0;o;){var n=e,i=t,r=a;o=!1,null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(r)}var d=Object.getPrototypeOf(n);if(null===d)return;e=d,t=i,a=r,o=!0,l=d=void 0}},s=a(249),d=o(s),c=a(50),u=o(c),h=a(52),g=(o(h),a(51)),p=(o(g),a(78)),f=o(p),m=function(e){function t(){n(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return i(t,e),r(t,[{key:"sendSignallingFromUpdateTime",value:function(e){if(f.default.handler.getAppPermissions("sendSignallingFromUpdateTime")){var t=this,a=!1,o="UpdateTime",n=e||"__all",i={},r="UpdateTime",l=!0;t.sendSignallingDataToParticipant(a,r,o,n,i,l)}}},{key:"sendSignallingFromSharpsChange",value:function(e,t,a,o,n,i,r,l,s){if(f.default.handler.getAppPermissions("sendSignallingFromSharpsChange")){var d=this;e&&(i=!0),d.sendSignallingDataToParticipant(e,t,a,o,n,i,r,l,s)}}},{key:"sendSignallingFromWBPageCount",value:function(e){if(f.default.handler.getAppPermissions("sendSignallingFromWBPageCount")){var t=this,a="WBPageCount",o="WBPageCount",n=void 0,i=!1,r="__allExceptSender";t.sendSignallingDataToParticipant(i,a,o,r,e,n)}}},{key:"sendSignallingFromShowPage",value:function(e,t,a){var o=arguments.length<=3||void 0===arguments[3]?"__all":arguments[3];if(f.default.handler.getAppPermissions("sendSignallingFromShowPage")){if(!a)return void L.Logger.error("sendSignallingFromShowPage data is not exist!");if(a&&"string"==typeof a&&(a=JSON.parse(a)),(!a.isDynamicPPT||f.default.handler.getAppPermissions("sendSignallingFromDynamicPptShowPage"))&&(!a.isH5Document||f.default.handler.getAppPermissions("sendSignallingFromH5ShowPage"))&&(!a.isGeneralFile||f.default.handler.getAppPermissions("sendSignallingFromGeneralShowPage"))){var n=this,i="ShowPage";n.sendSignallingDataToParticipant(e,i,t,o,a)}}}},{key:"sendSignallingFromDynamicPptTriggerActionClick",value:function(e){if(f.default.handler.getAppPermissions("sendSignallingFromDynamicPptTriggerActionClick")){var t=this,a="NewPptTriggerActionClick",o="NewPptTriggerActionClick",n="__allExceptSender",i=!1,r=!1;t.sendSignallingDataToParticipant(i,a,o,n,e,r)}}},{key:"sendSignallingFromH5DocumentAction",value:function(e){if(f.default.handler.getAppPermissions("sendSignallingFromH5DocumentAction")){var t=this,a="H5DocumentAction",o="H5DocumentAction",n="__allExceptSender",i=!1,r=!1;t.sendSignallingDataToParticipant(i,a,o,n,e,r)}}},{key:"sendSignallingFromVideoDraghandle",value:function(e,t){if(f.default.handler.getAppPermissions("sendSignallingFromVideoDraghandle")){var a=this,o="videoDraghandle",n="videoDraghandle",i=!1,r=!1;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,o,n,t,e,r)}}},{key:"sendMarkToolMouseIsSelect",value:function(e,t,a){if(f.default.handler.getAppPermissions("sendWhiteboardMarkTool")){var o=this,n={selectMouse:e};t&&(n.selectElementLiId=t),a&&(n.selectElementId=a);var i="whiteboardMarkTool",r="whiteboardMarkTool",l="__allExceptSender",s=!1;o.sendSignallingDataToParticipant(s,i,r,l,n)}}},{key:"sendSignallingFromBlackBoard",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(f.default.handler.getAppPermissions("sendSignallingFromBlackBoard")){var a="BlackBoard",o="BlackBoard",n="__all";this.sendSignallingDataToParticipant(t,a,o,n,e)}}},{key:"sendSignallingTimerToStudent",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!f.default.handler.getAppPermissions("sendSignallingTimerToStudent"))return!1;var a=this,o="timerMesg",n="timer",i="__all";a.sendSignallingDataToParticipant(t,n,o,i,e)}},{key:"sendSignallingFromBlackBoardDrag",value:function(e,t){if(f.default.handler.getAppPermissions("sendSignallingFromBlackBoardDrag")){var a=this,o="BlackBoardDrag",n="BlackBoardDrag",i=!1,r=!1,l="BlackBoard";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,o,n,t,e,r,void 0,l)}}},{key:"sendSignallingDialToStudent",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(f.default.handler.getAppPermissions("sendSignallingDialToStudent")){var a="dial",o="dialMesg",n="__all";this.sendSignallingDataToParticipant(t,a,o,n,e)}}},{key:"sendSignallingAnswerToStudent",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!f.default.handler.getAppPermissions("sendSignallingAnswerToStudent"))return!1;var a=this,o="answerMesg",n="answer",i="__all";a.sendSignallingDataToParticipant(t,n,o,i,e)}},{key:"sendSignallingDataStudentToTeacherAnswer",value:function(e,t){if(!f.default.handler.getAppPermissions("sendSignallingDataStudentToTeacherAnswer"))return!1;var a=this,o="submitAnswers",n="__all",i="answerMesg",r="submitAnswers_"+u.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,o,r,n,t,void 0,void 0,i)}},{key:"sendSignallingQiangDaQi",value:function(e,t){if(!f.default.handler.getAppPermissions("sendSignallingQiangDaQi"))return!1;var a=this,o="qiangDaQi",n="__all",i="qiangDaQiMesg";a.sendSignallingDataToParticipant(e,o,i,n,t)}},{key:"sendSignallingQiangDaZhe",value:function(e,t){if(!f.default.handler.getAppPermissions("sendSignallingQiangDaZhe"))return!1;var a=this,o="QiangDaZhe",n="__all",i="qiangDaQiMesg",r="QiangDaZhe_"+u.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,o,r,n,t,void 0,void 0,i)}},{key:"sendSignallingFromDialDrag",value:function(e,t){if(f.default.handler.getAppPermissions("sendSignallingFromDialDrag")){var a=this,o="DialDrag",n="DialDrag",i=!1,r=!1,l="dialMesg";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,o,n,t,e,r,void 0,l)}}},{key:"sendSignallingFromResponderDrag",value:function(e,t){if(f.default.handler.getAppPermissions("isSendSignallingFromResponderDrag")){var a=this,o="ResponderDrag",n="ResponderDrag",i=!1,r=!1,l="qiangDaQiMesg";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,o,n,t,e,r,void 0,l)}}},{key:"sendSignallingFromTimerDrag",value:function(e,t){if(f.default.handler.getAppPermissions("isSendSignallingFromTimerDrag")){var a=this,o="TimerDrag",n="TimerDrag",i=!1,r=!1,l="timerMesg";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,o,n,t,e,r,void 0,l)}}},{key:"sendSignallingFromAnswerDrag",value:function(e,t){if(f.default.handler.getAppPermissions("isSendSignallingFromAnswerDrag")){var a=this,o="AnswerDrag",n="AnswerDrag",i=!1,r=!1,l="answerMesg";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,o,n,t,e,r,void 0,l)}}}]),t}(d.default),v=new m;t.default=v,e.exports=t.default},165:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(42),l=o(r),s=function(){function e(){n(this,e),this.permissionsJson=this.productionDefaultAppAppPermissions()}return i(e,[{key:"productionDefaultAppAppPermissions",value:function(){var e={canDraw:!1,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,h5DocumentActionClick:!1,dynamicPptActionClick:!1,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromWBPageCount:!1,sendSignallingFromSharpsChange:!1,sendSignallingFromShowPage:!1,sendSignallingFromDynamicPptShowPage:!1,sendSignallingFromH5ShowPage:!1,sendSignallingFromGeneralShowPage:!1,sendSignallingFromDynamicPptTriggerActionClick:!1,sendSignallingFromH5DocumentAction:!1,sendSignallingFromVideoDraghandle:!1,sendSignallingFromBlackBoardDrag:!1,allUserTools:!1,laser:!1,publishDynamicPptMediaPermission_video:!1,sendWhiteboardMarkTool:!1,jumpPage:!1,sendSignallingFromBlackBoard:!1,sendSignallingTimerToStudent:!1,sendSignallingDialToStudent:!1,sendSignallingDataStudentToTeacherAnswer:!0,studentInit:!1,dialIconClose:!1,sendSignallingAnswerToStudent:!1,sendSignallingQiangDaQi:!1,sendSignallingQiangDaZhe:!0,sendSignallingFromDialDrag:!1,isSendSignallingFromTimerDrag:!1,isSendSignallingFromAnswerDrag:!1,isSendSignallingFromResponderDrag:!1,isShowVideoDrawTool:!1};return e}},{key:"resetDefaultAppPermissions",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0],t=this;t.permissionsJson=t.productionDefaultAppAppPermissions(),e&&l.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}},{key:"resetAppPermissions",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],a=this;e&&"object"==typeof e&&(Object.assign(a.permissionsJson,e),t&&l.default.CoreController.dispatchEvent({type:"resetAppPermissions",message:{data:a.permissionsJson}}))}},{key:"setAppPermissions",value:function(e,t){var a=this;if(a.permissionsJson[e]!==t){L.Logger.debug("setAppPermissions key and value:",e,t,"old appPermissions:",a.permissionsJson[e]),a.permissionsJson[e]=t;var o={type:"updateAppPermissions_"+e,message:{key:e,value:t}};l.default.CoreController.dispatchEvent(o)}}},{key:"getAppPermissions",value:function(e){var t=this;return t.permissionsJson[e]}},{key:"initAppPermissions",value:function(e){L.Logger.debug("initAppPermissions data:",e);var t=this;for(var a in e)t.permissionsJson[a]=e[a];Object.assign(t.permissionsJson,e),t.permissionsJson=e,l.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}}]),e}(),d=new s;t.default=d,e.exports=t.default},246:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(e,t,a){for(var o=!0;o;){var n=e,i=t,r=a;o=!1,null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(r)}var d=Object.getPrototypeOf(n);if(null===d)return;e=d,t=i,a=r,o=!0,l=d=void 0}},s=a(11),d=o(s),c=a(50),u=o(c),h=a(42),g=o(h),p=a(41),f=o(p),m=a(248),v=o(m),b=function(e){function t(e){n(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={updateState:!1},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return i(t,e),r(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){g.default.CoreController.addEventListener("updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone",this.handlerUpdateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone.bind(this),this.listernerBackupid),u.default.getTkRoom()&&u.default.getTkRoom().onPageFinished&&u.default.getTkRoom().onPageFinished()}},{key:"componentWillUnmount",value:function(){g.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerUpdateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"callAllWrapOnClick",value:function(e){g.default.CoreController.dispatchEvent({type:"callAllWrapOnClick",message:{event:e}})}},{key:"render",value:function(){return d.default.createElement("section",{className:"app-mobile  all-container "+("phone"===f.default.mobileDeviceType?"phone":"pad"),onTouchStart:this.callAllWrapOnClick.bind(this)},d.default.createElement(v.default,{containerWidthAndHeight:{width:f.default.windowInnerWidth,height:f.default.windowInnerHeight}}))}}]),t}(d.default.Component);t.default=b,e.exports=t.default},247:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),d=function(e,t,a){for(var o=!0;o;){var n=e,i=t,r=a;o=!1,null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(r)}var d=Object.getPrototypeOf(n);if(null===d)return;
e=d,t=i,a=r,o=!0,l=d=void 0}},c=a(11),u=o(c),h=a(42),g=o(h),p=a(52),f=o(p),m=a(41),v=o(m),b=a(164),y=o(b),w=a(163),S=o(w),T=function(e){function t(e){i(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.containerWidthAndHeight=Object.assign({},this.props.containerWidthAndHeight),this.instanceId=void 0!==this.props.instanceId?this.props.instanceId:"whiteboard_default",this.whiteboardElementId="whiteboard_container_"+this.instanceId,this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.showRemoteRemindContent=v.default.showRemoteRemindContent}return r(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;g.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),e._lcInit()}},{key:"componentWillUnmount",value:function(){var e=this;e.props.saveImage&&S.default.downCanvasImageToLocalFile(e.instanceId),S.default.destroyWhiteboardInstance(e.instanceId),g.default.Window.removeBackupListerner(e.listernerBackupid),g.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.show!==this.props.show&&this.props.show&&S.default.resizeWhiteboardHandler(a.instanceId),!a.props.containerWidthAndHeight||a.props.containerWidthAndHeight.width===a.containerWidthAndHeight.width&&a.props.containerWidthAndHeight.height===a.containerWidthAndHeight.height||(Object.assign(a.containerWidthAndHeight,a.props.containerWidthAndHeight),S.default.updateContainerWidthAndHeight(a.instanceId,a.containerWidthAndHeight)),a.props.isBaseboard!==e.isBaseboard&&S.default.updateIsBaseboard(a.instanceId,a.props.isBaseboard),a.props.watermarkImageScalc!==e.watermarkImageScalc&&S.default.updateWhiteboardWatermarkImageScalc(a.instanceId,a.props.watermarkImageScalc),a.props.dependenceBaseboardWhiteboardID!==e.dependenceBaseboardWhiteboardID&&S.default.updateDependenceBaseboardWhiteboardID(a.instanceId,a.props.dependenceBaseboardWhiteboardID),a.props.deawPermission!==e.deawPermission&&S.default.changeWhiteboardDeawPermission(a.props.deawPermission,a.instanceId),a.props.useToolKey!==e.useToolKey&&S.default.activeWhiteboardTool(a.props.useToolKey,a.instanceId),a.props.useToolColor!==e.useToolColor&&S.default.updateColor(a.instanceId,{primary:a.props.useToolColor}),a.props.pencilWidth!==e.pencilWidth&&S.default.updatePencilWidth(a.instanceId,{pencilWidth:a.props.pencilWidth}),a.props.saveRedoStack!==e.saveRedoStack&&S.default.updateWhiteboardSaveRedoStackAndSaveUndoStack(a.instanceId,{saveRedoStack:a.props.saveRedoStack}),a.props.fontSize!==e.fontSize&&S.default.updateTextFont(a.instanceId,{fontSize:a.props.fontSize}),a.props.imageThumbnailId!==e.imageThumbnailId&&S.default.updateImageThumbnailId(a.instanceId,a.props.imageThumbnailId),a.props.backgroundColor!==e.backgroundColor&&S.default.updateColor(a.instanceId,{background:a.props.backgroundColor})}},{key:"handlerResizeHandler",value:function(e){var t=this;e&&e.message&&void 0!=e.message.eleWHPercent&&S.default.updateWhiteboardMagnification(t.instanceId,e.message.eleWHPercent)}},{key:"sendSignallingToServer",value:function(e,t,a,o,n,i,r,l){var s=!1;y.default.sendSignallingFromSharpsChange(s,e,t,a,o,n,i,r,l)}},{key:"delSignallingToServer",value:function(e,t,a,o){var n=!0;y.default.sendSignallingFromSharpsChange(n,e,t,a,o)}},{key:"resizeWhiteboardSizeCallback",value:function(e){this.props.resizeWhiteboardSizeCallback&&"function"==typeof this.props.resizeWhiteboardSizeCallback&&this.props.resizeWhiteboardSizeCallback(e)}},{key:"noticeUpdateToolDescCallback",value:function(e){}},{key:"_lcInit",value:function(){var e=this;if(!S.default.hasWhiteboardById(e.instanceId)){var t={whiteboardElementId:e.whiteboardElementId,id:e.instanceId,productionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,deawPermission:this.props.deawPermission,containerWidthAndHeight:this.props.containerWidthAndHeight,associatedMsgID:this.props.associatedMsgID,associatedUserID:this.props.associatedUserID,needLooadBaseboard:this.props.needLooadBaseboard,nickname:this.props.nickname,useToolKey:this.props.useToolKey,saveRedoStack:this.props.saveRedoStack,imageThumbnailId:this.props.imageThumbnailId,backgroundColor:this.props.backgroundColor,imageThumbnailTipContent:this.props.imageThumbnailTipContent,showRemoteRemindContent:this.showRemoteRemindContent},handler:{sendSignallingToServer:e.sendSignallingToServer.bind(e),delSignallingToServer:e.delSignallingToServer.bind(e),resizeWhiteboardSizeCallback:e.resizeWhiteboardSizeCallback.bind(e),noticeUpdateToolDescCallback:e.noticeUpdateToolDescCallback.bind(e)}};this.props.watermarkImageScalc&&(t.productionOptions.watermarkImageScalc=this.props.watermarkImageScalc);var a={tool_pencil:{},tool_eraser:{},tool_text:{}};S.default.productionWhiteboard(t),S.default.registerWhiteboardTools(e.instanceId,a),S.default.clearRedoAndUndoStack(e.instanceId),S.default.hasWhiteboardFiledata(e.instanceId)||S.default.updateWhiteboardFiledata(e.instanceId,S.default.getWhiteboardDefaultFiledata({fileid:this.instanceId,filetype:"blackboard",filename:"blackboard"})),S.default.loadCurrpageWhiteboard(e.instanceId),S.default.resizeWhiteboardHandler(e.instanceId),S.default.updateTextFont(e.instanceId,{fontSize:e.props.fontSize}),S.default.updateColor(e.instanceId,{primary:e.props.useToolColor}),S.default.updatePencilWidth(e.instanceId,{pencilWidth:e.props.pencilWidth})}}},{key:"render",value:function(){var e=this,t=e.props,a=t.show,o=n(t,["show"]);return u.default.createElement("div",l({id:e.whiteboardElementId,style:{display:a?"block":"none"},className:"overflow-hidden  scroll-literally-container "},f.default.filterContainDataAttribute(o)))}}]),t}(u.default.Component);T.propTypes={instanceId:c.PropTypes.string.isRequired,containerWidthAndHeight:c.PropTypes.object.isRequired,isBaseboard:c.PropTypes.bool.isRequired,deawPermission:c.PropTypes.bool.isRequired},t.default=T,e.exports=t.default},248:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=function(e,t,a){for(var o=!0;o;){var n=e,i=t,r=a;o=!1,null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(r)}var d=Object.getPrototypeOf(n);if(null===d)return;e=d,t=i,a=r,o=!0,l=d=void 0}},d=a(11),c=o(d),u=a(41),h=o(u),g=a(51),p=o(g),f=a(247),m=o(f),v=a(42),b=o(v),y=a(78),w=o(y),S=function(e){function t(e,a){n(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,a),this.state={videoDrawBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageScalc:16/9,isShow:!1,backgroundColor:"transparent",instanceId:"videoDrawBoard",saveImage:!1,nickname:"videoDrawBoard",deawPermission:!1,associatedMsgID:"VideoWhiteboard"},useToolInfo:{useToolKey:"tool_pencil",useToolColor:"#FF0000",blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},selectBlackboardToolSizeId:"blackboard_size_small"},BlackboardSmartIsShow:!1},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;b.default.CoreController.addEventListener(p.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),b.default.CoreController.addEventListener(p.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),b.default.CoreController.addEventListener("receive-msglist-VideoWhiteboard",e.receiveMsglistVideoWhiteboard.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;b.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.videoDrawBoardInfo.isShow!==this.state.videoDrawBoardInfo.isShow&&this.setState({BlackboardSmartIsShow:this.state.videoDrawBoardInfo.isShow})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"VideoWhiteboard":var a=r({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=w.default.handler.getAppPermissions("isShowVideoDrawTool"),t.data&&"object"==typeof t.data&&t.data.videoRatio&&(a.watermarkImageScalc=t.data.videoRatio),this.setState({videoDrawBoardInfo:a})}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"VideoWhiteboard":var a=r({},this.state.videoDrawBoardInfo);a.isShow=!1,a.deawPermission=!1,this.setState({videoDrawBoardInfo:a})}}},{key:"receiveMsglistVideoWhiteboard",value:function(e){var t=e.message.VideoWhiteboardArray[0].data,a=r({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=w.default.handler.getAppPermissions("isShowVideoDrawTool"),t&&"object"==typeof t&&t.videoRatio&&(a.watermarkImageScalc=t.videoRatio),this.setState({videoDrawBoardInfo:a})}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"changeStrokeColorClick",value:function(e){this.state.useToolInfo.useToolColor=e,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[],a=[];return a="mobile"!==TK.SDKTYPE?["#FF0000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF","#FE9401","#FF2C55","#007AFF","#7457F1","#626262","#000000"]:["#FF0000","#FFFF00","#007AFF","#000000"],a.forEach(function(a,o){var n="mobile"!==TK.SDKTYPE?c.default.createElement("li",{className:"color-option "+(e.state.useToolInfo.useToolColor===a?" active":""),key:o,onTouchStart:e.changeStrokeColorClick.bind(e,a),style:{backgroundColor:a},id:"video_drawBoard_color_"+e._colorFilter(a)}):c.default.createElement("li",{key:o,className:"blackboard-tool-option"},c.default.createElement("button",{id:"video_drawBoard_color_"+e._colorFilter(a),className:"color-option "+(e.state.useToolInfo.useToolColor===a?" active":""),style:{backgroundColor:a},onTouchStart:e.changeStrokeColorClick.bind(e,a)}));t.push(n)}),{toolColorsArray:t}}},{key:"handleToolClick",value:function(e){"tool_pencil"!==e&&"tool_text"!==e&&"tool_eraser"!==e||(this.state.useToolInfo.useToolKey=e,this.setState({useToolInfo:this.state.useToolInfo}))}},{key:"_changeStrokeSizeClick",value:function(e,t){this.state.useToolInfo.selectBlackboardToolSizeId=e,this.state.useToolInfo.blackboardToolsInfo=t,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"render",value:function(){var e=this,t=e.state,a=t.videoDrawBoardInfo,o=t.useToolInfo,n=this.props.containerWidthAndHeight,i=o.useToolKey,r=e._loadToolColorsElementArray(),l=r.toolColorsArray,s="tool_eraser"===i?o.blackboardToolsInfo.eraser:o.blackboardToolsInfo.pencil;return c.default.createElement("div",{className:"video-drawing-board-box",style:{display:a.isShow?"block":"none"}},c.default.createElement("div",{className:"video-drawing-board",style:{display:a.isShow?"flex":"none"}},this.state.BlackboardSmartIsShow?c.default.createElement(m.default,{isBaseboard:!1,containerWidthAndHeight:n,instanceId:a.instanceId,nickname:a.nickname,show:this.state.BlackboardSmartIsShow,backgroundColor:a.backgroundColor,useToolKey:i,fontSize:o.blackboardToolsInfo.text,useToolColor:o.useToolColor,pencilWidth:s,deawPermission:a.deawPermission,watermarkImageScalc:a.watermarkImageScalc,associatedMsgID:a.associatedMsgID}):void 0),c.default.createElement("ul",{className:"blackboard-tool clear-float",style:{display:a.deawPermission?"":"none"}},c.default.createElement("li",{className:"blackboard-tool-option"+("tool_pencil"===i?" active":"")},c.default.createElement("button",{id:"video_blackboard_tool_pencil",className:"tool-btn pencil-icon "+("tool_pencil"===i?" active":""),title:h.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:e.handleToolClick.bind(e,"tool_pencil")})),c.default.createElement("li",{className:"blackboard-tool-option"+("tool_text"===i?" active":"")},c.default.createElement("button",{id:"video_blackboard_tool_text",className:"tool-btn text-icon"+("tool_text"===i?" active":""),title:h.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:e.handleToolClick.bind(e,"tool_text")})),c.default.createElement("li",{className:"blackboard-tool-option"+("tool_eraser"===i?" active":"")},c.default.createElement("button",{id:"video_blackboard_tool_eraser",className:"tool-btn eraser-icon"+("tool_eraser"===i?" active":""),title:h.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:e.handleToolClick.bind(e,"tool_eraser")})),"mobile"!==TK.SDKTYPE?c.default.createElement("li",{className:"blackboard-tool-option colors  add-position-relative"},c.default.createElement("button",{id:"video_blackboard_tool_color",className:"tool-btn colors-icon",title:h.default.language.languageData.header.tool.blackBoard.boardTool.color},c.default.createElement("span",{className:"current-color",style:{backgroundColor:o.useToolColor}})),c.default.createElement("div",{className:"blackboard-color-size-box"},c.default.createElement("ul",{className:"tool-size-container",id:"video_blackboard_tool_size"},c.default.createElement("li",{id:"video_blackboard_size_small",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_small",{pencil:5,text:30,eraser:30}),className:"size-small "+("blackboard_size_small"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":""),"data-pencil-size":"5","data-text-size":"30","data-eraser-size":"15"},c.default.createElement("span",null)),c.default.createElement("li",{id:"video_blackboard_size_middle",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_middle",{pencil:15,text:36,eraser:90}),className:"size-middle "+("blackboard_size_middle"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":""),"data-pencil-size":"15","data-text-size":"36","data-eraser-size":"45"},c.default.createElement("span",null)),c.default.createElement("li",{id:"video_blackboard_size_big",onClick:e._changeStrokeSizeClick.bind(e,"blackboard_size_big",{pencil:30,text:72,eraser:150}),className:"size-big "+("blackboard_size_big"===this.state.useToolInfo.selectBlackboardToolSizeId?"active":""),"data-pencil-size":"30","data-text-size":"72","data-eraser-size":"90"},c.default.createElement("span",null))),c.default.createElement("ol",{className:"colors-container"},l))):l))}}]),t}(c.default.Component);t.default=S,e.exports=t.default},249:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(41),l=o(r),s=a(50),d=o(s),c=a(78),u=o(c),h=a(51),g=o(h),p=function(){function e(){n(this,e)}return i(e,[{key:"pubMsg",value:function(e,t,a,o,n,i,r,s){if(u.default.handler.getAppPermissions("pubMsg")&&l.default.appConnected){a=a||"__all";var c=!n;o&&"object"==typeof o&&(o=JSON.stringify(o)),d.default.getTkRoom().pubMsg(e,t,a,o,c,i,r,s)}}},{key:"delMsg",value:function(e,t,a,o){u.default.handler.getAppPermissions("delMsg")&&l.default.appConnected&&(a=a||"__all",o&&"object"==typeof o&&(o=JSON.stringify(o)),d.default.getTkRoom().delMsg(e,t,a,o))}},{key:"setProperty",value:function(e,t,a){u.default.handler.getAppPermissions("setProperty")&&l.default.appConnected&&(t=t||"__all",d.default.getTkRoom().changeUserProperty(e,t,a))}},{key:"setParticipantPropertyToAll",value:function(e,t){if(u.default.handler.getAppPermissions("setParticipantPropertyToAll")){var a=this,o="__all",n=d.default.getTkRoom().getUsers()[e];return n?void((n.role===g.default.role.roleChairman||n.role===g.default.role.roleStudent||n.role===g.default.role.roleTeachingAssistant&&g.default.joinRoomInfo.assistantOpenMyseftAV||!t||void 0==t.publishstate)&&a.setProperty(e,o,t)):void L.Logger.error("user is not exist  , user id is "+e+"!")}}},{key:"sendSignallingDataToParticipant",value:function(e,t,a,o,n,i,r,l,s){if(u.default.handler.getAppPermissions("sendSignallingDataToParticipant")){var d=this;e?d.delMsg(t,a,o,n):d.pubMsg(t,a,o,n,i,r,l,s)}}},{key:"sendTextMessage",value:function(e,t){u.default.handler.getAppPermissions("sendTextMessage")&&l.default.appConnected&&e&&(t=t||"__all",e&&"object"==typeof e&&(e=JSON.stringify(e)),d.default.getTkRoom().sendMessage(e,t))}}]),e}();t.default=p,e.exports=t.default},250:function(e,t,a){(function(o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(52),r=n(i),l=a(41),s=n(l),d=a(51),c=(n(d),a(50)),u=(n(c),a(42)),h=(n(u),a(164)),g=(n(h),{getAppLanguageInfo:function(e,t){var n=t?t:s.default.languageName,i={};s.default.language=s.default.language||{},i.name=n,i.languageData=a(588)("./i18_"+n+".js"),e&&"function"==typeof e&&e(i),o(document.body).removeClass("chinese english complex").addClass(i.name).attr("data-language",i.name)},TkUtils:r.default});t.default=g,e.exports=t.default}).call(t,a(82))},251:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=a(11),i=o(n),r=a(143),l=o(r),s=a(238),d=a(78),c=o(d),u=a(246),h=o(u);c.default.handler.loadSystemRequiredInfo(),l.default.render(i.default.createElement(s.Router,{history:s.hashHistory},i.default.createElement(s.Route,{path:"/",component:h.default}),i.default.createElement(s.Route,{path:"/mobileApp_videoWhiteboard",component:h.default})),document.getElementById("tk_app"))},252:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(51),l=o(r),s=a(50),d=(o(s),a(165)),c=o(d),u=a(42),h=(o(u),a(41)),g=o(h),p=a(78),f=(o(p),function(){function e(t){n(this,e),this.role=t}return i(e,[{key:"getRoleHasDefalutAppPermissions",value:function(e){var t=e||c.default.productionDefaultAppAppPermissions();if(l.default.joinRoomInfo&&void 0!=l.default.joinRoomInfo.roomrole)switch(l.default.joinRoomInfo.roomrole){case l.default.role.roleChairman:if(g.default.classBegin){var a=!0,o=!1,n=void 0;try{for(var i,r=Object.keys(t)[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var s=i.value;t[s]=!0}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}Object.assign(t,{raisehand:!1,dialCircleClick:!1})}else Object.assign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0,endClassbeginRevertToStartupLayout:!0});break;case l.default.role.roleTeachingAssistant:if(g.default.classBegin){var d=!0,u=!1,h=void 0;try{for(var p,f=Object.keys(t)[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var s=p.value;t[s]=!0}}catch(e){u=!0,h=e}finally{try{!d&&f.return&&f.return()}finally{if(u)throw h}}Object.assign(t,{laser:!1,endClassbeginRevertToStartupLayout:!1})}else Object.assign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0});break;case l.default.role.rolePatrol:g.default.classBegin?Object.assign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1}):Object.assign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1});break;case l.default.role.roleStudent:g.default.classBegin?Object.assign(t,{whiteboardPagingPage:l.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:l.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:l.default.joinRoomInfo.isSupportPageTrun,jumpPage:l.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromSharpsChange:!0}):Object.assign(t,{whiteboardPagingPage:l.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:l.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:l.default.joinRoomInfo.isSupportPageTrun,jumpPage:l.default.joinRoomInfo.isSupportPageTrun,h5DocumentActionClick:l.default.joinRoomInfo.isSupportPageTrun,dynamicPptActionClick:l.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0});break;case l.default.role.rolePlayback:g.default.classBegin?Object.assign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1}):Object.assign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1});break;case l.default.role.roleAudit:var m=!0,v=!1,b=void 0;try{for(var y,w=Object.keys(t)[Symbol.iterator]();!(m=(y=w.next()).done);m=!0){var s=y.value;t[s]=!1}}catch(e){v=!0,b=e}finally{try{!m&&w.return&&w.return()}finally{if(v)throw b}}Object.assign(t,{pubMsg:!0,sendSignallingDataToParticipant:!0})}return t}},{key:"addEventListenerToRoomHandler",value:function(){}}]),e}()),m=new f;m.addEventListenerToRoomHandler(),t.default=m,e.exports=t.default},253:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(42),l=o(r),s=a(51),d=o(s),c=a(52),u=o(c),h=a(41),g=o(h),p=a(50),f=o(p),m=a(163),v=o(m),b=function(){function e(t){n(this,e),this.room=t}return i(e,[{key:"registerEventToRoom",value:function(){var e=function(e){f.default.getTkRoom().addEventListener(d.default.EVENTTYPE.RoomEvent[e],function(t){var a=!0;"stream-rtcStats"===t.type&&(a=!1),a&&L.Logger.debug(d.default.EVENTTYPE.RoomEvent[e]+" event:",t),l.default.Room.dispatchEvent(t,!1)})};for(var t in d.default.EVENTTYPE.RoomEvent)e(t)}},{key:"addEventListenerToRoomHandler",value:function(){var e=this,t=function(t){l.default.Room.addEventListener(d.default.EVENTTYPE.RoomEvent[t],function(a){if(e["handler"+u.default.replaceFirstUper(t)]&&"function"==typeof e["handler"+u.default.replaceFirstUper(t)]){var o=e["handler"+u.default.replaceFirstUper(t)](a);if(o)return}var n=!0;"stream-rtcStats"===a.type&&(n=!1),l.default.CoreController.dispatchEvent(a,n)})};for(var a in d.default.EVENTTYPE.RoomEvent)t(a)}},{key:"handlerRoomPubmsg",value:function(e){e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(g.default.serviceTime||(g.default.serviceTime=1e3*t.ts,g.default.remindServiceTime=1e3*t.ts),t.name){case"SharpsChange":g.default.showRemoteRemindContent&&f.default.getTkRoom().getUser(t.fromID)&&(t.remindContent=f.default.getTkRoom().getUser(t.fromID).nickname),v.default.handlerPubmsg_SharpsChange(t)}if("sendNetworkState"===t.name||"BlackBoardDrag"===t.name||"videoDraghandle"===t.name)return!0}},{key:"handlerRoomMsglist",value:function(e){var t=function(e,t,a){var o={};for(var n in e)a&&a[e[n].name]||(e[n].data&&"string"==typeof e[n].data&&(e[n].data=JSON.parse(e[n].data)),/outIframe/.test(e[n].name)?l.default.CoreController.dispatchEvent({type:"outIframe-msglist",message:{signallingData:e[n]}}):null==o[e[n].name]||void 0==o[e[n].name]?(o[e[n].name]=[],o[e[n].name].push(e[n])):o[e[n].name].push(e[n]));var i=o.SharpsChange;null!=i&&void 0!=i&&i.length>0&&v.default.handlerMsglist_SharpsChange(i),o.SharpsChange=null;var r=o.VideoWhiteboard;null!==r&&void 0!==r&&r.length>0&&l.default.CoreController.dispatchEvent({type:"receive-msglist-VideoWhiteboard",message:{VideoWhiteboardArray:r}}),o.VideoWhiteboard=null},a=e.message,o=e.source,n={};return t(a,o,n),!0}},{key:"handlerRoomDelmsg",value:function(e){e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(t.name){case"SharpsChange":v.default.handlerDelmsg_SharpsChange(t)}}}]),e}(),y=new b;y.addEventListenerToRoomHandler(),t.default=y,e.exports=t.default},254:function(e,t,a){(function(o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(82),r=n(i);window.$=r.default,o=r.default,t.default=r.default,e.exports=t.default}).call(t,a(82))},255:function(e,t){"use strict";var a={error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)}};window.Log=a},256:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={header:{tool:{blackBoard:{title:{open:"小白板",close:"关闭",prev:"上一位",next:"下一位",shrink:"缩小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分发",recycle:"回收",againDispenseed:"再次分发",commonTeacher:"老师"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"笔",text:"文字",eraser:"橡皮",color:"颜色及粗细"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠标"},pencil:{title:"笔",pen:{text:"铅笔工具"},Highlighter:{text:"荧光笔工具"},linellae:{text:"线条工具"},arrow:{text:"箭头工具"},laser:{title:"激光笔",text:"激光笔工具"}},text:{title:"文字",Msyh:{text:"微软雅黑"},Ming:{text:"宋体"},Arial:{text:"Arial"}},shape:{title:"形状",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心椭圆"},filledCircle:{text:"椭圆"}},eraser:{title:"橡皮擦"},undo:{title:"撤销"},redo:{title:"恢复"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"缩小"},tool_rotate_left:{title:"逆时针旋转"},tool_rotate_right:{title:"顺时针旋转"},colorAndMeasure:{title:"颜色及粗细",selectColorText:"选择颜色",selectMeasure:"选择粗细"},colors:{title:"颜色"},measure:{title:"粗细"}},page:{prev:{text:"上一页"},next:{text:"下一页"},add:{text:"加页"},lcFullBtn:{title:"绘制区域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5课件全屏"},skipPage:{text_one:"至第",text_two:"页"},ok:{text:"确定"}}},alertWin:{ok:{showError:{text:"确定"},showPrompt:{text:"确定"},showConfirm:{cancel:"取消",ok:"确定"}},title:{showError:{text:"错误信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"确认消息"}},call:{fun:{page:{pageInteger:{text:"输入的页数必须是整数！"},pageMax:{text:"输入的页数不能超过最大页数！"},pageMin:{text:"输入的页数不能小于1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"计时器"},timerBegin:{text:"开始"},timerStop:{text:"暂停"},again:{text:"重新开始"}},dial:{turntable:{text:"转盘"}},answers:{headerTopLeft:{text:"答题器"},headerMiddel:{text:"点击字母预设正确答案"},beginAnswer:{text:"开始答题"},tureAccuracy:{text:"正确率"},trueAnswer:{text:"正确答案"},endAnswer:{text:"结束答题"},restarting:{text:"重新开始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"请至少选择一个答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答题人数"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"详情"},statistics:{text:"统计"},student:{text:"学生"},TheSelectedTheAnswer:{text:"所选答案"},AnswerTime:{text:"答题用时"},end:{text:"请先结束答题"}},responder:{responder:{text:"抢答器"},begin:{text:"开始抢答"},restart:{text:"重新开始"},close:{text:"关闭"},update:{text:"当前浏览器不支持canvas组件请升级！"},inAnswer:{text:"抢答中"},answer:{text:"抢答"},noContest:{text:"无人抢答"}},call:{fun:{page:{pageInteger:{text:"输入的页数必须是整数！"},pageMax:{text:"输入的页数不能超过最大页数！"},pageMin:{text:"输入的页数不能小于1"}}}}};t.default=a,e.exports=t.default},257:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={header:{tool:{blackBoard:{title:{open:"小白板",close:"關閉",prev:"上壹位",next:"下壹位",shrink:"縮小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分發",recycle:"回收",againDispenseed:"再次分發",commonTeacher:"老師"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"筆",text:"文字",eraser:"橡皮",color:"顏色及粗細"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠標"},pencil:{title:"筆",pen:{text:"鉛筆工具"},Highlighter:{text:"熒光筆工具"},linellae:{text:"線條工具"},arrow:{text:"箭頭工具"},laser:{title:"激光筆",text:"激光筆工具"}},text:{title:"文字",Msyh:{text:"微軟雅黑"},Ming:{text:"宋體"},Arial:{text:"Arial"}},shape:{title:"形狀",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心橢圓"},filledCircle:{text:"橢圓"}},eraser:{title:"橡皮擦"},undo:{title:"撤銷"},redo:{title:"恢復"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"縮小"},tool_rotate_left:{title:"逆時針旋轉"},tool_rotate_right:{title:"順時針旋轉"},colorAndMeasure:{title:"顏色及粗細",selectColorText:"選擇顏色",selectMeasure:"選擇粗細"},colors:{title:"顏色"},measure:{title:"粗細"}},page:{prev:{text:"上壹頁"},next:{text:"下壹頁"},add:{text:"加頁"},lcFullBtn:{title:"繪制區域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5課件全屏"},skipPage:{text_one:"至第",text_two:"頁"},ok:{text:"確定"}}},alertWin:{ok:{showError:{text:"確定"},showPrompt:{text:"確定"},showConfirm:{cancel:"取消",ok:"確定"}},title:{showError:{text:"錯誤信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"確認消息"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"計時器"},timerBegin:{text:"開始"},timerStop:{text:"暫停"},again:{text:"重新開始"}},dial:{turntable:{text:"轉盤"}},answers:{headerTopLeft:{text:"答題器"},headerMiddel:{text:"點擊字母預設正確答案"},beginAnswer:{text:"開始答題"},tureAccuracy:{text:"正確率"},trueAnswer:{text:"正確答案"},endAnswer:{text:"結束答題"},restarting:{text:"重新開始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"請至少選擇壹個答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{
text:"答題人數"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"詳情"},statistics:{text:"統計"},student:{text:"學生"},TheSelectedTheAnswer:{text:"所選答案"},AnswerTime:{text:"答題用時"},end:{text:"請先結束答題"}},responder:{responder:{text:"搶答器"},begin:{text:"開始搶答"},restart:{text:"重新開始"},close:{text:"關閉"},update:{text:"當前瀏覽器不支持canvas組件請升級！"},inAnswer:{text:"搶答中"},answer:{text:"搶答"},noContest:{text:"無人搶答"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}};t.default=a,e.exports=t.default},258:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={header:{tool:{blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous one",next:"Next person",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Again Send",commonTeacher:"Teacher"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text Input",eraser:"Eraser",color:"Colors and Thickness"}},sharing:{title:"Sharing"},mouse:{title:"Mouse"},pencil:{title:"Pen",pen:{text:"Pencils"},Highlighter:{text:"Highlighters"},linellae:{text:"Lines"},arrow:{text:"Arrows"},laser:{title:"Laser pen",text:"Laser pen"}},text:{title:"Text Input",Msyh:{text:"Microsoft YaHei"},Ming:{text:"SimSun"},Arial:{text:"Arial"}},shape:{title:"Shapes",outlinedRectangle:{text:"Squares"},filledRectangle:{text:"Solid Squares"},outlinedCircle:{text:"Circles"},filledCircle:{text:"Solid Circles"}},eraser:{title:"Eraser"},undo:{title:"Undo"},redo:{title:"Recover"},clear:{title:" Clear Screen"},tool_zoom_big:{title:"Zoom In"},tool_zoom_small:{title:"Zoom Out"},tool_rotate_left:{title:"Contrarotate"},tool_rotate_right:{title:"Clockwise rotation"},colorAndMeasure:{title:"Colors and Thickness",selectColorText:"select Colour",selectMeasure:"select Thickness"},colors:{title:"Colors"},measure:{title:"Thickness"}},page:{prev:{text:"Previous Page"},next:{text:"Next Page"},add:{text:"Add Page"},lcFullBtn:{title:"Full Screen of Drawing Area"},pptFullBtn:{title:"Full Screen  of PPT"},h5FileFullBtn:{title:"Full Screen  of Courseware"},skipPage:{text_one:"To ",text_two:" pages"},ok:{text:"Confirm"}}},alertWin:{ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}},call:{fun:{page:{pageInteger:{text:"The page number entered must be integers."},pageMax:{text:"The page number entered is over!"},pageMin:{text:"The page number entered can't be less than 1."}}}}},toolCase:{toolBox:{text:"ToolBox"}},timers:{timerSetInterval:{text:"Timer"},timerBegin:{text:"Start"},timerStop:{text:"Pause"},again:{text:"Restart"}},dial:{turntable:{text:"Turntable"}},answers:{headerTopLeft:{text:"The answer is"},headerMiddel:{text:"Click the default answer"},beginAnswer:{text:"Begin to answer"},tureAccuracy:{text:"Accuracy"},trueAnswer:{text:"The right answer"},endAnswer:{text:"End of the answer"},restarting:{text:"Restart"},myAnswer:{text:"My Answer"},changeAnswer:{text:"Modify the answer"},selectAnswer:{text:"Please select at least one answer"},submitAnswer:{text:"Submit the answer"},numberOfAnswer:{text:"Number of answer"},PublishTheAnswer:{text:"Publish the answer"},published:{text:"Published"},details:{text:"Details"},statistics:{text:"Statistics"},student:{text:"Student"},TheSelectedTheAnswer:{text:"The selected the answer"},AnswerTime:{text:"Answer Time"},end:{text:"Please finish your questions first"}},responder:{responder:{text:"Responder"},begin:{text:"Start"},restart:{text:"Restart"},close:{text:"Close"},update:{text:"The current browser does not support canvas components please upgrade!"},inAnswer:{text:"In answer"},answer:{text:"Responder"},noContest:{text:"No contest"}},call:{fun:{page:{pageInteger:{text:"The page number entered must be integers."},pageMax:{text:"The page number entered is over!"},pageMin:{text:"The page number entered can't be less than 1."}}}}};t.default=a,e.exports=t.default},259:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}a(464),a(465),a(467),a(466),a(254),a(166),a(255),a(251);var n=a(232),i=o(n);(0,i.default)()},464:function(e,t){},465:464,466:464,467:464,588:function(e,t,a){function o(e){return a(n(e))}function n(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./i18_chinese.js":256,"./i18_complex.js":257,"./i18_english.js":258};o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=588}});